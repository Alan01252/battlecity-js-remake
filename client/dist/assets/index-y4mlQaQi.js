(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();var xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function $p(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function r(){var n=!1;try{n=this instanceof r}catch{}return n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var n=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return i[r]}})}),t}var Ii={},Eu;function Kp(){return Eu||(Eu=1,(function(i){(function(e){var t=e.Promise,r=t&&"resolve"in t&&"reject"in t&&"all"in t&&"race"in t&&(function(){var O;return new t(function(N){O=N}),typeof O=="function"})();i?(i.Promise=r?t:H,i.Polyfill=H):r||(e.Promise=H);var n="pending",o="sealed",s="fulfilled",a="rejected",u=function(){};function h(O){return Object.prototype.toString.call(O)==="[object Array]"}var l=typeof setImmediate<"u"?setImmediate:setTimeout,f=[],c;function d(){for(var O=0;O<f.length;O++)f[O][0](f[O][1]);f=[],c=!1}function v(O,N){f.push([O,N]),c||(c=!0,l(d,0))}function m(O,N){function G(K){C(N,K)}function B(K){F(N,K)}try{O(G,B)}catch(K){B(K)}}function y(O){var N=O.owner,G=N.state_,B=N.data_,K=O[G],Q=O.then;if(typeof K=="function"){G=s;try{B=K(B)}catch(z){F(Q,z)}}x(Q,B)||(G===s&&C(Q,B),G===a&&F(Q,B))}function x(O,N){var G;try{if(O===N)throw new TypeError("A promises callback cannot return that same promise.");if(N&&(typeof N=="function"||typeof N=="object")){var B=N.then;if(typeof B=="function")return B.call(N,function(K){G||(G=!0,N!==K?C(O,K):P(O,K))},function(K){G||(G=!0,F(O,K))}),!0}}catch(K){return G||F(O,K),!0}return!1}function C(O,N){(O===N||!x(O,N))&&P(O,N)}function P(O,N){O.state_===n&&(O.state_=o,O.data_=N,v(R,O))}function F(O,N){O.state_===n&&(O.state_=o,O.data_=N,v(A,O))}function w(O){var N=O.then_;O.then_=void 0;for(var G=0;G<N.length;G++)y(N[G])}function R(O){O.state_=s,w(O)}function A(O){O.state_=a,w(O)}function H(O){if(typeof O!="function")throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof H))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],m(O,this)}H.prototype={constructor:H,state_:n,then_:null,data_:void 0,then:function(O,N){var G={owner:this,then:new this.constructor(u),fulfilled:O,rejected:N};return this.state_===s||this.state_===a?v(y,G):this.then_.push(G),G.then},catch:function(O){return this.then(null,O)}},H.all=function(O){var N=this;if(!h(O))throw new TypeError("You must pass an array to Promise.all().");return new N(function(G,B){var K=[],Q=0;function z(p){return Q++,function(g){K[p]=g,--Q||G(K)}}for(var E=0,S;E<O.length;E++)S=O[E],S&&typeof S.then=="function"?S.then(z(E),B):K[E]=S;Q||G(K)})},H.race=function(O){var N=this;if(!h(O))throw new TypeError("You must pass an array to Promise.race().");return new N(function(G,B){for(var K=0,Q;K<O.length;K++)Q=O[K],Q&&typeof Q.then=="function"?Q.then(G,B):G(Q)})},H.resolve=function(O){var N=this;return O&&typeof O=="object"&&O.constructor===N?O:new N(function(G){G(O)})},H.reject=function(O){var N=this;return new N(function(G,B){B(O)})}})(typeof window<"u"?window:typeof xr<"u"?xr:typeof self<"u"?self:Ii)})(Ii)),Ii}var Zp=Kp();/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Wn,Iu;function Jp(){if(Iu)return Wn;Iu=1;var i=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function r(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function n(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var s={},a=0;a<10;a++)s["_"+String.fromCharCode(a)]=a;var u=Object.getOwnPropertyNames(s).map(function(l){return s[l]});if(u.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(l){h[l]=l}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Wn=n()?Object.assign:function(o,s){for(var a,u=r(o),h,l=1;l<arguments.length;l++){a=Object(arguments[l]);for(var f in a)e.call(a,f)&&(u[f]=a[f]);if(i){h=i(a);for(var c=0;c<h.length;c++)t.call(a,h[c])&&(u[h[c]]=a[h[c]])}}return u},Wn}var Qp=Jp();const tv=Lr(Qp);/*!
 * @pixi/polyfill - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=Zp.Polyfill);Object.assign||(Object.assign=tv);var ev=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(window.performance&&window.performance.now)){var rv=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-rv}}var $n=Date.now(),Pu=["ms","moz","webkit","o"];for(var Kn=0;Kn<Pu.length&&!window.requestAnimationFrame;++Kn){var Zn=Pu[Kn];window.requestAnimationFrame=window[Zn+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Zn+"CancelAnimationFrame"]||window[Zn+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(i){if(typeof i!="function")throw new TypeError(i+"is not a function");var e=Date.now(),t=ev+$n-e;return t<0&&(t=0),$n=e,window.setTimeout(function(){$n=Date.now(),i(performance.now())},t)});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){return clearTimeout(i)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint8Array||(window.Uint8Array=Array);window.Int32Array||(window.Int32Array=Array);var Jn=/iPhone/i,Au=/iPod/i,Su=/iPad/i,Cu=/\biOS-universal(?:.+)Mac\b/i,Qn=/\bAndroid(?:.+)Mobile\b/i,Ou=/Android/i,pr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Pi=/Silk/i,ce=/Windows Phone/i,Ru=/\bWindows(?:.+)ARM\b/i,Lu=/BlackBerry/i,Mu=/BB10/i,Fu=/Opera Mini/i,Nu=/\b(CriOS|Chrome)(?:.+)Mobile/i,Bu=/Mobile(?:.+)Firefox\b/i,Du=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function iv(i){return function(e){return e.test(i)}}function nv(i){var e={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?e.userAgent=i:i&&i.userAgent&&(e={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var n=iv(t),o={apple:{phone:n(Jn)&&!n(ce),ipod:n(Au),tablet:!n(Jn)&&(n(Su)||Du(e))&&!n(ce),universal:n(Cu),device:(n(Jn)||n(Au)||n(Su)||n(Cu)||Du(e))&&!n(ce)},amazon:{phone:n(pr),tablet:!n(pr)&&n(Pi),device:n(pr)||n(Pi)},android:{phone:!n(ce)&&n(pr)||!n(ce)&&n(Qn),tablet:!n(ce)&&!n(pr)&&!n(Qn)&&(n(Pi)||n(Ou)),device:!n(ce)&&(n(pr)||n(Pi)||n(Qn)||n(Ou))||n(/\bokhttp\b/i)},windows:{phone:n(ce),tablet:n(Ru),device:n(ce)||n(Ru)},other:{blackberry:n(Lu),blackberry10:n(Mu),opera:n(Fu),firefox:n(Bu),chrome:n(Nu),device:n(Lu)||n(Mu)||n(Fu)||n(Bu)||n(Nu)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $t=nv(window.navigator);function ov(i){var e=!0;if($t.tablet||$t.phone){if($t.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var r=parseInt(t[1],10);r<11&&(e=!1)}}if($t.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var r=parseInt(t[1],10);r<7&&(e=!1)}}}return e?i:4}function sv(){return!$t.apple.device}var nt={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:ov(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:$t.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:sv(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},to={exports:{}},Uu;function av(){return Uu||(Uu=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function n(u,h,l){this.fn=u,this.context=h,this.once=l||!1}function o(u,h,l,f,c){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new n(l,f||u,c),v=t?t+h:h;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],d]:u._events[v].push(d):(u._events[v]=d,u._eventsCount++),u}function s(u,h){--u._eventsCount===0?u._events=new r:delete u._events[h]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],l,f;if(this._eventsCount===0)return h;for(f in l=this._events)e.call(l,f)&&h.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},a.prototype.listeners=function(h){var l=t?t+h:h,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,v=new Array(d);c<d;c++)v[c]=f[c].fn;return v},a.prototype.listenerCount=function(h){var l=t?t+h:h,f=this._events[l];return f?f.fn?1:f.length:0},a.prototype.emit=function(h,l,f,c,d,v){var m=t?t+h:h;if(!this._events[m])return!1;var y=this._events[m],x=arguments.length,C,P;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,f),!0;case 4:return y.fn.call(y.context,l,f,c),!0;case 5:return y.fn.call(y.context,l,f,c,d),!0;case 6:return y.fn.call(y.context,l,f,c,d,v),!0}for(P=1,C=new Array(x-1);P<x;P++)C[P-1]=arguments[P];y.fn.apply(y.context,C)}else{var F=y.length,w;for(P=0;P<F;P++)switch(y[P].once&&this.removeListener(h,y[P].fn,void 0,!0),x){case 1:y[P].fn.call(y[P].context);break;case 2:y[P].fn.call(y[P].context,l);break;case 3:y[P].fn.call(y[P].context,l,f);break;case 4:y[P].fn.call(y[P].context,l,f,c);break;default:if(!C)for(w=1,C=new Array(x-1);w<x;w++)C[w-1]=arguments[w];y[P].fn.apply(y[P].context,C)}}return!0},a.prototype.on=function(h,l,f){return o(this,h,l,f,!1)},a.prototype.once=function(h,l,f){return o(this,h,l,f,!0)},a.prototype.removeListener=function(h,l,f,c){var d=t?t+h:h;if(!this._events[d])return this;if(!l)return s(this,d),this;var v=this._events[d];if(v.fn)v.fn===l&&(!c||v.once)&&(!f||v.context===f)&&s(this,d);else{for(var m=0,y=[],x=v.length;m<x;m++)(v[m].fn!==l||c&&!v[m].once||f&&v[m].context!==f)&&y.push(v[m]);y.length?this._events[d]=y.length===1?y[0]:y:s(this,d)}return this},a.prototype.removeAllListeners=function(h){var l;return h?(l=t?t+h:h,this._events[l]&&s(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,i.exports=a})(to)),to.exports}var uv=av();const Mr=Lr(uv);var Ai={exports:{}},ku;function hv(){if(ku)return Ai.exports;ku=1,Ai.exports=i,Ai.exports.default=i;function i(E,S,p){p=p||2;var g=S&&S.length,_=g?S[0]*p:E.length,b=e(E,0,_,p,!0),T=[];if(!b||b.next===b.prev)return T;var I,L,M,D,U,j,q;if(g&&(b=u(E,S,b,p)),E.length>80*p){I=M=E[0],L=D=E[1];for(var V=p;V<_;V+=p)U=E[V],j=E[V+1],U<I&&(I=U),j<L&&(L=j),U>M&&(M=U),j>D&&(D=j);q=Math.max(M-I,D-L),q=q!==0?32767/q:0}return r(b,T,p,I,L,q,0),T}function e(E,S,p,g,_){var b,T;if(_===z(E,S,p,g)>0)for(b=S;b<p;b+=g)T=B(b,E[b],E[b+1],T);else for(b=p-g;b>=S;b-=g)T=B(b,E[b],E[b+1],T);return T&&F(T,T.next)&&(K(T),T=T.next),T}function t(E,S){if(!E)return E;S||(S=E);var p=E,g;do if(g=!1,!p.steiner&&(F(p,p.next)||P(p.prev,p,p.next)===0)){if(K(p),p=S=p.prev,p===p.next)break;g=!0}else p=p.next;while(g||p!==S);return S}function r(E,S,p,g,_,b,T){if(E){!T&&b&&d(E,g,_,b);for(var I=E,L,M;E.prev!==E.next;){if(L=E.prev,M=E.next,b?o(E,g,_,b):n(E)){S.push(L.i/p|0),S.push(E.i/p|0),S.push(M.i/p|0),K(E),E=M.next,I=M.next;continue}if(E=M,E===I){T?T===1?(E=s(t(E),S,p),r(E,S,p,g,_,b,2)):T===2&&a(E,S,p,g,_,b):r(t(E),S,p,g,_,b,1);break}}}}function n(E){var S=E.prev,p=E,g=E.next;if(P(S,p,g)>=0)return!1;for(var _=S.x,b=p.x,T=g.x,I=S.y,L=p.y,M=g.y,D=_<b?_<T?_:T:b<T?b:T,U=I<L?I<M?I:M:L<M?L:M,j=_>b?_>T?_:T:b>T?b:T,q=I>L?I>M?I:M:L>M?L:M,V=g.next;V!==S;){if(V.x>=D&&V.x<=j&&V.y>=U&&V.y<=q&&x(_,I,b,L,T,M,V.x,V.y)&&P(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function o(E,S,p,g){var _=E.prev,b=E,T=E.next;if(P(_,b,T)>=0)return!1;for(var I=_.x,L=b.x,M=T.x,D=_.y,U=b.y,j=T.y,q=I<L?I<M?I:M:L<M?L:M,V=D<U?D<j?D:j:U<j?U:j,$=I>L?I>M?I:M:L>M?L:M,Y=D>U?D>j?D:j:U>j?U:j,it=m(q,V,S,p,g),at=m($,Y,S,p,g),et=E.prevZ,rt=E.nextZ;et&&et.z>=it&&rt&&rt.z<=at;){if(et.x>=q&&et.x<=$&&et.y>=V&&et.y<=Y&&et!==_&&et!==T&&x(I,D,L,U,M,j,et.x,et.y)&&P(et.prev,et,et.next)>=0||(et=et.prevZ,rt.x>=q&&rt.x<=$&&rt.y>=V&&rt.y<=Y&&rt!==_&&rt!==T&&x(I,D,L,U,M,j,rt.x,rt.y)&&P(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;et&&et.z>=it;){if(et.x>=q&&et.x<=$&&et.y>=V&&et.y<=Y&&et!==_&&et!==T&&x(I,D,L,U,M,j,et.x,et.y)&&P(et.prev,et,et.next)>=0)return!1;et=et.prevZ}for(;rt&&rt.z<=at;){if(rt.x>=q&&rt.x<=$&&rt.y>=V&&rt.y<=Y&&rt!==_&&rt!==T&&x(I,D,L,U,M,j,rt.x,rt.y)&&P(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function s(E,S,p){var g=E;do{var _=g.prev,b=g.next.next;!F(_,b)&&w(_,g,g.next,b)&&O(_,b)&&O(b,_)&&(S.push(_.i/p|0),S.push(g.i/p|0),S.push(b.i/p|0),K(g),K(g.next),g=E=b),g=g.next}while(g!==E);return t(g)}function a(E,S,p,g,_,b){var T=E;do{for(var I=T.next.next;I!==T.prev;){if(T.i!==I.i&&C(T,I)){var L=G(T,I);T=t(T,T.next),L=t(L,L.next),r(T,S,p,g,_,b,0),r(L,S,p,g,_,b,0);return}I=I.next}T=T.next}while(T!==E)}function u(E,S,p,g){var _=[],b,T,I,L,M;for(b=0,T=S.length;b<T;b++)I=S[b]*g,L=b<T-1?S[b+1]*g:E.length,M=e(E,I,L,g,!1),M===M.next&&(M.steiner=!0),_.push(y(M));for(_.sort(h),b=0;b<_.length;b++)p=l(_[b],p);return p}function h(E,S){return E.x-S.x}function l(E,S){var p=f(E,S);if(!p)return S;var g=G(p,E);return t(g,g.next),t(p,p.next)}function f(E,S){var p=S,g=E.x,_=E.y,b=-1/0,T;do{if(_<=p.y&&_>=p.next.y&&p.next.y!==p.y){var I=p.x+(_-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(I<=g&&I>b&&(b=I,T=p.x<p.next.x?p:p.next,I===g))return T}p=p.next}while(p!==S);if(!T)return null;var L=T,M=T.x,D=T.y,U=1/0,j;p=T;do g>=p.x&&p.x>=M&&g!==p.x&&x(_<D?g:b,_,M,D,_<D?b:g,_,p.x,p.y)&&(j=Math.abs(_-p.y)/(g-p.x),O(p,E)&&(j<U||j===U&&(p.x>T.x||p.x===T.x&&c(T,p)))&&(T=p,U=j)),p=p.next;while(p!==L);return T}function c(E,S){return P(E.prev,E,S.prev)<0&&P(S.next,E,E.next)<0}function d(E,S,p,g){var _=E;do _.z===0&&(_.z=m(_.x,_.y,S,p,g)),_.prevZ=_.prev,_.nextZ=_.next,_=_.next;while(_!==E);_.prevZ.nextZ=null,_.prevZ=null,v(_)}function v(E){var S,p,g,_,b,T,I,L,M=1;do{for(p=E,E=null,b=null,T=0;p;){for(T++,g=p,I=0,S=0;S<M&&(I++,g=g.nextZ,!!g);S++);for(L=M;I>0||L>0&&g;)I!==0&&(L===0||!g||p.z<=g.z)?(_=p,p=p.nextZ,I--):(_=g,g=g.nextZ,L--),b?b.nextZ=_:E=_,_.prevZ=b,b=_;p=g}b.nextZ=null,M*=2}while(T>1);return E}function m(E,S,p,g,_){return E=(E-p)*_|0,S=(S-g)*_|0,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,E|S<<1}function y(E){var S=E,p=E;do(S.x<p.x||S.x===p.x&&S.y<p.y)&&(p=S),S=S.next;while(S!==E);return p}function x(E,S,p,g,_,b,T,I){return(_-T)*(S-I)>=(E-T)*(b-I)&&(E-T)*(g-I)>=(p-T)*(S-I)&&(p-T)*(b-I)>=(_-T)*(g-I)}function C(E,S){return E.next.i!==S.i&&E.prev.i!==S.i&&!H(E,S)&&(O(E,S)&&O(S,E)&&N(E,S)&&(P(E.prev,E,S.prev)||P(E,S.prev,S))||F(E,S)&&P(E.prev,E,E.next)>0&&P(S.prev,S,S.next)>0)}function P(E,S,p){return(S.y-E.y)*(p.x-S.x)-(S.x-E.x)*(p.y-S.y)}function F(E,S){return E.x===S.x&&E.y===S.y}function w(E,S,p,g){var _=A(P(E,S,p)),b=A(P(E,S,g)),T=A(P(p,g,E)),I=A(P(p,g,S));return!!(_!==b&&T!==I||_===0&&R(E,p,S)||b===0&&R(E,g,S)||T===0&&R(p,E,g)||I===0&&R(p,S,g))}function R(E,S,p){return S.x<=Math.max(E.x,p.x)&&S.x>=Math.min(E.x,p.x)&&S.y<=Math.max(E.y,p.y)&&S.y>=Math.min(E.y,p.y)}function A(E){return E>0?1:E<0?-1:0}function H(E,S){var p=E;do{if(p.i!==E.i&&p.next.i!==E.i&&p.i!==S.i&&p.next.i!==S.i&&w(p,p.next,E,S))return!0;p=p.next}while(p!==E);return!1}function O(E,S){return P(E.prev,E,E.next)<0?P(E,S,E.next)>=0&&P(E,E.prev,S)>=0:P(E,S,E.prev)<0||P(E,E.next,S)<0}function N(E,S){var p=E,g=!1,_=(E.x+S.x)/2,b=(E.y+S.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&_<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==E);return g}function G(E,S){var p=new Q(E.i,E.x,E.y),g=new Q(S.i,S.x,S.y),_=E.next,b=S.prev;return E.next=S,S.prev=E,p.next=_,_.prev=p,g.next=p,p.prev=g,b.next=g,g.prev=b,g}function B(E,S,p,g){var _=new Q(E,S,p);return g?(_.next=g.next,_.prev=g,g.next.prev=_,g.next=_):(_.prev=_,_.next=_),_}function K(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function Q(E,S,p){this.i=E,this.x=S,this.y=p,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}i.deviation=function(E,S,p,g){var _=S&&S.length,b=_?S[0]*p:E.length,T=Math.abs(z(E,0,b,p));if(_)for(var I=0,L=S.length;I<L;I++){var M=S[I]*p,D=I<L-1?S[I+1]*p:E.length;T-=Math.abs(z(E,M,D,p))}var U=0;for(I=0;I<g.length;I+=3){var j=g[I]*p,q=g[I+1]*p,V=g[I+2]*p;U+=Math.abs((E[j]-E[V])*(E[q+1]-E[j+1])-(E[j]-E[q])*(E[V+1]-E[j+1]))}return T===0&&U===0?0:Math.abs((U-T)/T)};function z(E,S,p,g){for(var _=0,b=S,T=p-g;b<p;b+=g)_+=(E[T]-E[b])*(E[b+1]+E[T+1]),T=b;return _}return i.flatten=function(E){for(var S=E[0][0].length,p={vertices:[],holes:[],dimensions:S},g=0,_=0;_<E.length;_++){for(var b=0;b<E[_].length;b++)for(var T=0;T<S;T++)p.vertices.push(E[_][b][T]);_>0&&(g+=E[_-1].length,p.holes.push(g))}return p},Ai.exports}var lv=hv();const ba=Lr(lv);var De={},Zr={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var fv=Zr.exports,Xu;function cv(){return Xu||(Xu=1,(function(i,e){(function(t){var r=e&&!e.nodeType&&e,n=i&&!i.nodeType&&i,o=typeof xr=="object"&&xr;(o.global===o||o.window===o||o.self===o)&&(t=o);var s,a=2147483647,u=36,h=1,l=26,f=38,c=700,d=72,v=128,m="-",y=/^xn--/,x=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=u-h,w=Math.floor,R=String.fromCharCode,A;function H(_){throw new RangeError(P[_])}function O(_,b){for(var T=_.length,I=[];T--;)I[T]=b(_[T]);return I}function N(_,b){var T=_.split("@"),I="";T.length>1&&(I=T[0]+"@",_=T[1]),_=_.replace(C,".");var L=_.split("."),M=O(L,b).join(".");return I+M}function G(_){for(var b=[],T=0,I=_.length,L,M;T<I;)L=_.charCodeAt(T++),L>=55296&&L<=56319&&T<I?(M=_.charCodeAt(T++),(M&64512)==56320?b.push(((L&1023)<<10)+(M&1023)+65536):(b.push(L),T--)):b.push(L);return b}function B(_){return O(_,function(b){var T="";return b>65535&&(b-=65536,T+=R(b>>>10&1023|55296),b=56320|b&1023),T+=R(b),T}).join("")}function K(_){return _-48<10?_-22:_-65<26?_-65:_-97<26?_-97:u}function Q(_,b){return _+22+75*(_<26)-((b!=0)<<5)}function z(_,b,T){var I=0;for(_=T?w(_/c):_>>1,_+=w(_/b);_>F*l>>1;I+=u)_=w(_/F);return w(I+(F+1)*_/(_+f))}function E(_){var b=[],T=_.length,I,L=0,M=v,D=d,U,j,q,V,$,Y,it,at,et;for(U=_.lastIndexOf(m),U<0&&(U=0),j=0;j<U;++j)_.charCodeAt(j)>=128&&H("not-basic"),b.push(_.charCodeAt(j));for(q=U>0?U+1:0;q<T;){for(V=L,$=1,Y=u;q>=T&&H("invalid-input"),it=K(_.charCodeAt(q++)),(it>=u||it>w((a-L)/$))&&H("overflow"),L+=it*$,at=Y<=D?h:Y>=D+l?l:Y-D,!(it<at);Y+=u)et=u-at,$>w(a/et)&&H("overflow"),$*=et;I=b.length+1,D=z(L-V,I,V==0),w(L/I)>a-M&&H("overflow"),M+=w(L/I),L%=I,b.splice(L++,0,M)}return B(b)}function S(_){var b,T,I,L,M,D,U,j,q,V,$,Y=[],it,at,et,rt;for(_=G(_),it=_.length,b=v,T=0,M=d,D=0;D<it;++D)$=_[D],$<128&&Y.push(R($));for(I=L=Y.length,L&&Y.push(m);I<it;){for(U=a,D=0;D<it;++D)$=_[D],$>=b&&$<U&&(U=$);for(at=I+1,U-b>w((a-T)/at)&&H("overflow"),T+=(U-b)*at,b=U,D=0;D<it;++D)if($=_[D],$<b&&++T>a&&H("overflow"),$==b){for(j=T,q=u;V=q<=M?h:q>=M+l?l:q-M,!(j<V);q+=u)rt=j-V,et=u-V,Y.push(R(Q(V+rt%et,0))),j=w(rt/et);Y.push(R(Q(j,0))),M=z(T,at,I==L),T=0,++I}++T,++b}return Y.join("")}function p(_){return N(_,function(b){return y.test(b)?E(b.slice(4).toLowerCase()):b})}function g(_){return N(_,function(b){return x.test(b)?"xn--"+S(b):b})}if(s={version:"1.4.1",ucs2:{decode:G,encode:B},decode:E,encode:S,toASCII:g,toUnicode:p},r&&n)if(i.exports==r)n.exports=s;else for(A in s)s.hasOwnProperty(A)&&(r[A]=s[A]);else t.punycode=s})(fv)})(Zr,Zr.exports)),Zr.exports}var eo,Hu;function Fr(){return Hu||(Hu=1,eo=TypeError),eo}const dv={},pv=Object.freeze(Object.defineProperty({__proto__:null,default:dv},Symbol.toStringTag,{value:"Module"})),vv=$p(pv);var ro,Gu;function In(){if(Gu)return ro;Gu=1;var i=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=i&&e&&typeof e.get=="function"?e.get:null,r=i&&Map.prototype.forEach,n=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=n&&o&&typeof o.get=="function"?o.get:null,a=n&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,h=u?WeakMap.prototype.has:null,l=typeof WeakSet=="function"&&WeakSet.prototype,f=l?WeakSet.prototype.has:null,c=typeof WeakRef=="function"&&WeakRef.prototype,d=c?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,m=Object.prototype.toString,y=Function.prototype.toString,x=String.prototype.match,C=String.prototype.slice,P=String.prototype.replace,F=String.prototype.toUpperCase,w=String.prototype.toLowerCase,R=RegExp.prototype.test,A=Array.prototype.concat,H=Array.prototype.join,O=Array.prototype.slice,N=Math.floor,G=typeof BigInt=="function"?BigInt.prototype.valueOf:null,B=Object.getOwnPropertySymbols,K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Q=typeof Symbol=="function"&&typeof Symbol.iterator=="object",z=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Q||!0)?Symbol.toStringTag:null,E=Object.prototype.propertyIsEnumerable,S=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(k){return k.__proto__}:null);function p(k,X){if(k===1/0||k===-1/0||k!==k||k&&k>-1e3&&k<1e3||R.call(/e/,X))return X;var ct=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof k=="number"){var gt=k<0?-N(-k):N(k);if(gt!==k){var xt=String(gt),ht=C.call(X,xt.length+1);return P.call(xt,ct,"$&_")+"."+P.call(P.call(ht,/([0-9]{3})/g,"$&_"),/_$/,"")}}return P.call(X,ct,"$&_")}var g=vv,_=g.custom,b=at(_)?_:null,T={__proto__:null,double:'"',single:"'"},I={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};ro=function k(X,ct,gt,xt){var ht=ct||{};if(mt(ht,"quoteStyle")&&!mt(T,ht.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(mt(ht,"maxStringLength")&&(typeof ht.maxStringLength=="number"?ht.maxStringLength<0&&ht.maxStringLength!==1/0:ht.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ae=mt(ht,"customInspect")?ht.customInspect:!0;if(typeof Ae!="boolean"&&Ae!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(mt(ht,"indent")&&ht.indent!==null&&ht.indent!=="	"&&!(parseInt(ht.indent,10)===ht.indent&&ht.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(mt(ht,"numericSeparator")&&typeof ht.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Be=ht.numericSeparator;if(typeof X>"u")return"undefined";if(X===null)return"null";if(typeof X=="boolean")return X?"true":"false";if(typeof X=="string")return pu(X,ht);if(typeof X=="number"){if(X===0)return 1/0/X>0?"0":"-0";var Vt=String(X);return Be?p(X,Vt):Vt}if(typeof X=="bigint"){var Se=String(X)+"n";return Be?p(X,Se):Se}var Hn=typeof ht.depth>"u"?5:ht.depth;if(typeof gt>"u"&&(gt=0),gt>=Hn&&Hn>0&&typeof X=="object")return U(X)?"[Array]":"[Object]";var cr=Yp(ht,gt);if(typeof xt>"u")xt=[];else if(Pe(xt,X)>=0)return"[Circular]";function Jt(dr,Ei,Wp){if(Ei&&(xt=O.call(xt),xt.push(Ei)),Wp){var Tu={depth:ht.depth};return mt(ht,"quoteStyle")&&(Tu.quoteStyle=ht.quoteStyle),k(dr,Tu,gt+1,xt)}return k(dr,ht,gt+1,xt)}if(typeof X=="function"&&!q(X)){var yu=bt(X),mu=wi(X,Jt);return"[Function"+(yu?": "+yu:" (anonymous)")+"]"+(mu.length>0?" { "+H.call(mu,", ")+" }":"")}if(at(X)){var gu=Q?P.call(String(X),/^(Symbol\(.*\))_[^)]*$/,"$1"):K.call(X);return typeof X=="object"&&!Q?Hr(gu):gu}if(Vp(X)){for(var Gr="<"+w.call(String(X.nodeName)),Gn=X.attributes||[],Ti=0;Ti<Gn.length;Ti++)Gr+=" "+Gn[Ti].name+"="+L(M(Gn[Ti].value),"double",ht);return Gr+=">",X.childNodes&&X.childNodes.length&&(Gr+="..."),Gr+="</"+w.call(String(X.nodeName))+">",Gr}if(U(X)){if(X.length===0)return"[]";var Vn=wi(X,Jt);return cr&&!jp(Vn)?"["+Xn(Vn,cr)+"]":"[ "+H.call(Vn,", ")+" ]"}if(V(X)){var zn=wi(X,Jt);return!("cause"in Error.prototype)&&"cause"in X&&!E.call(X,"cause")?"{ ["+String(X)+"] "+H.call(A.call("[cause]: "+Jt(X.cause),zn),", ")+" }":zn.length===0?"["+String(X)+"]":"{ ["+String(X)+"] "+H.call(zn,", ")+" }"}if(typeof X=="object"&&Ae){if(b&&typeof X[b]=="function"&&g)return g(X,{depth:Hn-gt});if(Ae!=="symbol"&&typeof X.inspect=="function")return X.inspect()}if(Zt(X)){var _u=[];return r&&r.call(X,function(dr,Ei){_u.push(Jt(Ei,X,!0)+" => "+Jt(dr,X))}),vu("Map",t.call(X),_u,cr)}if(fr(X)){var xu=[];return a&&a.call(X,function(dr){xu.push(Jt(dr,X))}),vu("Set",s.call(X),xu,cr)}if(hr(X))return kn("WeakMap");if(Gp(X))return kn("WeakSet");if(lr(X))return kn("WeakRef");if(Y(X))return Hr(Jt(Number(X)));if(et(X))return Hr(Jt(G.call(X)));if(it(X))return Hr(v.call(X));if($(X))return Hr(Jt(String(X)));if(typeof window<"u"&&X===window)return"{ [object Window] }";if(typeof globalThis<"u"&&X===globalThis||typeof xr<"u"&&X===xr)return"{ [object globalThis] }";if(!j(X)&&!q(X)){var jn=wi(X,Jt),bu=S?S(X)===Object.prototype:X instanceof Object||X.constructor===Object,Yn=X instanceof Object?"":"null prototype",wu=!bu&&z&&Object(X)===X&&z in X?C.call(yt(X),8,-1):Yn?"Object":"",qp=bu||typeof X.constructor!="function"?"":X.constructor.name?X.constructor.name+" ":"",qn=qp+(wu||Yn?"["+H.call(A.call([],wu||[],Yn||[]),": ")+"] ":"");return jn.length===0?qn+"{}":cr?qn+"{"+Xn(jn,cr)+"}":qn+"{ "+H.call(jn,", ")+" }"}return String(X)};function L(k,X,ct){var gt=ct.quoteStyle||X,xt=T[gt];return xt+k+xt}function M(k){return P.call(String(k),/"/g,"&quot;")}function D(k){return!z||!(typeof k=="object"&&(z in k||typeof k[z]<"u"))}function U(k){return yt(k)==="[object Array]"&&D(k)}function j(k){return yt(k)==="[object Date]"&&D(k)}function q(k){return yt(k)==="[object RegExp]"&&D(k)}function V(k){return yt(k)==="[object Error]"&&D(k)}function $(k){return yt(k)==="[object String]"&&D(k)}function Y(k){return yt(k)==="[object Number]"&&D(k)}function it(k){return yt(k)==="[object Boolean]"&&D(k)}function at(k){if(Q)return k&&typeof k=="object"&&k instanceof Symbol;if(typeof k=="symbol")return!0;if(!k||typeof k!="object"||!K)return!1;try{return K.call(k),!0}catch{}return!1}function et(k){if(!k||typeof k!="object"||!G)return!1;try{return G.call(k),!0}catch{}return!1}var rt=Object.prototype.hasOwnProperty||function(k){return k in this};function mt(k,X){return rt.call(k,X)}function yt(k){return m.call(k)}function bt(k){if(k.name)return k.name;var X=x.call(y.call(k),/^function\s*([\w$]+)/);return X?X[1]:null}function Pe(k,X){if(k.indexOf)return k.indexOf(X);for(var ct=0,gt=k.length;ct<gt;ct++)if(k[ct]===X)return ct;return-1}function Zt(k){if(!t||!k||typeof k!="object")return!1;try{t.call(k);try{s.call(k)}catch{return!0}return k instanceof Map}catch{}return!1}function hr(k){if(!h||!k||typeof k!="object")return!1;try{h.call(k,h);try{f.call(k,f)}catch{return!0}return k instanceof WeakMap}catch{}return!1}function lr(k){if(!d||!k||typeof k!="object")return!1;try{return d.call(k),!0}catch{}return!1}function fr(k){if(!s||!k||typeof k!="object")return!1;try{s.call(k);try{t.call(k)}catch{return!0}return k instanceof Set}catch{}return!1}function Gp(k){if(!f||!k||typeof k!="object")return!1;try{f.call(k,f);try{h.call(k,h)}catch{return!0}return k instanceof WeakSet}catch{}return!1}function Vp(k){return!k||typeof k!="object"?!1:typeof HTMLElement<"u"&&k instanceof HTMLElement?!0:typeof k.nodeName=="string"&&typeof k.getAttribute=="function"}function pu(k,X){if(k.length>X.maxStringLength){var ct=k.length-X.maxStringLength,gt="... "+ct+" more character"+(ct>1?"s":"");return pu(C.call(k,0,X.maxStringLength),X)+gt}var xt=I[X.quoteStyle||"single"];xt.lastIndex=0;var ht=P.call(P.call(k,xt,"\\$1"),/[\x00-\x1f]/g,zp);return L(ht,"single",X)}function zp(k){var X=k.charCodeAt(0),ct={8:"b",9:"t",10:"n",12:"f",13:"r"}[X];return ct?"\\"+ct:"\\x"+(X<16?"0":"")+F.call(X.toString(16))}function Hr(k){return"Object("+k+")"}function kn(k){return k+" { ? }"}function vu(k,X,ct,gt){var xt=gt?Xn(ct,gt):H.call(ct,", ");return k+" ("+X+") {"+xt+"}"}function jp(k){for(var X=0;X<k.length;X++)if(Pe(k[X],`
`)>=0)return!1;return!0}function Yp(k,X){var ct;if(k.indent==="	")ct="	";else if(typeof k.indent=="number"&&k.indent>0)ct=H.call(Array(k.indent+1)," ");else return null;return{base:ct,prev:H.call(Array(X+1),ct)}}function Xn(k,X){if(k.length===0)return"";var ct=`
`+X.prev+X.base;return ct+H.call(k,","+ct)+`
`+X.prev}function wi(k,X){var ct=U(k),gt=[];if(ct){gt.length=k.length;for(var xt=0;xt<k.length;xt++)gt[xt]=mt(k,xt)?X(k[xt],k):""}var ht=typeof B=="function"?B(k):[],Ae;if(Q){Ae={};for(var Be=0;Be<ht.length;Be++)Ae["$"+ht[Be]]=ht[Be]}for(var Vt in k)mt(k,Vt)&&(ct&&String(Number(Vt))===Vt&&Vt<k.length||Q&&Ae["$"+Vt]instanceof Symbol||(R.call(/[^\w$]/,Vt)?gt.push(X(Vt,k)+": "+X(k[Vt],k)):gt.push(Vt+": "+X(k[Vt],k))));if(typeof B=="function")for(var Se=0;Se<ht.length;Se++)E.call(k,ht[Se])&&gt.push("["+X(ht[Se])+"]: "+X(k[ht[Se]],k));return gt}return ro}var io,Vu;function yv(){if(Vu)return io;Vu=1;var i=In(),e=Fr(),t=function(a,u,h){for(var l=a,f;(f=l.next)!=null;l=f)if(f.key===u)return l.next=f.next,h||(f.next=a.next,a.next=f),f},r=function(a,u){if(a){var h=t(a,u);return h&&h.value}},n=function(a,u,h){var l=t(a,u);l?l.value=h:a.next={key:u,next:a.next,value:h}},o=function(a,u){return a?!!t(a,u):!1},s=function(a,u){if(a)return t(a,u,!0)};return io=function(){var u,h={assert:function(l){if(!h.has(l))throw new e("Side channel does not contain "+i(l))},delete:function(l){var f=u&&u.next,c=s(u,l);return c&&f&&f===c&&(u=void 0),!!c},get:function(l){return r(u,l)},has:function(l){return o(u,l)},set:function(l,f){u||(u={next:void 0}),n(u,l,f)}};return h},io}var no,zu;function sf(){return zu||(zu=1,no=Object),no}var oo,ju;function mv(){return ju||(ju=1,oo=Error),oo}var so,Yu;function gv(){return Yu||(Yu=1,so=EvalError),so}var ao,qu;function _v(){return qu||(qu=1,ao=RangeError),ao}var uo,Wu;function xv(){return Wu||(Wu=1,uo=ReferenceError),uo}var ho,$u;function bv(){return $u||($u=1,ho=SyntaxError),ho}var lo,Ku;function wv(){return Ku||(Ku=1,lo=URIError),lo}var fo,Zu;function Tv(){return Zu||(Zu=1,fo=Math.abs),fo}var co,Ju;function Ev(){return Ju||(Ju=1,co=Math.floor),co}var po,Qu;function Iv(){return Qu||(Qu=1,po=Math.max),po}var vo,th;function Pv(){return th||(th=1,vo=Math.min),vo}var yo,eh;function Av(){return eh||(eh=1,yo=Math.pow),yo}var mo,rh;function Sv(){return rh||(rh=1,mo=Math.round),mo}var go,ih;function Cv(){return ih||(ih=1,go=Number.isNaN||function(e){return e!==e}),go}var _o,nh;function Ov(){if(nh)return _o;nh=1;var i=Cv();return _o=function(t){return i(t)||t===0?t:t<0?-1:1},_o}var xo,oh;function Rv(){return oh||(oh=1,xo=Object.getOwnPropertyDescriptor),xo}var bo,sh;function af(){if(sh)return bo;sh=1;var i=Rv();if(i)try{i([],"length")}catch{i=null}return bo=i,bo}var wo,ah;function Lv(){if(ah)return wo;ah=1;var i=Object.defineProperty||!1;if(i)try{i({},"a",{value:1})}catch{i=!1}return wo=i,wo}var To,uh;function Mv(){return uh||(uh=1,To=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==n||a.enumerable!==!0)return!1}return!0}),To}var Eo,hh;function Fv(){if(hh)return Eo;hh=1;var i=typeof Symbol<"u"&&Symbol,e=Mv();return Eo=function(){return typeof i!="function"||typeof Symbol!="function"||typeof i("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Eo}var Io,lh;function uf(){return lh||(lh=1,Io=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Io}var Po,fh;function hf(){if(fh)return Po;fh=1;var i=sf();return Po=i.getPrototypeOf||null,Po}var Ao,ch;function Nv(){if(ch)return Ao;ch=1;var i="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",n=function(u,h){for(var l=[],f=0;f<u.length;f+=1)l[f]=u[f];for(var c=0;c<h.length;c+=1)l[c+u.length]=h[c];return l},o=function(u,h){for(var l=[],f=h,c=0;f<u.length;f+=1,c+=1)l[c]=u[f];return l},s=function(a,u){for(var h="",l=0;l<a.length;l+=1)h+=a[l],l+1<a.length&&(h+=u);return h};return Ao=function(u){var h=this;if(typeof h!="function"||e.apply(h)!==r)throw new TypeError(i+h);for(var l=o(arguments,1),f,c=function(){if(this instanceof f){var x=h.apply(this,n(l,arguments));return Object(x)===x?x:this}return h.apply(u,n(l,arguments))},d=t(0,h.length-l.length),v=[],m=0;m<d;m++)v[m]="$"+m;if(f=Function("binder","return function ("+s(v,",")+"){ return binder.apply(this,arguments); }")(c),h.prototype){var y=function(){};y.prototype=h.prototype,f.prototype=new y,y.prototype=null}return f},Ao}var So,dh;function Pn(){if(dh)return So;dh=1;var i=Nv();return So=Function.prototype.bind||i,So}var Co,ph;function wa(){return ph||(ph=1,Co=Function.prototype.call),Co}var Oo,vh;function lf(){return vh||(vh=1,Oo=Function.prototype.apply),Oo}var Ro,yh;function Bv(){return yh||(yh=1,Ro=typeof Reflect<"u"&&Reflect&&Reflect.apply),Ro}var Lo,mh;function Dv(){if(mh)return Lo;mh=1;var i=Pn(),e=lf(),t=wa(),r=Bv();return Lo=r||i.call(t,e),Lo}var Mo,gh;function ff(){if(gh)return Mo;gh=1;var i=Pn(),e=Fr(),t=wa(),r=Dv();return Mo=function(o){if(o.length<1||typeof o[0]!="function")throw new e("a function is required");return r(i,t,o)},Mo}var Fo,_h;function Uv(){if(_h)return Fo;_h=1;var i=ff(),e=af(),t;try{t=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var r=!!t&&e&&e(Object.prototype,"__proto__"),n=Object,o=n.getPrototypeOf;return Fo=r&&typeof r.get=="function"?i([r.get]):typeof o=="function"?function(a){return o(a==null?a:n(a))}:!1,Fo}var No,xh;function kv(){if(xh)return No;xh=1;var i=uf(),e=hf(),t=Uv();return No=i?function(n){return i(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:t?function(n){return t(n)}:null,No}var Bo,bh;function Xv(){if(bh)return Bo;bh=1;var i=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Pn();return Bo=t.call(i,e),Bo}var Do,wh;function Ta(){if(wh)return Do;wh=1;var i,e=sf(),t=mv(),r=gv(),n=_v(),o=xv(),s=bv(),a=Fr(),u=wv(),h=Tv(),l=Ev(),f=Iv(),c=Pv(),d=Av(),v=Sv(),m=Ov(),y=Function,x=function(q){try{return y('"use strict"; return ('+q+").constructor;")()}catch{}},C=af(),P=Lv(),F=function(){throw new a},w=C?(function(){try{return arguments.callee,F}catch{try{return C(arguments,"callee").get}catch{return F}}})():F,R=Fv()(),A=kv(),H=hf(),O=uf(),N=lf(),G=wa(),B={},K=typeof Uint8Array>"u"||!A?i:A(Uint8Array),Q={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":R&&A?A([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":B,"%AsyncGenerator%":B,"%AsyncGeneratorFunction%":B,"%AsyncIteratorPrototype%":B,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?i:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?i:Float16Array,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":B,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":R&&A?A(A([][Symbol.iterator]())):i,"%JSON%":typeof JSON=="object"?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!R||!A?i:A(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":C,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":n,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!R||!A?i:A(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":R&&A?A(""[Symbol.iterator]()):i,"%Symbol%":R?Symbol:i,"%SyntaxError%":s,"%ThrowTypeError%":w,"%TypedArray%":K,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet,"%Function.prototype.call%":G,"%Function.prototype.apply%":N,"%Object.defineProperty%":P,"%Object.getPrototypeOf%":H,"%Math.abs%":h,"%Math.floor%":l,"%Math.max%":f,"%Math.min%":c,"%Math.pow%":d,"%Math.round%":v,"%Math.sign%":m,"%Reflect.getPrototypeOf%":O};if(A)try{null.error}catch(q){var z=A(A(q));Q["%Error.prototype%"]=z}var E=function q(V){var $;if(V==="%AsyncFunction%")$=x("async function () {}");else if(V==="%GeneratorFunction%")$=x("function* () {}");else if(V==="%AsyncGeneratorFunction%")$=x("async function* () {}");else if(V==="%AsyncGenerator%"){var Y=q("%AsyncGeneratorFunction%");Y&&($=Y.prototype)}else if(V==="%AsyncIteratorPrototype%"){var it=q("%AsyncGenerator%");it&&A&&($=A(it.prototype))}return Q[V]=$,$},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},p=Pn(),g=Xv(),_=p.call(G,Array.prototype.concat),b=p.call(N,Array.prototype.splice),T=p.call(G,String.prototype.replace),I=p.call(G,String.prototype.slice),L=p.call(G,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,U=function(V){var $=I(V,0,1),Y=I(V,-1);if($==="%"&&Y!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(Y==="%"&&$!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var it=[];return T(V,M,function(at,et,rt,mt){it[it.length]=rt?T(mt,D,"$1"):et||at}),it},j=function(V,$){var Y=V,it;if(g(S,Y)&&(it=S[Y],Y="%"+it[0]+"%"),g(Q,Y)){var at=Q[Y];if(at===B&&(at=E(Y)),typeof at>"u"&&!$)throw new a("intrinsic "+V+" exists, but is not available. Please file an issue!");return{alias:it,name:Y,value:at}}throw new s("intrinsic "+V+" does not exist!")};return Do=function(V,$){if(typeof V!="string"||V.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $!="boolean")throw new a('"allowMissing" argument must be a boolean');if(L(/^%?[^%]*%?$/,V)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Y=U(V),it=Y.length>0?Y[0]:"",at=j("%"+it+"%",$),et=at.name,rt=at.value,mt=!1,yt=at.alias;yt&&(it=yt[0],b(Y,_([0,1],yt)));for(var bt=1,Pe=!0;bt<Y.length;bt+=1){var Zt=Y[bt],hr=I(Zt,0,1),lr=I(Zt,-1);if((hr==='"'||hr==="'"||hr==="`"||lr==='"'||lr==="'"||lr==="`")&&hr!==lr)throw new s("property names with quotes must have matching quotes");if((Zt==="constructor"||!Pe)&&(mt=!0),it+="."+Zt,et="%"+it+"%",g(Q,et))rt=Q[et];else if(rt!=null){if(!(Zt in rt)){if(!$)throw new a("base intrinsic for "+V+" exists, but the property is not available.");return}if(C&&bt+1>=Y.length){var fr=C(rt,Zt);Pe=!!fr,Pe&&"get"in fr&&!("originalValue"in fr.get)?rt=fr.get:rt=rt[Zt]}else Pe=g(rt,Zt),rt=rt[Zt];Pe&&!mt&&(Q[et]=rt)}}return rt},Do}var Uo,Th;function cf(){if(Th)return Uo;Th=1;var i=Ta(),e=ff(),t=e([i("%String.prototype.indexOf%")]);return Uo=function(n,o){var s=i(n,!!o);return typeof s=="function"&&t(n,".prototype.")>-1?e([s]):s},Uo}var ko,Eh;function df(){if(Eh)return ko;Eh=1;var i=Ta(),e=cf(),t=In(),r=Fr(),n=i("%Map%",!0),o=e("Map.prototype.get",!0),s=e("Map.prototype.set",!0),a=e("Map.prototype.has",!0),u=e("Map.prototype.delete",!0),h=e("Map.prototype.size",!0);return ko=!!n&&function(){var f,c={assert:function(d){if(!c.has(d))throw new r("Side channel does not contain "+t(d))},delete:function(d){if(f){var v=u(f,d);return h(f)===0&&(f=void 0),v}return!1},get:function(d){if(f)return o(f,d)},has:function(d){return f?a(f,d):!1},set:function(d,v){f||(f=new n),s(f,d,v)}};return c},ko}var Xo,Ih;function Hv(){if(Ih)return Xo;Ih=1;var i=Ta(),e=cf(),t=In(),r=df(),n=Fr(),o=i("%WeakMap%",!0),s=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),h=e("WeakMap.prototype.delete",!0);return Xo=o?function(){var f,c,d={assert:function(v){if(!d.has(v))throw new n("Side channel does not contain "+t(v))},delete:function(v){if(o&&v&&(typeof v=="object"||typeof v=="function")){if(f)return h(f,v)}else if(r&&c)return c.delete(v);return!1},get:function(v){return o&&v&&(typeof v=="object"||typeof v=="function")&&f?s(f,v):c&&c.get(v)},has:function(v){return o&&v&&(typeof v=="object"||typeof v=="function")&&f?u(f,v):!!c&&c.has(v)},set:function(v,m){o&&v&&(typeof v=="object"||typeof v=="function")?(f||(f=new o),a(f,v,m)):r&&(c||(c=r()),c.set(v,m))}};return d}:r,Xo}var Ho,Ph;function Gv(){if(Ph)return Ho;Ph=1;var i=Fr(),e=In(),t=yv(),r=df(),n=Hv(),o=n||r||t;return Ho=function(){var a,u={assert:function(h){if(!u.has(h))throw new i("Side channel does not contain "+e(h))},delete:function(h){return!!a&&a.delete(h)},get:function(h){return a&&a.get(h)},has:function(h){return!!a&&a.has(h)},set:function(h,l){a||(a=o()),a.set(h,l)}};return u},Ho}var Go,Ah;function Ea(){if(Ah)return Go;Ah=1;var i=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Go={default:t.RFC3986,formatters:{RFC1738:function(r){return i.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Go}var Vo,Sh;function pf(){if(Sh)return Vo;Sh=1;var i=Ea(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=(function(){for(var y=[],x=0;x<256;++x)y.push("%"+((x<16?"0":"")+x.toString(16)).toUpperCase());return y})(),n=function(x){for(;x.length>1;){var C=x.pop(),P=C.obj[C.prop];if(t(P)){for(var F=[],w=0;w<P.length;++w)typeof P[w]<"u"&&F.push(P[w]);C.obj[C.prop]=F}}},o=function(x,C){for(var P=C&&C.plainObjects?{__proto__:null}:{},F=0;F<x.length;++F)typeof x[F]<"u"&&(P[F]=x[F]);return P},s=function y(x,C,P){if(!C)return x;if(typeof C!="object"&&typeof C!="function"){if(t(x))x.push(C);else if(x&&typeof x=="object")(P&&(P.plainObjects||P.allowPrototypes)||!e.call(Object.prototype,C))&&(x[C]=!0);else return[x,C];return x}if(!x||typeof x!="object")return[x].concat(C);var F=x;return t(x)&&!t(C)&&(F=o(x,P)),t(x)&&t(C)?(C.forEach(function(w,R){if(e.call(x,R)){var A=x[R];A&&typeof A=="object"&&w&&typeof w=="object"?x[R]=y(A,w,P):x.push(w)}else x[R]=w}),x):Object.keys(C).reduce(function(w,R){var A=C[R];return e.call(w,R)?w[R]=y(w[R],A,P):w[R]=A,w},F)},a=function(x,C){return Object.keys(C).reduce(function(P,F){return P[F]=C[F],P},x)},u=function(y,x,C){var P=y.replace(/\+/g," ");if(C==="iso-8859-1")return P.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(P)}catch{return P}},h=1024,l=function(x,C,P,F,w){if(x.length===0)return x;var R=x;if(typeof x=="symbol"?R=Symbol.prototype.toString.call(x):typeof x!="string"&&(R=String(x)),P==="iso-8859-1")return escape(R).replace(/%u[0-9a-f]{4}/gi,function(K){return"%26%23"+parseInt(K.slice(2),16)+"%3B"});for(var A="",H=0;H<R.length;H+=h){for(var O=R.length>=h?R.slice(H,H+h):R,N=[],G=0;G<O.length;++G){var B=O.charCodeAt(G);if(B===45||B===46||B===95||B===126||B>=48&&B<=57||B>=65&&B<=90||B>=97&&B<=122||w===i.RFC1738&&(B===40||B===41)){N[N.length]=O.charAt(G);continue}if(B<128){N[N.length]=r[B];continue}if(B<2048){N[N.length]=r[192|B>>6]+r[128|B&63];continue}if(B<55296||B>=57344){N[N.length]=r[224|B>>12]+r[128|B>>6&63]+r[128|B&63];continue}G+=1,B=65536+((B&1023)<<10|O.charCodeAt(G)&1023),N[N.length]=r[240|B>>18]+r[128|B>>12&63]+r[128|B>>6&63]+r[128|B&63]}A+=N.join("")}return A},f=function(x){for(var C=[{obj:{o:x},prop:"o"}],P=[],F=0;F<C.length;++F)for(var w=C[F],R=w.obj[w.prop],A=Object.keys(R),H=0;H<A.length;++H){var O=A[H],N=R[O];typeof N=="object"&&N!==null&&P.indexOf(N)===-1&&(C.push({obj:R,prop:O}),P.push(N))}return n(C),x},c=function(x){return Object.prototype.toString.call(x)==="[object RegExp]"},d=function(x){return!x||typeof x!="object"?!1:!!(x.constructor&&x.constructor.isBuffer&&x.constructor.isBuffer(x))},v=function(x,C){return[].concat(x,C)},m=function(x,C){if(t(x)){for(var P=[],F=0;F<x.length;F+=1)P.push(C(x[F]));return P}return C(x)};return Vo={arrayToObject:o,assign:a,combine:v,compact:f,decode:u,encode:l,isBuffer:d,isRegExp:c,maybeMap:m,merge:s},Vo}var zo,Ch;function Vv(){if(Ch)return zo;Ch=1;var i=Gv(),e=pf(),t=Ea(),r=Object.prototype.hasOwnProperty,n={brackets:function(y){return y+"[]"},comma:"comma",indices:function(y,x){return y+"["+x+"]"},repeat:function(y){return y}},o=Array.isArray,s=Array.prototype.push,a=function(m,y){s.apply(m,o(y)?y:[y])},u=Date.prototype.toISOString,h=t.default,l={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:h,formatter:t.formatters[h],indices:!1,serializeDate:function(y){return u.call(y)},skipNulls:!1,strictNullHandling:!1},f=function(y){return typeof y=="string"||typeof y=="number"||typeof y=="boolean"||typeof y=="symbol"||typeof y=="bigint"},c={},d=function m(y,x,C,P,F,w,R,A,H,O,N,G,B,K,Q,z,E,S){for(var p=y,g=S,_=0,b=!1;(g=g.get(c))!==void 0&&!b;){var T=g.get(y);if(_+=1,typeof T<"u"){if(T===_)throw new RangeError("Cyclic object value");b=!0}typeof g.get(c)>"u"&&(_=0)}if(typeof O=="function"?p=O(x,p):p instanceof Date?p=B(p):C==="comma"&&o(p)&&(p=e.maybeMap(p,function(et){return et instanceof Date?B(et):et})),p===null){if(w)return H&&!z?H(x,l.encoder,E,"key",K):x;p=""}if(f(p)||e.isBuffer(p)){if(H){var I=z?x:H(x,l.encoder,E,"key",K);return[Q(I)+"="+Q(H(p,l.encoder,E,"value",K))]}return[Q(x)+"="+Q(String(p))]}var L=[];if(typeof p>"u")return L;var M;if(C==="comma"&&o(p))z&&H&&(p=e.maybeMap(p,H)),M=[{value:p.length>0?p.join(",")||null:void 0}];else if(o(O))M=O;else{var D=Object.keys(p);M=N?D.sort(N):D}var U=A?String(x).replace(/\./g,"%2E"):String(x),j=P&&o(p)&&p.length===1?U+"[]":U;if(F&&o(p)&&p.length===0)return j+"[]";for(var q=0;q<M.length;++q){var V=M[q],$=typeof V=="object"&&V&&typeof V.value<"u"?V.value:p[V];if(!(R&&$===null)){var Y=G&&A?String(V).replace(/\./g,"%2E"):String(V),it=o(p)?typeof C=="function"?C(j,Y):j:j+(G?"."+Y:"["+Y+"]");S.set(y,_);var at=i();at.set(c,S),a(L,m($,it,C,P,F,w,R,A,C==="comma"&&z&&o(p)?null:H,O,N,G,B,K,Q,z,E,at))}}return L},v=function(y){if(!y)return l;if(typeof y.allowEmptyArrays<"u"&&typeof y.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof y.encodeDotInKeys<"u"&&typeof y.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(y.encoder!==null&&typeof y.encoder<"u"&&typeof y.encoder!="function")throw new TypeError("Encoder has to be a function.");var x=y.charset||l.charset;if(typeof y.charset<"u"&&y.charset!=="utf-8"&&y.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var C=t.default;if(typeof y.format<"u"){if(!r.call(t.formatters,y.format))throw new TypeError("Unknown format option provided.");C=y.format}var P=t.formatters[C],F=l.filter;(typeof y.filter=="function"||o(y.filter))&&(F=y.filter);var w;if(y.arrayFormat in n?w=y.arrayFormat:"indices"in y?w=y.indices?"indices":"repeat":w=l.arrayFormat,"commaRoundTrip"in y&&typeof y.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var R=typeof y.allowDots>"u"?y.encodeDotInKeys===!0?!0:l.allowDots:!!y.allowDots;return{addQueryPrefix:typeof y.addQueryPrefix=="boolean"?y.addQueryPrefix:l.addQueryPrefix,allowDots:R,allowEmptyArrays:typeof y.allowEmptyArrays=="boolean"?!!y.allowEmptyArrays:l.allowEmptyArrays,arrayFormat:w,charset:x,charsetSentinel:typeof y.charsetSentinel=="boolean"?y.charsetSentinel:l.charsetSentinel,commaRoundTrip:!!y.commaRoundTrip,delimiter:typeof y.delimiter>"u"?l.delimiter:y.delimiter,encode:typeof y.encode=="boolean"?y.encode:l.encode,encodeDotInKeys:typeof y.encodeDotInKeys=="boolean"?y.encodeDotInKeys:l.encodeDotInKeys,encoder:typeof y.encoder=="function"?y.encoder:l.encoder,encodeValuesOnly:typeof y.encodeValuesOnly=="boolean"?y.encodeValuesOnly:l.encodeValuesOnly,filter:F,format:C,formatter:P,serializeDate:typeof y.serializeDate=="function"?y.serializeDate:l.serializeDate,skipNulls:typeof y.skipNulls=="boolean"?y.skipNulls:l.skipNulls,sort:typeof y.sort=="function"?y.sort:null,strictNullHandling:typeof y.strictNullHandling=="boolean"?y.strictNullHandling:l.strictNullHandling}};return zo=function(m,y){var x=m,C=v(y),P,F;typeof C.filter=="function"?(F=C.filter,x=F("",x)):o(C.filter)&&(F=C.filter,P=F);var w=[];if(typeof x!="object"||x===null)return"";var R=n[C.arrayFormat],A=R==="comma"&&C.commaRoundTrip;P||(P=Object.keys(x)),C.sort&&P.sort(C.sort);for(var H=i(),O=0;O<P.length;++O){var N=P[O],G=x[N];C.skipNulls&&G===null||a(w,d(G,N,R,A,C.allowEmptyArrays,C.strictNullHandling,C.skipNulls,C.encodeDotInKeys,C.encode?C.encoder:null,C.filter,C.sort,C.allowDots,C.serializeDate,C.format,C.formatter,C.encodeValuesOnly,C.charset,H))}var B=w.join(C.delimiter),K=C.addQueryPrefix===!0?"?":"";return C.charsetSentinel&&(C.charset==="iso-8859-1"?K+="utf8=%26%2310003%3B&":K+="utf8=%E2%9C%93&"),B.length>0?K+B:""},zo}var jo,Oh;function zv(){if(Oh)return jo;Oh=1;var i=pf(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:i.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},n=function(c){return c.replace(/&#(\d+);/g,function(d,v){return String.fromCharCode(parseInt(v,10))})},o=function(c,d,v){if(c&&typeof c=="string"&&d.comma&&c.indexOf(",")>-1)return c.split(",");if(d.throwOnLimitExceeded&&v>=d.arrayLimit)throw new RangeError("Array limit exceeded. Only "+d.arrayLimit+" element"+(d.arrayLimit===1?"":"s")+" allowed in an array.");return c},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",u=function(d,v){var m={__proto__:null},y=v.ignoreQueryPrefix?d.replace(/^\?/,""):d;y=y.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var x=v.parameterLimit===1/0?void 0:v.parameterLimit,C=y.split(v.delimiter,v.throwOnLimitExceeded?x+1:x);if(v.throwOnLimitExceeded&&C.length>x)throw new RangeError("Parameter limit exceeded. Only "+x+" parameter"+(x===1?"":"s")+" allowed.");var P=-1,F,w=v.charset;if(v.charsetSentinel)for(F=0;F<C.length;++F)C[F].indexOf("utf8=")===0&&(C[F]===a?w="utf-8":C[F]===s&&(w="iso-8859-1"),P=F,F=C.length);for(F=0;F<C.length;++F)if(F!==P){var R=C[F],A=R.indexOf("]="),H=A===-1?R.indexOf("="):A+1,O,N;H===-1?(O=v.decoder(R,r.decoder,w,"key"),N=v.strictNullHandling?null:""):(O=v.decoder(R.slice(0,H),r.decoder,w,"key"),N=i.maybeMap(o(R.slice(H+1),v,t(m[O])?m[O].length:0),function(B){return v.decoder(B,r.decoder,w,"value")})),N&&v.interpretNumericEntities&&w==="iso-8859-1"&&(N=n(String(N))),R.indexOf("[]=")>-1&&(N=t(N)?[N]:N);var G=e.call(m,O);G&&v.duplicates==="combine"?m[O]=i.combine(m[O],N):(!G||v.duplicates==="last")&&(m[O]=N)}return m},h=function(c,d,v,m){var y=0;if(c.length>0&&c[c.length-1]==="[]"){var x=c.slice(0,-1).join("");y=Array.isArray(d)&&d[x]?d[x].length:0}for(var C=m?d:o(d,v,y),P=c.length-1;P>=0;--P){var F,w=c[P];if(w==="[]"&&v.parseArrays)F=v.allowEmptyArrays&&(C===""||v.strictNullHandling&&C===null)?[]:i.combine([],C);else{F=v.plainObjects?{__proto__:null}:{};var R=w.charAt(0)==="["&&w.charAt(w.length-1)==="]"?w.slice(1,-1):w,A=v.decodeDotInKeys?R.replace(/%2E/g,"."):R,H=parseInt(A,10);!v.parseArrays&&A===""?F={0:C}:!isNaN(H)&&w!==A&&String(H)===A&&H>=0&&v.parseArrays&&H<=v.arrayLimit?(F=[],F[H]=C):A!=="__proto__"&&(F[A]=C)}C=F}return C},l=function(d,v,m,y){if(d){var x=m.allowDots?d.replace(/\.([^.[]+)/g,"[$1]"):d,C=/(\[[^[\]]*])/,P=/(\[[^[\]]*])/g,F=m.depth>0&&C.exec(x),w=F?x.slice(0,F.index):x,R=[];if(w){if(!m.plainObjects&&e.call(Object.prototype,w)&&!m.allowPrototypes)return;R.push(w)}for(var A=0;m.depth>0&&(F=P.exec(x))!==null&&A<m.depth;){if(A+=1,!m.plainObjects&&e.call(Object.prototype,F[1].slice(1,-1))&&!m.allowPrototypes)return;R.push(F[1])}if(F){if(m.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+m.depth+" and strictDepth is true");R.push("["+x.slice(F.index)+"]")}return h(R,v,m,y)}},f=function(d){if(!d)return r;if(typeof d.allowEmptyArrays<"u"&&typeof d.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof d.decodeDotInKeys<"u"&&typeof d.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(d.decoder!==null&&typeof d.decoder<"u"&&typeof d.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof d.charset<"u"&&d.charset!=="utf-8"&&d.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof d.throwOnLimitExceeded<"u"&&typeof d.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var v=typeof d.charset>"u"?r.charset:d.charset,m=typeof d.duplicates>"u"?r.duplicates:d.duplicates;if(m!=="combine"&&m!=="first"&&m!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var y=typeof d.allowDots>"u"?d.decodeDotInKeys===!0?!0:r.allowDots:!!d.allowDots;return{allowDots:y,allowEmptyArrays:typeof d.allowEmptyArrays=="boolean"?!!d.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof d.allowPrototypes=="boolean"?d.allowPrototypes:r.allowPrototypes,allowSparse:typeof d.allowSparse=="boolean"?d.allowSparse:r.allowSparse,arrayLimit:typeof d.arrayLimit=="number"?d.arrayLimit:r.arrayLimit,charset:v,charsetSentinel:typeof d.charsetSentinel=="boolean"?d.charsetSentinel:r.charsetSentinel,comma:typeof d.comma=="boolean"?d.comma:r.comma,decodeDotInKeys:typeof d.decodeDotInKeys=="boolean"?d.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof d.decoder=="function"?d.decoder:r.decoder,delimiter:typeof d.delimiter=="string"||i.isRegExp(d.delimiter)?d.delimiter:r.delimiter,depth:typeof d.depth=="number"||d.depth===!1?+d.depth:r.depth,duplicates:m,ignoreQueryPrefix:d.ignoreQueryPrefix===!0,interpretNumericEntities:typeof d.interpretNumericEntities=="boolean"?d.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof d.parameterLimit=="number"?d.parameterLimit:r.parameterLimit,parseArrays:d.parseArrays!==!1,plainObjects:typeof d.plainObjects=="boolean"?d.plainObjects:r.plainObjects,strictDepth:typeof d.strictDepth=="boolean"?!!d.strictDepth:r.strictDepth,strictNullHandling:typeof d.strictNullHandling=="boolean"?d.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof d.throwOnLimitExceeded=="boolean"?d.throwOnLimitExceeded:!1}};return jo=function(c,d){var v=f(d);if(c===""||c===null||typeof c>"u")return v.plainObjects?{__proto__:null}:{};for(var m=typeof c=="string"?u(c,v):c,y=v.plainObjects?{__proto__:null}:{},x=Object.keys(m),C=0;C<x.length;++C){var P=x[C],F=l(P,m[P],v,typeof c=="string");y=i.merge(y,F,v)}return v.allowSparse===!0?y:i.compact(y)},jo}var Yo,Rh;function jv(){if(Rh)return Yo;Rh=1;var i=Vv(),e=zv(),t=Ea();return Yo={formats:t,parse:e,stringify:i},Yo}var Lh;function Yv(){if(Lh)return De;Lh=1;var i=cv();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,n=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),u=["%","/","?",";","#"].concat(a),h=["/","?","#"],l=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,c=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=jv();function x(w,R,A){if(w&&typeof w=="object"&&w instanceof e)return w;var H=new e;return H.parse(w,R,A),H}e.prototype.parse=function(w,R,A){if(typeof w!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof w);var H=w.indexOf("?"),O=H!==-1&&H<w.indexOf("#")?"?":"#",N=w.split(O),G=/\\/g;N[0]=N[0].replace(G,"/"),w=N.join(O);var B=w;if(B=B.trim(),!A&&w.split("#").length===1){var K=n.exec(B);if(K)return this.path=B,this.href=B,this.pathname=K[1],K[2]?(this.search=K[2],R?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):R&&(this.search="",this.query={}),this}var Q=t.exec(B);if(Q){Q=Q[0];var z=Q.toLowerCase();this.protocol=z,B=B.substr(Q.length)}if(A||Q||B.match(/^\/\/[^@/]+@[^@/]+/)){var E=B.substr(0,2)==="//";E&&!(Q&&v[Q])&&(B=B.substr(2),this.slashes=!0)}if(!v[Q]&&(E||Q&&!m[Q])){for(var S=-1,p=0;p<h.length;p++){var g=B.indexOf(h[p]);g!==-1&&(S===-1||g<S)&&(S=g)}var _,b;S===-1?b=B.lastIndexOf("@"):b=B.lastIndexOf("@",S),b!==-1&&(_=B.slice(0,b),B=B.slice(b+1),this.auth=decodeURIComponent(_)),S=-1;for(var p=0;p<u.length;p++){var g=B.indexOf(u[p]);g!==-1&&(S===-1||g<S)&&(S=g)}S===-1&&(S=B.length),this.host=B.slice(0,S),B=B.slice(S),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var I=this.hostname.split(/\./),p=0,L=I.length;p<L;p++){var M=I[p];if(M&&!M.match(f)){for(var D="",U=0,j=M.length;U<j;U++)M.charCodeAt(U)>127?D+="x":D+=M[U];if(!D.match(f)){var q=I.slice(0,p),V=I.slice(p+1),$=M.match(c);$&&(q.push($[1]),V.unshift($[2])),V.length&&(B="/"+V.join(".")+B),this.hostname=q.join(".");break}}}this.hostname.length>l?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=i.toASCII(this.hostname));var Y=this.port?":"+this.port:"",it=this.hostname||"";this.host=it+Y,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),B[0]!=="/"&&(B="/"+B))}if(!d[z])for(var p=0,L=a.length;p<L;p++){var at=a[p];if(B.indexOf(at)!==-1){var et=encodeURIComponent(at);et===at&&(et=escape(at)),B=B.split(at).join(et)}}var rt=B.indexOf("#");rt!==-1&&(this.hash=B.substr(rt),B=B.slice(0,rt));var mt=B.indexOf("?");if(mt!==-1?(this.search=B.substr(mt),this.query=B.substr(mt+1),R&&(this.query=y.parse(this.query)),B=B.slice(0,mt)):R&&(this.search="",this.query={}),B&&(this.pathname=B),m[z]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Y=this.pathname||"",yt=this.search||"";this.path=Y+yt}return this.href=this.format(),this};function C(w){return typeof w=="string"&&(w=x(w)),w instanceof e?w.format():e.prototype.format.call(w)}e.prototype.format=function(){var w=this.auth||"";w&&(w=encodeURIComponent(w),w=w.replace(/%3A/i,":"),w+="@");var R=this.protocol||"",A=this.pathname||"",H=this.hash||"",O=!1,N="";this.host?O=w+this.host:this.hostname&&(O=w+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(O+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(N=y.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var G=this.search||N&&"?"+N||"";return R&&R.substr(-1)!==":"&&(R+=":"),this.slashes||(!R||m[R])&&O!==!1?(O="//"+(O||""),A&&A.charAt(0)!=="/"&&(A="/"+A)):O||(O=""),H&&H.charAt(0)!=="#"&&(H="#"+H),G&&G.charAt(0)!=="?"&&(G="?"+G),A=A.replace(/[?#]/g,function(B){return encodeURIComponent(B)}),G=G.replace("#","%23"),R+O+A+G+H};function P(w,R){return x(w,!1,!0).resolve(R)}e.prototype.resolve=function(w){return this.resolveObject(x(w,!1,!0)).format()};function F(w,R){return w?x(w,!1,!0).resolveObject(R):R}return e.prototype.resolveObject=function(w){if(typeof w=="string"){var R=new e;R.parse(w,!1,!0),w=R}for(var A=new e,H=Object.keys(this),O=0;O<H.length;O++){var N=H[O];A[N]=this[N]}if(A.hash=w.hash,w.href==="")return A.href=A.format(),A;if(w.slashes&&!w.protocol){for(var G=Object.keys(w),B=0;B<G.length;B++){var K=G[B];K!=="protocol"&&(A[K]=w[K])}return m[A.protocol]&&A.hostname&&!A.pathname&&(A.pathname="/",A.path=A.pathname),A.href=A.format(),A}if(w.protocol&&w.protocol!==A.protocol){if(!m[w.protocol]){for(var Q=Object.keys(w),z=0;z<Q.length;z++){var E=Q[z];A[E]=w[E]}return A.href=A.format(),A}if(A.protocol=w.protocol,!w.host&&!v[w.protocol]){for(var L=(w.pathname||"").split("/");L.length&&!(w.host=L.shift()););w.host||(w.host=""),w.hostname||(w.hostname=""),L[0]!==""&&L.unshift(""),L.length<2&&L.unshift(""),A.pathname=L.join("/")}else A.pathname=w.pathname;if(A.search=w.search,A.query=w.query,A.host=w.host||"",A.auth=w.auth,A.hostname=w.hostname||w.host,A.port=w.port,A.pathname||A.search){var S=A.pathname||"",p=A.search||"";A.path=S+p}return A.slashes=A.slashes||w.slashes,A.href=A.format(),A}var g=A.pathname&&A.pathname.charAt(0)==="/",_=w.host||w.pathname&&w.pathname.charAt(0)==="/",b=_||g||A.host&&w.pathname,T=b,I=A.pathname&&A.pathname.split("/")||[],L=w.pathname&&w.pathname.split("/")||[],M=A.protocol&&!m[A.protocol];if(M&&(A.hostname="",A.port=null,A.host&&(I[0]===""?I[0]=A.host:I.unshift(A.host)),A.host="",w.protocol&&(w.hostname=null,w.port=null,w.host&&(L[0]===""?L[0]=w.host:L.unshift(w.host)),w.host=null),b=b&&(L[0]===""||I[0]==="")),_)A.host=w.host||w.host===""?w.host:A.host,A.hostname=w.hostname||w.hostname===""?w.hostname:A.hostname,A.search=w.search,A.query=w.query,I=L;else if(L.length)I||(I=[]),I.pop(),I=I.concat(L),A.search=w.search,A.query=w.query;else if(w.search!=null){if(M){A.host=I.shift(),A.hostname=A.host;var D=A.host&&A.host.indexOf("@")>0?A.host.split("@"):!1;D&&(A.auth=D.shift(),A.hostname=D.shift(),A.host=A.hostname)}return A.search=w.search,A.query=w.query,(A.pathname!==null||A.search!==null)&&(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.href=A.format(),A}if(!I.length)return A.pathname=null,A.search?A.path="/"+A.search:A.path=null,A.href=A.format(),A;for(var U=I.slice(-1)[0],j=(A.host||w.host||I.length>1)&&(U==="."||U==="..")||U==="",q=0,V=I.length;V>=0;V--)U=I[V],U==="."?I.splice(V,1):U===".."?(I.splice(V,1),q++):q&&(I.splice(V,1),q--);if(!b&&!T)for(;q--;q)I.unshift("..");b&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),j&&I.join("/").substr(-1)!=="/"&&I.push("");var $=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(M){A.hostname=$?"":I.length?I.shift():"",A.host=A.hostname;var D=A.host&&A.host.indexOf("@")>0?A.host.split("@"):!1;D&&(A.auth=D.shift(),A.hostname=D.shift(),A.host=A.hostname)}return b=b||A.host&&I.length,b&&!$&&I.unshift(""),I.length>0?A.pathname=I.join("/"):(A.pathname=null,A.path=null),(A.pathname!==null||A.search!==null)&&(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.auth=w.auth||A.auth,A.slashes=A.slashes||w.slashes,A.href=A.format(),A},e.prototype.parseHost=function(){var w=this.host,R=r.exec(w);R&&(R=R[0],R!==":"&&(this.port=R.substr(1)),w=w.substr(0,w.length-R.length)),w&&(this.hostname=w)},De.parse=x,De.resolve=P,De.resolveObject=F,De.format=C,De.Url=e,De}var vf=Yv();const yf=Lr(vf);/*!
 * @pixi/constants - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ue;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(ue||(ue={}));var br;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(br||(br={}));var oi;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})(oi||(oi={}));var ot;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(ot||(ot={}));var zt;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(zt||(zt={}));var wr;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(wr||(wr={}));var Re;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Re||(Re={}));var At;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(At||(At={}));var ne;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(ne||(ne={}));var se;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(se||(se={}));var Tr;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"})(Tr||(Tr={}));var be;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(be||(be={}));var Qt;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(Qt||(Qt={}));var cn;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(cn||(cn={}));var oe;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(oe||(oe={}));var Bt;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"})(Bt||(Bt={}));var Ze;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(Ze||(Ze={}));/*!
 * @pixi/utils - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */nt.RETINA_PREFIX=/@([0-9\.]+)x/;nt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var _s=!1,Mh="5.3.12";function qv(){_s=!0}function mf(i){var e;if(!_s){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+Mh+" -  "+i+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,t)}else window.console&&window.console.log("PixiJS "+Mh+" - "+i+" - http://www.pixijs.com/");_s=!0}}var qo;function gf(){return typeof qo>"u"&&(qo=(function(){var e={stencil:!0,failIfMajorPerformanceCaveat:nt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!!(r&&r.getContextAttributes().stencil);if(r){var o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,n}catch{return!1}})()),qo}function Je(i,e){return e===void 0&&(e=[]),e[0]=(i>>16&255)/255,e[1]=(i>>8&255)/255,e[2]=(i&255)/255,e}function Ia(i){var e=i.toString(16);return e="000000".substr(0,6-e.length)+e,"#"+e}function Pa(i){return typeof i=="string"&&i[0]==="#"&&(i=i.substr(1)),parseInt(i,16)}function Wv(i){return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)}function $v(){for(var i=[],e=[],t=0;t<32;t++)i[t]=t,e[t]=t;i[ot.NORMAL_NPM]=ot.NORMAL,i[ot.ADD_NPM]=ot.ADD,i[ot.SCREEN_NPM]=ot.SCREEN,e[ot.NORMAL]=ot.NORMAL_NPM,e[ot.ADD]=ot.ADD_NPM,e[ot.SCREEN]=ot.SCREEN_NPM;var r=[];return r.push(e),r.push(i),r}var Aa=$v();function Sa(i,e){return Aa[e?1:0][i]}function _f(i,e,t,r){return t=t||new Float32Array(4),r||r===void 0?(t[0]=i[0]*e,t[1]=i[1]*e,t[2]=i[2]*e):(t[0]=i[0],t[1]=i[1],t[2]=i[2]),t[3]=e,t}function An(i,e){if(e===1)return(e*255<<24)+i;if(e===0)return 0;var t=i>>16&255,r=i>>8&255,n=i&255;return t=t*e+.5|0,r=r*e+.5|0,n=n*e+.5|0,(e*255<<24)+(t<<16)+(r<<8)+n}function Ca(i,e,t,r){return t=t||new Float32Array(4),t[0]=(i>>16&255)/255,t[1]=(i>>8&255)/255,t[2]=(i&255)/255,(r||r===void 0)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function Oa(i,e){e===void 0&&(e=null);var t=i*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var r=0,n=0;r<t;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function xf(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}var Kv={Float32Array,Uint32Array,Int32Array,Uint8Array};function Zv(i,e){for(var t=0,r=0,n={},o=0;o<i.length;o++)r+=e[o],t+=i[o].length;for(var s=new ArrayBuffer(t*4),a=null,u=0,o=0;o<i.length;o++){var h=e[o],l=i[o],f=xf(l);n[f]||(n[f]=new Kv[f](s)),a=n[f];for(var c=0;c<l.length;c++){var d=(c/h|0)*r+u,v=c%h;a[d+v]=l[c]}u+=h}return new Float32Array(s)}function si(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function xs(i){return!(i&i-1)&&!!i}function bs(i){var e=(i>65535?1:0)<<4;i>>>=e;var t=(i>255?1:0)<<3;return i>>>=t,e|=t,t=(i>15?1:0)<<2,i>>>=t,e|=t,t=(i>3?1:0)<<1,i>>>=t,e|=t,e|i>>1}function $e(i,e,t){var r=i.length,n;if(!(e>=r||t===0)){t=e+t>r?r-e:t;var o=r-t;for(n=e;n<o;++n)i[n]=i[n+t];i.length=o}}function Ye(i){return i===0?0:i<0?-1:1}var Jv=0;function Qe(){return++Jv}var Fh={};function W(i,e,t){if(t===void 0&&(t=3),!Fh[e]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+i):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+i),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+i),console.warn(r))),Fh[e]=!0}}var ws={},Dt=Object.create(null),qt=Object.create(null);function Qv(){var i;for(i in Dt)Dt[i].destroy();for(i in qt)qt[i].destroy()}function ty(){var i;for(i in Dt)delete Dt[i];for(i in qt)delete qt[i]}var Ts=(function(){function i(e,t,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||nt.RESOLUTION,this.resize(e,t)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:!1,configurable:!0}),i})();function bf(i){var e=i.width,t=i.height,r=i.getContext("2d"),n=r.getImageData(0,0,e,t),o=n.data,s=o.length,a={top:null,left:null,right:null,bottom:null},u=null,h,l,f;for(h=0;h<s;h+=4)o[h+3]!==0&&(l=h/4%e,f=~~(h/4/e),a.top===null&&(a.top=f),(a.left===null||l<a.left)&&(a.left=l),(a.right===null||a.right<l)&&(a.right=l+1),(a.bottom===null||a.bottom<f)&&(a.bottom=f));return a.top!==null&&(e=a.right-a.left,t=a.bottom-a.top+1,u=r.getImageData(a.left,a.top,e,t)),{height:t,width:e,data:u}}var wf=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function ey(i){var e=wf.exec(i);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var Si;function Tf(i,e){if(e===void 0&&(e=window.location),i.indexOf("data:")===0)return"";e=e||window.location,Si||(Si=document.createElement("a")),Si.href=i;var t=vf.parse(Si.href),r=!t.port&&e.port===""||t.port===e.port;return t.hostname!==e.hostname||!r||t.protocol!==e.protocol?"anonymous":""}function ai(i,e){var t=nt.RETINA_PREFIX.exec(i);return t?parseFloat(t[1]):e!==void 0?e:1}const ry=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:qt,CanvasRenderTarget:Ts,DATA_URI:wf,EventEmitter:Mr,ProgramCache:ws,TextureCache:Dt,clearTextureCache:ty,correctBlendMode:Sa,createIndicesForQuads:Oa,decomposeDataUri:ey,deprecation:W,destroyTextureCache:Qv,determineCrossOrigin:Tf,earcut:ba,getBufferType:xf,getResolutionOfUrl:ai,hex2rgb:Je,hex2string:Ia,interleaveTypedArrays:Zv,isMobile:$t,isPow2:xs,isWebGLSupported:gf,log2:bs,nextPow2:si,premultiplyBlendMode:Aa,premultiplyRgba:_f,premultiplyTint:An,premultiplyTintToRgba:Ca,removeItems:$e,rgb2hex:Wv,sayHello:mf,sign:Ye,skipHello:qv,string2hex:Pa,trimCanvas:bf,uid:Qe,url:yf},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Er=Math.PI*2,Ef=180/Math.PI,If=Math.PI/180,Tt;(function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"})(Tt||(Tt={}));var dt=(function(){function i(e,t,r,n){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=Tt.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},i.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},i.prototype.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},i.prototype.pad=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this},i.prototype.fit=function(e){var t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(o-n,0),this},i.prototype.ceil=function(e,t){e===void 0&&(e=1),t===void 0&&(t=.001);var r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this},i.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=o-n,this},i})(),Pf=(function(){function i(e,t,r){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),this.x=e,this.y=t,this.radius=r,this.type=Tt.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-e,o=this.y-t;return n*=n,o*=o,n+o<=r},i.prototype.getBounds=function(){return new dt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},i})(),Af=(function(){function i(e,t,r,n){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=e,this.y=t,this.width=r,this.height=n,this.type=Tt.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,r+n<=1},i.prototype.getBounds=function(){return new dt(this.x-this.width,this.y-this.height,this.width,this.height)},i})(),gr=(function(){function i(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){for(var o=[],s=0,a=n.length;s<a;s++)o.push(n[s].x,n[s].y);n=o}this.points=n,this.type=Tt.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var e=this.points.slice(),t=new i(e);return t.closeStroke=this.closeStroke,t},i.prototype.contains=function(e,t){for(var r=!1,n=this.points.length/2,o=0,s=n-1;o<n;s=o++){var a=this.points[o*2],u=this.points[o*2+1],h=this.points[s*2],l=this.points[s*2+1],f=u>t!=l>t&&e<(h-a)*((t-u)/(l-u))+a;f&&(r=!r)}return r},i})(),Sf=(function(){function i(e,t,r,n,o){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),o===void 0&&(o=20),this.x=e,this.y=t,this.width=r,this.height=n,this.radius=o,this.type=Tt.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),n=t-(this.y+this.radius),o=this.radius*this.radius;if(r*r+n*n<=o||(r=e-(this.x+this.width-this.radius),r*r+n*n<=o)||(n=t-(this.y+this.height-this.radius),r*r+n*n<=o)||(r=e-(this.x+this.radius),r*r+n*n<=o))return!0}return!1},i})(),Rt=(function(){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=e,this.y=t}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},i.prototype.copyTo=function(e){return e.set(this.x,this.y),e},i.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},i.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this},i})(),qe=(function(){function i(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0),this._x=r,this._y=n,this.cb=e,this.scope=t}return i.prototype.clone=function(e,t){return e===void 0&&(e=this.cb),t===void 0&&(t=this.scope),new i(e,t,this._x,this._y)},i.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(e){return e.set(this._x,this._y),e},i.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i})(),Et=(function(){function i(e,t,r,n,o,s){e===void 0&&(e=1),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=1),o===void 0&&(o=0),s===void 0&&(s=0),this.array=null,this.a=e,this.b=t,this.c=r,this.d=n,this.tx=o,this.ty=s}return i.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},i.prototype.set=function(e,t,r,n,o,s){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=o,this.ty=s,this},i.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},i.prototype.apply=function(e,t){t=t||new Rt;var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t},i.prototype.applyInverse=function(e,t){t=t||new Rt;var r=1/(this.a*this.d+this.c*-this.b),n=e.x,o=e.y;return t.x=this.d*r*n+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*o+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t},i.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},i.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},i.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,o=this.c,s=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=o*t-this.d*r,this.d=o*r+this.d*t,this.tx=s*t-this.ty*r,this.ty=s*r+this.ty*t,this},i.prototype.append=function(e){var t=this.a,r=this.b,n=this.c,o=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*o,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*o,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*o+this.ty,this},i.prototype.setTransform=function(e,t,r,n,o,s,a,u,h){return this.a=Math.cos(a+h)*o,this.b=Math.sin(a+h)*o,this.c=-Math.sin(a-u)*s,this.d=Math.cos(a-u)*s,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this},i.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},i.prototype.decompose=function(e){var t=this.a,r=this.b,n=this.c,o=this.d,s=-Math.atan2(-n,o),a=Math.atan2(r,t),u=Math.abs(s+a);return u<1e-5||Math.abs(Er-u)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=a),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+o*o),e.position.x=this.tx,e.position.y=this.ty,e},i.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,n=this.d,o=this.tx,s=e*n-t*r;return this.a=n/s,this.b=-t/s,this.c=-r/s,this.d=e/s,this.tx=(r*this.ty-n*o)/s,this.ty=-(e*this.ty-t*o)/s,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var e=new i;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i})(),Ge=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ve=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ze=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],je=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Es=[],Cf=[],Ci=Math.sign;function iy(){for(var i=0;i<16;i++){var e=[];Es.push(e);for(var t=0;t<16;t++)for(var r=Ci(Ge[i]*Ge[t]+ze[i]*Ve[t]),n=Ci(Ve[i]*Ge[t]+je[i]*Ve[t]),o=Ci(Ge[i]*ze[t]+ze[i]*je[t]),s=Ci(Ve[i]*ze[t]+je[i]*je[t]),a=0;a<16;a++)if(Ge[a]===r&&Ve[a]===n&&ze[a]===o&&je[a]===s){e.push(a);break}}for(var i=0;i<16;i++){var u=new Et;u.set(Ge[i],Ve[i],ze[i],je[i],0,0),Cf.push(u)}}iy();var wt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return Ge[i]},uY:function(i){return Ve[i]},vX:function(i){return ze[i]},vY:function(i){return je[i]},inv:function(i){return i&8?i&15:-i&7},add:function(i,e){return Es[i][e]},sub:function(i,e){return Es[i][wt.inv(e)]},rotate180:function(i){return i^4},isVertical:function(i){return(i&3)===2},byDirection:function(i,e){return Math.abs(i)*2<=Math.abs(e)?e>=0?wt.S:wt.N:Math.abs(e)*2<=Math.abs(i)?i>0?wt.E:wt.W:e>0?i>0?wt.SE:wt.SW:i>0?wt.NE:wt.NW},matrixAppendRotationInv:function(i,e,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=Cf[wt.inv(e)];n.tx=t,n.ty=r,i.append(n)}},Ra=(function(){function i(){this.worldTransform=new Et,this.localTransform=new Et,this.position=new qe(this.onChange,this,0,0),this.scale=new qe(this.onChange,this,1,1),this.pivot=new qe(this.onChange,this,0,0),this.skew=new qe(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},i.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i})();/*!
 * @pixi/display - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */nt.SORTABLE_CHILDREN=!1;var ui=(function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?dt.EMPTY:(e=e||new dt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},i.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},i.prototype.addQuad=function(e){var t=this.minX,r=this.minY,n=this.maxX,o=this.maxY,s=e[0],a=e[1];t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,s=e[2],a=e[3],t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,s=e[4],a=e[5],t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,s=e[6],a=e[7],t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,this.minX=t,this.minY=r,this.maxX=n,this.maxY=o},i.prototype.addFrame=function(e,t,r,n,o){this.addFrameMatrix(e.worldTransform,t,r,n,o)},i.prototype.addFrameMatrix=function(e,t,r,n,o){var s=e.a,a=e.b,u=e.c,h=e.d,l=e.tx,f=e.ty,c=this.minX,d=this.minY,v=this.maxX,m=this.maxY,y=s*t+u*r+l,x=a*t+h*r+f;c=y<c?y:c,d=x<d?x:d,v=y>v?y:v,m=x>m?x:m,y=s*n+u*r+l,x=a*n+h*r+f,c=y<c?y:c,d=x<d?x:d,v=y>v?y:v,m=x>m?x:m,y=s*t+u*o+l,x=a*t+h*o+f,c=y<c?y:c,d=x<d?x:d,v=y>v?y:v,m=x>m?x:m,y=s*n+u*o+l,x=a*n+h*o+f,c=y<c?y:c,d=x<d?x:d,v=y>v?y:v,m=x>m?x:m,this.minX=c,this.minY=d,this.maxX=v,this.maxY=m},i.prototype.addVertexData=function(e,t,r){for(var n=this.minX,o=this.minY,s=this.maxX,a=this.maxY,u=t;u<r;u+=2){var h=e[u],l=e[u+1];n=h<n?h:n,o=l<o?l:o,s=h>s?h:s,a=l>a?l:a}this.minX=n,this.minY=o,this.maxX=s,this.maxY=a},i.prototype.addVertices=function(e,t,r,n){this.addVerticesMatrix(e.worldTransform,t,r,n)},i.prototype.addVerticesMatrix=function(e,t,r,n,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=e.a,u=e.b,h=e.c,l=e.d,f=e.tx,c=e.ty,d=this.minX,v=this.minY,m=this.maxX,y=this.maxY,x=r;x<n;x+=2){var C=t[x],P=t[x+1],F=a*C+h*P+f,w=l*P+u*C+c;d=Math.min(d,F-o),m=Math.max(m,F+o),v=Math.min(v,w-s),y=Math.max(y,w+s)}this.minX=d,this.minY=v,this.maxX=m,this.maxY=y},i.prototype.addBounds=function(e){var t=this.minX,r=this.minY,n=this.maxX,o=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>o?e.maxY:o},i.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,o=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=o&&n<=s){var a=this.minX,u=this.minY,h=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<u?n:u,this.maxX=o>h?o:h,this.maxY=s>l?s:l}},i.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},i.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=o&&n<=s){var a=this.minX,u=this.minY,h=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<u?n:u,this.maxX=o>h?o:h,this.maxY=s>l?s:l}},i.prototype.pad=function(e,t){e===void 0&&(e=0),t===void 0&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},i.prototype.addFramePad=function(e,t,r,n,o,s){e-=o,t-=s,r+=o,n+=s,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n},i})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Is=function(i,e){return Is=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Is(i,e)};function La(i,e){Is(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ct=(function(i){La(e,i);function e(){var t=i.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Ra,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new ui,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return e.mixin=function(t){for(var r=Object.keys(t),n=0;n<r.length;++n){var o=r[n];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new dt),r=this._boundsRect),this._bounds.getRectangle(r)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new dt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ui);var r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=n,this.transform=r,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(t,r,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},e.prototype.toLocal=function(t,r,n,o){return r&&(t=r.toGlobal(t,n,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,r,n,o,s,a,u,h,l){return t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),this.position.x=t,this.position.y=r,this.scale.x=n||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=u,this.pivot.x=h,this.pivot.y=l,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Ma),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Ef},set:function(t){this.transform.rotation=t*If},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!0,r.isMask=!1}if(this._mask=t,this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!1,r.isMask=!0}},enumerable:!1,configurable:!0}),e})(Mr),Ma=(function(i){La(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.sortDirty=null,t}return e})(Ct);Ct.prototype.displayObjectUpdateTransform=Ct.prototype.updateTransform;function ny(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}var Ut=(function(i){La(e,i);function e(){var t=i.call(this)||this;return t.children=[],t.sortableChildren=nt.SORTABLE_CHILDREN,t.sortDirty=!1,t}return e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length>1)for(var o=0;o<r.length;o++)this.addChild(r[o]);else{var s=r[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return r[0]},e.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},e.prototype.swapChildren=function(t,r){if(t!==r){var n=this.getChildIndex(t),o=this.getChildIndex(r);this.children[n]=r,this.children[o]=t,this.onChildrenChange(n<o?n:o)}},e.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},e.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);$e(this.children,n,1),this.children.splice(r,0,t),this.onChildrenChange(r)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length>1)for(var o=0;o<r.length;o++)this.removeChild(r[o]);else{var s=r[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,$e(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return r[0]},e.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,$e(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},e.prototype.removeChildren=function(t,r){t===void 0&&(t=0),r===void 0&&(r=this.children.length);var n=t,o=r,s=o-n,a;if(s>0&&s<=o){a=this.children.splice(n,s);for(var u=0;u<a.length;++u)a[u].parent=null,a[u].transform&&(a[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var u=0;u<a.length;++u)a[u].emit("removed",this),this.emit("childRemoved",a[u],this,u);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,r=0,n=this.children.length;r<n;++r){var o=this.children[r];o._lastSortedIndex=r,!t&&o.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(ny),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var n=r._mask.maskObject||r._mask;n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,r){r===void 0&&(r=!1);var n=i.prototype.getLocalBounds.call(this,t);if(!r)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var r=0,n=this.children.length;r<n;++r)this.children[r].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<r.length;o++)r[o].enabled&&this._enabledFilters.push(r[o]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._render(t);for(var o=0,s=this.children.length;o<s;o++)this.children[o].render(t);t.batch.flush(),n&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){i.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof t=="boolean"?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var o=0;o<n.length;++o)n[o].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;r!==0?this.scale.x=t/r:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;r!==0?this.scale.y=t/r:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),e})(Ct);Ut.prototype.containerUpdateTransform=Ut.prototype.updateTransform;/*!
 * @pixi/accessibility - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Of={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ct.mixin(Of);var oy=9,Oi=100,sy=0,ay=0,Nh=2,Bh=1,uy=-1e3,hy=-1e3,ly=2,Rf=(function(){function i(e){this._hookDiv=null,($t.tablet||$t.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=Oi+"px",t.style.height=Oi+"px",t.style.position="absolute",t.style.top=sy+"px",t.style.left=ay+"px",t.style.zIndex=Nh.toString(),this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=Bh+"px",t.style.height=Bh+"px",t.style.position="absolute",t.style.top=uy+"px",t.style.left=hy+"px",t.style.zIndex=ly.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessability for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},i.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},i.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},i.prototype.update=function(){var e=performance.now();if(!($t.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),r=this.renderer.resolution,n=t.width/this.renderer.width*r,o=t.height/this.renderer.height*r,s=this.div;s.style.left=t.left+"px",s.style.top=t.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var a=0;a<this.children.length;a++){var u=this.children[a];if(u.renderId!==this.renderId)u._accessibleActive=!1,$e(this.children,a,1),this.div.removeChild(u._accessibleDiv),this.pool.push(u._accessibleDiv),u._accessibleDiv=null,a--;else{s=u._accessibleDiv;var h=u.hitArea,l=u.worldTransform;u.hitArea?(s.style.left=(l.tx+h.x*l.a)*n+"px",s.style.top=(l.ty+h.y*l.d)*o+"px",s.style.width=h.width*l.a*n+"px",s.style.height=h.height*l.d*o+"px"):(h=u.getBounds(),this.capHitArea(h),s.style.left=h.x*n+"px",s.style.top=h.y*o+"px",s.style.width=h.width*n+"px",s.style.height=h.height*o+"px",s.title!==u.accessibleTitle&&u.accessibleTitle!==null&&(s.title=u.accessibleTitle),s.getAttribute("aria-label")!==u.accessibleHint&&u.accessibleHint!==null&&s.setAttribute("aria-label",u.accessibleHint)),(u.accessibleTitle!==s.title||u.tabIndex!==s.tabIndex)&&(s.title=u.accessibleTitle,s.tabIndex=u.tabIndex,this.debug&&this.updateDebugHTML(s))}}this.renderId++}},i.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},i.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},i.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=Oi+"px",t.style.height=Oi+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Nh.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},i.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData),t.dispatchEvent(e.target.displayObject,"pointertap",t.eventData),t.dispatchEvent(e.target.displayObject,"tap",t.eventData)},i.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},i.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},i.prototype._onKeyDown=function(e){e.keyCode===oy&&this.activate()},i.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i})();/*!
 * @pixi/ticker - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */nt.TARGET_FPMS=.06;var he;(function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"})(he||(he={}));var Wo=(function(){function i(e,t,r,n){t===void 0&&(t=null),r===void 0&&(r=0),n===void 0&&(n=!1),this.fn=e,this.context=t,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return i.prototype.match=function(e,t){return t===void 0&&(t=null),this.fn===e&&this.context===t},i.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},i.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},i.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},i})(),Ot=(function(){function i(){var e=this;this._head=new Wo(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/nt.TARGET_FPMS,this.elapsedMS=1/nt.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return i.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(e,t,r){return r===void 0&&(r=he.NORMAL),this._addListener(new Wo(e,t,r))},i.prototype.addOnce=function(e,t,r){return r===void 0&&(r=he.NORMAL),this._addListener(new Wo(e,t,r,!0))},i.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this},i.prototype.remove=function(e,t){for(var r=this._head.next;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(e){e===void 0&&(e=performance.now());var t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*nt.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,nt.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var e=i._shared=new i;e.autoStart=!0,e._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var e=i._system=new i;e.autoStart=!0,e._protected=!0}return i._system},enumerable:!1,configurable:!0}),i})(),Lf=(function(){function i(){}return i.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,he.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ot.shared:new Ot,e.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},i})();/*!
 * @pixi/interaction - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ps=(function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Rt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},i.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var As=function(i,e){return As=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},As(i,e)};function fy(i,e){As(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mf=(function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i})(),zi=(function(){function i(e){this._pointerId=e,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(e,t){t?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return(this._flags&i.FLAGS.OVER)!==0},set:function(e){this._doSet(i.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return(this._flags&i.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(i.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return(this._flags&i.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(i.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i})(),cy=(function(){function i(){this._tempPoint=new Rt}return i.prototype.recursiveFindHit=function(e,t,r,n,o){if(!t||!t.visible)return!1;var s=e.data.global;o=t.interactive||o;var a=!1,u=o,h=!0;if(t.hitArea?(n&&(t.worldTransform.applyInverse(s,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,h=!1)),u=!1):t._mask&&n&&(t._mask.containsPoint&&t._mask.containsPoint(s)||(n=!1)),h&&t.interactiveChildren&&t.children)for(var l=t.children,f=l.length-1;f>=0;f--){var c=l[f],d=this.recursiveFindHit(e,c,r,n,u);if(d){if(!c.parent)continue;u=!1,d&&(e.target&&(n=!1),a=!0)}}return o&&(n&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(s)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),r&&r(e,t,!!a))),a},i.prototype.findHit=function(e,t,r,n){this.recursiveFindHit(e,t,r,n,!1)},i})(),Ff={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(i){i?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Ct.mixin(Ff);var Ri=1,Li={target:null,data:{global:null}},Nf=(function(i){fy(e,i);function e(t,r){var n=i.call(this)||this;return r=r||{},n.renderer=t,n.autoPreventDefault=r.autoPreventDefault!==void 0?r.autoPreventDefault:!0,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new Ps,n.mouse.identifier=Ri,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[Ri]=n.mouse,n.interactionDataPool=[],n.eventData=new Mf,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new cy,n._tempDisplayObject=new Ma,n._useSystemTicker=r.useSystemTicker!==void 0?r.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,r){return Li.target=null,Li.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(Li,r,null,!0),Li.target},e.prototype.setTargetElement=function(t,r){r===void 0&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ot.system.add(this.tickerUpdate,this,he.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Ot.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&r.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var r=this.cursorStyles[t];if(r)switch(typeof r){case"string":this.interactionDOMElement.style.cursor=r;break;case"function":r(t);break;case"object":Object.assign(this.interactionDOMElement.style,r);break}else typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,r,n){(!n.stopPropagationHint||t===n.stopsPropagatingAt)&&(n.currentTarget=t,n.type=r,t.emit(r,n),t[r]&&t[r](n))},e.prototype.delayDispatchEvent=function(t,r,n){this.delayedEvents.push({displayObject:t,eventString:r,eventData:n})},e.prototype.mapPositionToPoint=function(t,r,n){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:0,height:0};var s=1/this.resolution;t.x=(r-o.left)*(this.interactionDOMElement.width/o.width)*s,t.y=(n-o.top)*(this.interactionDOMElement.height/o.height)*s},e.prototype.processInteractive=function(t,r,n,o){var s=this.search.findHit(t,r,n,o),a=this.delayedEvents;if(!a.length)return s;t.stopPropagationHint=!1;var u=a.length;this.delayedEvents=[];for(var h=0;h<u;h++){var l=a[h],f=l.displayObject,c=l.eventString,d=l.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,c,d)}return s},e.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);if(this.autoPreventDefault&&r[0].isNormalized){var n=t.cancelable||!("cancelable"in t);n&&t.preventDefault()}for(var o=r.length,s=0;s<o;s++){var a=r[s],u=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",h),a.pointerType==="touch")this.emit("touchstart",h);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var l=a.button===2;this.emit(l?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,r,n){var o=t.data,s=t.data.identifier;if(n){if(r.trackedPointers[s]||(r.trackedPointers[s]=new zi(s)),this.dispatchEvent(r,"pointerdown",t),o.pointerType==="touch")this.dispatchEvent(r,"touchstart",t);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;a?r.trackedPointers[s].rightDown=!0:r.trackedPointers[s].leftDown=!0,this.dispatchEvent(r,a?"rightdown":"mousedown",t)}}},e.prototype.onPointerComplete=function(t,r,n){for(var o=this.normalizeToPointerData(t),s=o.length,a=t.target!==this.interactionDOMElement?"outside":"",u=0;u<s;u++){var h=o[u],l=this.getInteractionDataForPointerId(h),f=this.configureInteractionEventForDOMEvent(this.eventData,h,l);if(f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,n,r||!a),this.emit(r?"pointercancel":"pointerup"+a,f),h.pointerType==="mouse"||h.pointerType==="pen"){var c=h.button===2;this.emit(c?"rightup"+a:"mouseup"+a,f)}else h.pointerType==="touch"&&(this.emit(r?"touchcancel":"touchend"+a,f),this.releaseInteractionDataForPointerId(h.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,r){var n=t.data,o=t.data.identifier;r.trackedPointers[o]!==void 0&&(delete r.trackedPointers[o],this.dispatchEvent(r,"pointercancel",t),n.pointerType==="touch"&&this.dispatchEvent(r,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,r,n){var o=t.data,s=t.data.identifier,a=r.trackedPointers[s],u=o.pointerType==="touch",h=o.pointerType==="mouse"||o.pointerType==="pen",l=!1;if(h){var f=o.button===2,c=zi.FLAGS,d=f?c.RIGHT_DOWN:c.LEFT_DOWN,v=a!==void 0&&a.flags&d;n?(this.dispatchEvent(r,f?"rightup":"mouseup",t),v&&(this.dispatchEvent(r,f?"rightclick":"click",t),l=!0)):v&&this.dispatchEvent(r,f?"rightupoutside":"mouseupoutside",t),a&&(f?a.rightDown=!1:a.leftDown=!1)}n?(this.dispatchEvent(r,"pointerup",t),u&&this.dispatchEvent(r,"touchend",t),a&&((!h||l)&&this.dispatchEvent(r,"pointertap",t),u&&(this.dispatchEvent(r,"tap",t),a.over=!1))):a&&(this.dispatchEvent(r,"pointerupoutside",t),u&&this.dispatchEvent(r,"touchendoutside",t)),a&&a.none&&delete r.trackedPointers[s]},e.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=r.length,o=0;o<n;o++){var s=r[o],a=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,a);u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",u),s.pointerType==="touch"&&this.emit("touchmove",u),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",u)}r[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,r,n){var o=t.data,s=o.pointerType==="touch",a=o.pointerType==="mouse"||o.pointerType==="pen";a&&this.processPointerOverOut(t,r,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(r,"pointermove",t),s&&this.dispatchEvent(r,"touchmove",t),a&&this.dispatchEvent(r,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t),n=r[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=n,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},e.prototype.processPointerOverOut=function(t,r,n){var o=t.data,s=t.data.identifier,a=o.pointerType==="mouse"||o.pointerType==="pen",u=r.trackedPointers[s];n&&!u&&(u=r.trackedPointers[s]=new zi(s)),u!==void 0&&(n&&this.mouseOverRenderer?(u.over||(u.over=!0,this.delayDispatchEvent(r,"pointerover",t),a&&this.delayDispatchEvent(r,"mouseover",t)),a&&this.cursor===null&&(this.cursor=r.cursor)):u.over&&(u.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),a&&this.dispatchEvent(r,"mouseout",t),u.none&&delete r.trackedPointers[s]))},e.prototype.onPointerOver=function(t){var r=this.normalizeToPointerData(t),n=r[0],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",s)},e.prototype.getInteractionDataForPointerId=function(t){var r=t.pointerId,n;return r===Ri||t.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[r]?n=this.activeInteractionData[r]:(n=this.interactionDataPool.pop()||new Ps,n.identifier=r,this.activeInteractionData[r]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},e.prototype.configureInteractionEventForDOMEvent=function(t,r,n){return t.data=n,this.mapPositionToPoint(n.global,r.clientX,r.clientY),r.pointerType==="touch"&&(r.globalX=n.global.x,r.globalY=n.global.y),n.originalEvent=r,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,o=t.changedTouches.length;n<o;n++){var s=t.changedTouches[n];typeof s.button>"u"&&(s.button=t.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=t.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,r.push(s)}else if(t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof window.PointerEvent))){var a=t;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=Ri),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(t);return r},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e})(Mr);/*!
 * @pixi/runner - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mt=(function(){function i(e){this.items=[],this._name=e,this._aliasCount=0}return i.prototype.emit=function(e,t,r,n,o,s,a,u){if(arguments.length>8)throw new Error("max arguments reached");var h=this,l=h.name,f=h.items;this._aliasCount++;for(var c=0,d=f.length;c<d;c++)f[c][l](e,t,r,n,o,s,a,u);return f===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},i.prototype.remove=function(e){var t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},i.prototype.contains=function(e){return this.items.indexOf(e)!==-1},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i})();Object.defineProperties(Mt.prototype,{dispatch:{value:Mt.prototype.emit},run:{value:Mt.prototype.emit}});/*!
 * @pixi/core - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */nt.PREFER_ENV=$t.any?ue.WEBGL:ue.WEBGL2;nt.STRICT_TEXTURE_CACHE=!1;var dn=[];function Fa(i,e){if(!i)return null;var t="";if(typeof i=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);r&&(t=r[1].toLowerCase())}for(var n=dn.length-1;n>=0;--n){var o=dn[n];if(o.test&&o.test(i,t))return new o(i,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ss=function(i,e){return Ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Ss(i,e)};function lt(i,e){Ss(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ir=(function(){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Mt("setRealSize"),this.onUpdate=new Mt("update"),this.onError=new Mt("onError")}return i.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},i.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(e,t,r){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(e,t){return!1},i})(),Sn=(function(i){lt(e,i);function e(t,r){var n=this,o=r||{},s=o.width,a=o.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return n=i.call(this,s,a)||this,n.data=t,n}return e.prototype.upload=function(t,r,n){var o=t.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===be.UNPACK),n.width===r.width&&n.height===r.height?o.texSubImage2D(r.target,0,0,0,r.width,r.height,r.format,r.type,this.data):(n.width=r.width,n.height=r.height,o.texImage2D(r.target,0,n.internalFormat,r.width,r.height,0,r.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e})(Ir),dy={scaleMode:ne.NEAREST,format:wr.RGBA,alphaMode:be.NPM},_t=(function(i){lt(e,i);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=null);var n=i.call(this)||this;r=r||{};var o=r.alphaMode,s=r.mipmap,a=r.anisotropicLevel,u=r.scaleMode,h=r.width,l=r.height,f=r.wrapMode,c=r.format,d=r.type,v=r.target,m=r.resolution,y=r.resourceOptions;return t&&!(t instanceof Ir)&&(t=Fa(t,y),t.internal=!0),n.width=h||0,n.height=l||0,n.resolution=m||nt.RESOLUTION,n.mipmap=s!==void 0?s:nt.MIPMAP_TEXTURES,n.anisotropicLevel=a!==void 0?a:nt.ANISOTROPIC_LEVEL,n.wrapMode=f||nt.WRAP_MODE,n.scaleMode=u!==void 0?u:nt.SCALE_MODE,n.format=c||wr.RGBA,n.type=d||At.UNSIGNED_BYTE,n.target=v||Re.TEXTURE_2D,n.alphaMode=o!==void 0?o:be.UNPACK,r.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=r.premultiplyAlpha),n.uid=Qe(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=h>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(t),n}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,r){var n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,r,n){return this.resolution=n||this.resolution,this.width=t,this.height=r,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,r,n){return this.resolution=n||this.resolution,this.width=t/this.resolution,this.height=r/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=xs(this.realWidth)&&xs(this.realHeight)},e.prototype.setResolution=function(t){var r=this.resolution;return r===t?this:(this.resolution=t,this.valid&&(this.width=this.width*r/t,this.height=this.height*r/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete qt[this.cacheId],delete Dt[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,r,n){n===void 0&&(n=nt.STRICT_TEXTURE_CACHE);var o=typeof t=="string",s=null;o?s=t:(t._pixiId||(t._pixiId="pixiid_"+Qe()),s=t._pixiId);var a=qt[s];if(o&&n&&!a)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return a||(a=new e(t,r),a.cacheId=s,e.addToCache(a,s)),a},e.fromBuffer=function(t,r,n,o){t=t||new Float32Array(r*n*4);var s=new Sn(t,{width:r,height:n}),a=t instanceof Float32Array?At.FLOAT:At.UNSIGNED_BYTE;return new e(s,Object.assign(dy,o||{width:r,height:n,type:a}))},e.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),qt[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),qt[r]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var r=qt[t];if(r){var n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete qt[t],r}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)delete qt[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e})(Mr),Na=(function(i){lt(e,i);function e(t,r){var n=this,o=r||{},s=o.width,a=o.height;n=i.call(this,s,a)||this,n.items=[],n.itemDirtyIds=[];for(var u=0;u<t;u++){var h=new _t;n.items.push(h),n.itemDirtyIds.push(-2)}return n.length=t,n._load=null,n.baseTexture=null,n}return e.prototype.initFromArray=function(t,r){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Ir?this.addResourceAt(t[n],n):this.addResourceAt(Fa(t[n],r),n))},e.prototype.dispose=function(){for(var t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this},e.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},e.prototype.unbind=function(t){i.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.items.map(function(o){return o.resource}).filter(function(o){return o}),n=r.map(function(o){return o.load()});return this._load=Promise.all(n).then(function(){var o=t.items[0],s=o.realWidth,a=o.realHeight;return t.resize(s,a),Promise.resolve(t)}),this._load},e})(Ir),Bf=(function(i){lt(e,i);function e(t,r){var n=this,o=r||{},s=o.width,a=o.height,u,h;return Array.isArray(t)?(u=t,h=t.length):h=t,n=i.call(this,h,{width:s,height:a})||this,u&&n.initFromArray(u,r),n}return e.prototype.addBaseTextureAt=function(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=Re.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,r,n){var o=this,s=o.length,a=o.itemDirtyIds,u=o.items,h=t.gl;n.dirtyId<0&&h.texImage3D(h.TEXTURE_2D_ARRAY,0,r.format,this._width,this._height,s,0,r.format,r.type,null);for(var l=0;l<s;l++){var f=u[l];a[l]<f.dirtyId&&(a[l]=f.dirtyId,f.valid&&h.texSubImage3D(h.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,r.format,r.type,f.resource.source))}return!0},e})(Na),we=(function(i){lt(e,i);function e(t){var r=this,n=t,o=n.naturalWidth||n.videoWidth||n.width,s=n.naturalHeight||n.videoHeight||n.height;return r=i.call(this,o,s)||this,r.source=t,r.noSubImage=!1,r}return e.crossOrigin=function(t,r,n){n===void 0&&r.indexOf("data:")!==0?t.crossOrigin=Tf(r):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")},e.prototype.upload=function(t,r,n,o){var s=t.gl,a=r.realWidth,u=r.realHeight;return o=o||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===be.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===a&&n.height===u?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,r.type,o):(n.width=a,n.height=u,s.texImage2D(r.target,0,r.format,r.format,r.type,o)),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(r,n),i.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e})(Ir),Ba=(function(i){lt(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.test=function(t){var r=window.OffscreenCanvas;return r&&t instanceof r?!0:t instanceof HTMLCanvasElement},e})(we),Df=(function(i){lt(e,i);function e(t,r){var n=this,o=r||{},s=o.width,a=o.height,u=o.autoLoad,h=o.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");n=i.call(this,6,{width:s,height:a})||this;for(var l=0;l<e.SIDES;l++)n.items[l].target=Re.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=h!==!1,t&&n.initFromArray(t,r),u!==!1&&n.load(),n}return e.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=Re.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Re.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this},e.prototype.upload=function(t,r,n){for(var o=this.itemDirtyIds,s=0;s<e.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,n),o[s]=a.dirtyId):o[s]<-1&&(t.gl.texImage2D(a.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),o[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e})(Na),Da=(function(i){lt(e,i);function e(t,r){var n=this;if(r=r||{},!(t instanceof HTMLImageElement)){var o=new Image;we.crossOrigin(o,t,r.crossorigin),o.src=t,t=o}return n=i.call(this,t)||this,!t.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(r.createBitmap!==void 0?r.createBitmap:nt.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,r.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=r.premultiplyAlpha),n.bitmap=null,n._load=null,r.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(t){var r=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(n,o){var s=r.source;r.url=s.src;var a=function(){r.destroyed||(s.onload=null,s.onerror=null,r.resize(s.width,s.height),r._load=null,r.createBitmap?n(r.process()):n(r))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(u){o(u),r.onError.emit(u)})}),this._load)},e.prototype.process=function(){var t=this,r=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(r,0,0,r.width,r.height,{premultiplyAlpha:this.alphaMode===be.UNPACK?"premultiply":"none"}).then(function(n){return t.destroyed?Promise.reject():(t.bitmap=n,t.update(),t._process=null,Promise.resolve(t))}),this._process)},e.prototype.upload=function(t,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,t,r,n,this.bitmap),!this.preserveBitmap){var o=!0,s=r._glTextures;for(var a in s){var u=s[a];if(u!==n&&u.dirtyId!==r.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},e})(we),Uf=(function(i){lt(e,i);function e(t,r){var n=this;return r=r||{},n=i.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=t,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,r.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var t=this,r=new Image;we.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(n){t._resolve&&(r.onerror=null,t.onError.emit(n))},r.onload=function(){if(t._resolve){var n=r.width,o=r.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=n*t.scale,a=o*t.scale;(t._overrideWidth||t._overrideHeight)&&(s=t._overrideWidth||t._overrideHeight/o*n,a=t._overrideHeight||t._overrideWidth/n*o),s=Math.round(s),a=Math.round(a);var u=t.source;u.width=s,u.height=a,u._pixiId="canvas_"+Qe(),u.getContext("2d").drawImage(r,0,0,n,o,0,0,s,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},e.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,r){return r==="svg"||typeof t=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t=="string"&&t.indexOf("<svg")===0},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e})(we),kf=(function(i){lt(e,i);function e(t,r){var n=this;if(r=r||{},!(t instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var s=t[0].src||t[0];we.crossOrigin(o,s,r.crossorigin);for(var a=0;a<t.length;++a){var u=document.createElement("source"),h=t[a],l=h.src,f=h.mime;l=l||t[a];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||e.MIME_TYPES[d]||"video/"+d,u.src=l,u.type=f,o.appendChild(u)}t=o}return n=i.call(this,t)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=r.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),r.autoLoad!==!1&&n.load(),n}return e.prototype.update=function(t){if(!this.destroyed){var r=Ot.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,r.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(t.videoWidth,t.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&Ot.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e})(we),Xf=(function(i){lt(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e})(we);dn.push(Da,Xf,Ba,kf,Uf,Sn,Df,Bf);var Hf={Resource:Ir,BaseImageResource:we,INSTALLED:dn,autoDetectResource:Fa,AbstractMultiResource:Na,ArrayResource:Bf,BufferResource:Sn,CanvasResource:Ba,CubeResource:Df,ImageResource:Da,SVGResource:Uf,VideoResource:kf,ImageBitmapResource:Xf},Ht=(function(){function i(e){this.renderer=e}return i.prototype.destroy=function(){this.renderer=null},i})(),py=(function(i){lt(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.upload=function(t,r,n){var o=t.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===be.UNPACK),n.width===r.width&&n.height===r.height?o.texSubImage2D(r.target,0,0,0,r.width,r.height,r.format,r.type,this.data):(n.width=r.width,n.height=r.height,o.texImage2D(r.target,0,t.context.webGLVersion===1?o.DEPTH_COMPONENT:o.DEPTH_COMPONENT16,r.width,r.height,0,r.format,r.type,this.data)),!0},e})(Sn),pn=(function(){function i(e,t){this.width=Math.ceil(e||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Mt("disposeFramebuffer"),this.multisample=Ze.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(e,t){return e===void 0&&(e=0),this.colorTextures[e]=t||new _t(null,{scaleMode:ne.NEAREST,resolution:1,mipmap:Tr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(e){return this.depthTexture=e||new _t(new py(null,{width:this.width,height:this.height}),{scaleMode:ne.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Tr.OFF,format:wr.DEPTH_COMPONENT,type:At.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(e,t){if(e=Math.ceil(e),t=Math.ceil(t),!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],o=n.resolution;n.setSize(e/o,t/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(e/o,t/o)}}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i})(),ti=(function(i){lt(e,i);function e(t){var r=this;if(typeof t=="number"){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];t={width:n,height:o,scaleMode:s,resolution:a}}r=i.call(this,null,t)||this;var u=t||{},h=u.width,l=u.height;return r.mipmap=0,r.width=Math.ceil(h)||100,r.height=Math.ceil(l)||100,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new pn(r.width*r.resolution,r.height*r.resolution).addColorTexture(0,r),r.maskStack=[],r.filterStack=[{}],r}return e.prototype.resize=function(t,r){t=Math.ceil(t),r=Math.ceil(r),this.framebuffer.resize(t*this.resolution,r*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e})(_t),Ua=(function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(e,t,r){var n=t.width,o=t.height;if(r){var s=e.width/2/n,a=e.height/2/o,u=e.x/n+s,h=e.y/o+a;r=wt.add(r,wt.NW),this.x0=u+s*wt.uX(r),this.y0=h+a*wt.uY(r),r=wt.add(r,2),this.x1=u+s*wt.uX(r),this.y1=h+a*wt.uY(r),r=wt.add(r,2),this.x2=u+s*wt.uX(r),this.y2=h+a*wt.uY(r),r=wt.add(r,2),this.x3=u+s*wt.uX(r),this.y3=h+a*wt.uY(r)}else this.x0=e.x/n,this.y0=e.y/o,this.x1=(e.x+e.width)/n,this.y1=e.y/o,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/o,this.x3=e.x/n,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i})(),Dh=new Ua,ut=(function(i){lt(e,i);function e(t,r,n,o,s,a){var u=i.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new dt(0,0,1,1)),t instanceof e&&(t=t.baseTexture),u.baseTexture=t,u._frame=r,u.trim=o,u.valid=!1,u._uvs=Dh,u.uvMatrix=null,u.orig=n||r,u._rotate=Number(s||0),s===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=a?new Rt(a.x,a.y):new Rt(0,0),u._updateID=0,u.textureCacheIds=[],t.valid?u.noFrame?t.valid&&u.onBaseTextureUpdated(t):u.frame=r:t.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&t.on("update",u.onBaseTextureUpdated,u),u}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture;r&&r.url&&Dt[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Dh&&(this._uvs=new Ua),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,n){r===void 0&&(r={}),n===void 0&&(n=nt.STRICT_TEXTURE_CACHE);var o=typeof t=="string",s=null;o?s=t:(t._pixiId||(t._pixiId="pixiid_"+Qe()),s=t._pixiId);var a=Dt[s];if(o&&n&&!a)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return a||(r.resolution||(r.resolution=ai(t)),a=new e(new _t(t,r)),a.baseTexture.cacheId=s,_t.addToCache(a.baseTexture,s),e.addToCache(a,s)),a},e.fromURL=function(t,r){var n=Object.assign({autoLoad:!1},r?.resourceOptions),o=e.from(t,Object.assign({resourceOptions:n},r),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(t,r,n,o){return new e(_t.fromBuffer(t,r,n,o))},e.fromLoader=function(t,r,n){var o=new Da(t);o.url=r;var s=new _t(o,{scaleMode:nt.SCALE_MODE,resolution:ai(r)}),a=new e(s);return n||(n=r),_t.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==r&&(_t.addToCache(a.baseTexture,r),e.addToCache(a,r)),a},e.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),Dt[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),Dt[r]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var r=Dt[t];if(r){var n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete Dt[t],r}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)Dt[t.textureCacheIds[o]]===t&&delete Dt[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var r=t.x,n=t.y,o=t.width,s=t.height,a=r+o>this.baseTexture.width,u=n+s>this.baseTexture.height;if(a||u){var h=a&&u?"and":"or",l="X: "+r+" + "+o+" = "+(r+o)+" > "+this.baseTexture.width,f="Y: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+h+" "+f))}this.valid=o&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e})(Mr);function vy(){var i=document.createElement("canvas");i.width=16,i.height=16;var e=i.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new ut(new _t(new Ba(i)))}function Cn(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}ut.EMPTY=new ut(new _t);Cn(ut.EMPTY);Cn(ut.EMPTY.baseTexture);ut.WHITE=vy();Cn(ut.WHITE);Cn(ut.WHITE.baseTexture);var tr=(function(i){lt(e,i);function e(t,r){var n=this,o=null;if(!(t instanceof ti)){var s=arguments[1],a=arguments[2],u=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],r=null,t=new ti({width:s,height:a,scaleMode:u,resolution:h})}return n=i.call(this,t,r)||this,n.legacyRenderer=o,n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r,n){n===void 0&&(n=!0),t=Math.ceil(t),r=Math.ceil(r),this.valid=t>0&&r>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=r,n&&this.baseTexture.resize(t,r),this.updateUvs()},e.prototype.setResolution=function(t){var r=this.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},e.create=function(t){return typeof t=="number"&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new ti(t))},e})(ut),Gf=(function(){function i(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(e,t){var r=new ti(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new tr(r)},i.prototype.getOptimalTexture=function(e,t,r){r===void 0&&(r=1);var n=i.SCREEN_KEY;e*=r,t*=r,(!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight)&&(e=si(e),t=si(t),n=(e&65535)<<16|t&65535),this.texturePool[n]||(this.texturePool[n]=[]);var o=this.texturePool[n].pop();return o||(o=this.createTexture(e,t)),o.filterPoolKey=n,o.setResolution(r),o},i.prototype.getFilterTexture=function(e,t){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution);return r.filterFrame=e.filterFrame,r},i.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},i.prototype.returnFilterTexture=function(e){this.returnTexture(e)},i.prototype.clear=function(e){if(e=e!==!1,e)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){var t=i.SCREEN_KEY,r=this.texturePool[t];if(this.enableFullScreen=e.width>0&&e.height>0,r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[t]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},i.SCREEN_KEY="screen",i})(),Cs=(function(){function i(e,t,r,n,o,s,a){t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=5126),this.buffer=e,this.size=t,this.normalized=r,this.type=n,this.stride=o,this.start=s,this.instance=a}return i.prototype.destroy=function(){this.buffer=null},i.from=function(e,t,r,n,o){return new i(e,t,r,n,o)},i})(),yy=0,Pt=(function(){function i(e,t,r){t===void 0&&(t=!0),r===void 0&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=yy++,this.disposeRunner=new Mt("disposeBuffer")}return i.prototype.update=function(e){this.data=e||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},i.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new i(e)},i})();function Vf(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}var my={Float32Array,Uint32Array,Int32Array,Uint8Array};function gy(i,e){for(var t=0,r=0,n={},o=0;o<i.length;o++)r+=e[o],t+=i[o].length;for(var s=new ArrayBuffer(t*4),a=null,u=0,o=0;o<i.length;o++){var h=e[o],l=i[o],f=Vf(l);n[f]||(n[f]=new my[f](s)),a=n[f];for(var c=0;c<l.length;c++){var d=(c/h|0)*r+u,v=c%h;a[d+v]=l[c]}u+=h}return new Float32Array(s)}var Uh={5126:4,5123:2,5121:1},_y=0,xy={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},nr=(function(){function i(e,t){e===void 0&&(e=[]),t===void 0&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=_y++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Mt("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(e,t,r,n,o,s,a,u){if(r===void 0&&(r=0),n===void 0&&(n=!1),u===void 0&&(u=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Pt||(t instanceof Array&&(t=new Float32Array(t)),t=new Pt(t));var h=e.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],t,r,n,o);return this}var f=this.buffers.indexOf(t);return f===-1&&(this.buffers.push(t),f=this.buffers.length-1),this.attributes[e]=new Cs(f,r,n,o,s,a,u),this.instanced=this.instanced||u,this},i.prototype.getAttribute=function(e){return this.attributes[e]},i.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},i.prototype.addIndex=function(e){return e instanceof Pt||(e instanceof Array&&(e=new Uint16Array(e)),e=new Pt(e)),e.index=!0,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],t=[],r=new Pt,n;for(n in this.attributes){var o=this.attributes[n],s=this.buffers[o.buffer];e.push(s.data),t.push(o.size*Uh[o.type]/4),o.buffer=0}for(r.data=gy(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e],r=this.buffers[t.buffer];return r.data.length/(t.stride/4||t.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var e=new i,t=0;t<this.buffers.length;t++)e.buffers[t]=new Pt(this.buffers[t].data.slice(0));for(var t in this.attributes){var r=this.attributes[t];e.attributes[t]=new Cs(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},i.merge=function(e){for(var t=new i,r=[],n=[],o=[],s,a=0;a<e.length;a++){s=e[a];for(var u=0;u<s.buffers.length;u++)n[u]=n[u]||0,n[u]+=s.buffers[u].data.length,o[u]=0}for(var a=0;a<s.buffers.length;a++)r[a]=new xy[Vf(s.buffers[a].data)](n[a]),t.buffers[a]=new Pt(r[a]);for(var a=0;a<e.length;a++){s=e[a];for(var u=0;u<s.buffers.length;u++)r[u].set(s.buffers[u].data,o[u]),o[u]+=s.buffers[u].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.index=!0;for(var h=0,l=0,f=0,c=0,a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){c=a;break}for(var a in s.attributes){var d=s.attributes[a];(d.buffer|0)===c&&(l+=d.size*Uh[d.type]/4)}for(var a=0;a<e.length;a++){for(var v=e[a].indexBuffer.data,u=0;u<v.length;u++)t.indexBuffer.data[u+f]+=h;h+=s.buffers[c].data.length/l,f+=v.length}}return t},i})(),zf=(function(i){lt(e,i);function e(){var t=i.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return e})(nr),ka=(function(i){lt(e,i);function e(){var t=i.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Pt(t.vertices),t.uvBuffer=new Pt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return e.prototype.map=function(t,r){var n=0,o=0;return this.uvs[0]=n,this.uvs[1]=o,this.uvs[2]=n+r.width/t.width,this.uvs[3]=o,this.uvs[4]=n+r.width/t.width,this.uvs[5]=o+r.height/t.height,this.uvs[6]=n,this.uvs[7]=o+r.height/t.height,n=r.x,o=r.y,this.vertices[0]=n,this.vertices[1]=o,this.vertices[2]=n+r.width,this.vertices[3]=o,this.vertices[4]=n+r.width,this.vertices[5]=o+r.height,this.vertices[6]=n,this.vertices[7]=o+r.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e})(nr),by=0,Le=(function(){function i(e,t){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=by++,this.static=!!t}return i.prototype.update=function(){this.dirtyId++},i.prototype.add=function(e,t,r){this.uniforms[e]=new i(t,r)},i.from=function(e,t){return new i(e,t)},i})(),jf=(function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new dt,this.destinationFrame=new dt,this.filters=[]}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i})(),Yf=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.defaultFilterStack=[{}],r.texturePool=new Gf,r.texturePool.setScreenSize(t.view),r.statePool=[],r.quad=new zf,r.quadUv=new ka,r.tempRect=new dt,r.activeState={},r.globalUniforms=new Le({outputFrame:r.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),r.forceClear=!1,r.useMaxPadding=!1,r}return e.prototype.push=function(t,r){for(var n=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new jf,a=r[0].resolution,u=r[0].padding,h=r[0].autoFit,l=r[0].legacy,f=1;f<r.length;f++){var c=r[f];a=Math.min(a,c.resolution),u=this.useMaxPadding?Math.max(u,c.padding):u+c.padding,h=h&&c.autoFit,l=l||c.legacy}o.length===1&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),o.push(s),s.resolution=a,s.legacy=l,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),h&&s.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),s.sourceFrame.ceil(a),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var d=this.tempRect;d.width=s.sourceFrame.width,d.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,n.renderTexture.bind(s.renderTexture,s.sourceFrame,d),n.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;var o=this.globalUniforms.uniforms;o.outputFrame=r.sourceFrame,o.resolution=r.resolution;var s=o.inputSize,a=o.inputPixel,u=o.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=s[0]*r.resolution,a[1]=s[1]*r.resolution,a[2]=1/a[0],a[3]=1/a[1],u[0]=.5*a[2],u[1]=.5*a[3],u[2]=r.sourceFrame.width*s[2]-.5*a[2],u[3]=r.sourceFrame.height*s[3]-.5*a[3],r.legacy){var h=o.filterArea;h[0]=r.destinationFrame.width,h[1]=r.destinationFrame.height,h[2]=r.sourceFrame.x,h[3]=r.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(r.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,Qt.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var f=r.renderTexture,c=this.getOptimalFilterTexture(f.width,f.height,r.resolution);c.filterFrame=f.filterFrame;var d=0;for(d=0;d<n.length-1;++d){n[d].apply(this,f,c,Qt.CLEAR,r);var v=f;f=c,c=v}n[d].apply(this,f,l.renderTexture,Qt.BLEND,r),this.returnFilterTexture(f),this.returnFilterTexture(c)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(t,r){if(r===void 0&&(r=Qt.CLEAR),t&&t.filterFrame){var n=this.tempRect;n.width=t.filterFrame.width,n.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,n)}else this.renderer.renderTexture.bind(t);typeof r=="boolean"&&(r=r?Qt.CLEAR:Qt.BLEND,W("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(r===Qt.CLEAR||r===Qt.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(t,r,n,o){var s=this.renderer;this.bindAndClear(n,o),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,s.state.set(t.state),s.shader.bind(t),t.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(zt.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(zt.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,r){var n=this.activeState,o=n.sourceFrame,s=n.destinationFrame,a=r._texture.orig,u=t.set(s.width,0,0,s.height,o.x,o.y),h=r.worldTransform.copyTo(Et.TEMP_MATRIX);return h.invert(),u.prepend(h),u.scale(1/a.width,1/a.height),u.translate(r.anchor.x,r.anchor.y),u},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,r,n){return n===void 0&&(n=1),this.texturePool.getOptimalTexture(t,r,n)},e.prototype.getFilterTexture=function(t,r){if(typeof t=="number"){var n=t;t=r,r=n}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution);return o.filterFrame=t.filterFrame,o},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e})(Ht),Nr=(function(){function i(e){this.renderer=e}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(e){},i})(),qf=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.emptyRenderer=new Nr(t),r.currentRenderer=r.emptyRenderer,r}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,r){for(var n=this.renderer.texture.boundTextures,o=r-1;o>=0;--o)t[o]=n[o]||null,t[o]&&(t[o]._batchLocation=o)},e.prototype.boundArray=function(t,r,n,o){for(var s=t.elements,a=t.ids,u=t.count,h=0,l=0;l<u;l++){var f=s[l],c=f._batchLocation;if(c>=0&&c<o&&r[c]===f){a[l]=c;continue}for(;h<o;){var d=r[h];if(d&&d._batchEnabled===n&&d._batchLocation===h){h++;continue}a[l]=h,f._batchLocation=h,r[h]=f;break}}},e})(Ht),kh=0,Wf=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.webGLVersion=1,r.extensions={},r.supports={uint32Indices:!1},r.handleContextLost=r.handleContextLost.bind(r),r.handleContextRestored=r.handleContextRestored.bind(r),t.view.addEventListener("webglcontextlost",r.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",r.handleContextRestored,!1),r}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=kh++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=kh++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var r=this.createContext(this.renderer.view,t);this.initFromContext(r)},e.prototype.createContext=function(t,r){var n;if(nt.PREFER_ENV>=ue.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var r=t.getContextAttributes(),n="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),r.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var o=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e})(Ht),$f=(function(){function i(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Ze.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return i})(),wy=new dt,Kf=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.managedFramebuffers=[],r.unknownFramebuffer=new pn(10,10),r.msaaSamples=null,r}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new dt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;nt.PREFER_ENV===ue.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=function(o){return r.drawBuffersWEBGL(o)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,r){var n=this.gl;if(t){var o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,o.framebuffer)),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var a=t.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,r,n,o){var s=this.viewport;(s.width!==n||s.height!==o||s.x!==t||s.y!==r)&&(s.x=t,s.y=r,s.width=n,s.height=o,this.gl.viewport(t,r,n,o))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,r,n,o,s){s===void 0&&(s=oi.COLOR|oi.DEPTH);var a=this.gl;a.clearColor(t,r,n,o),a.clear(s)},e.prototype.initFramebuffer=function(t){var r=this.gl,n=new $f(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));for(var o=t.colorTextures,s=0;s<o.length;s++)this.renderer.texture.bind(o[s],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures,s=o.length;r.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&(n.msaaBuffer=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer));for(var a=[],u=0;u<s;u++)if(!(u===0&&n.multisample>1)){var h=t.colorTextures[u],l=h.parentTextureArray||h;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+u,h.target,l._glTextures[this.CONTEXT_UID].texture,0),a.push(r.COLOR_ATTACHMENT0+u)}if(a.length>1&&r.drawBuffers(a),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,0)}}!n.stencil&&(t.stencil||t.depth)&&(n.stencil=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),t.depthTexture||r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))},e.prototype.detectSamples=function(t){var r=this.msaaSamples,n=Ze.NONE;if(t<=1||r===null)return n;for(var o=0;o<r.length;o++)if(r[o]<=t){n=r[o];break}return n===1&&(n=Ze.NONE),n},e.prototype.blit=function(t,r,n){var o=this,s=o.current,a=o.renderer,u=o.gl,h=o.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var l=s.glFramebuffers[h];if(l){if(!t){if(l.multisample<=1)return;l.blitFramebuffer||(l.blitFramebuffer=new pn(s.width,s.height),l.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=l.blitFramebuffer,t.width=s.width,t.height=s.height}r||(r=wy,r.width=s.width,r.height=s.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(t),u.bindFramebuffer(u.READ_FRAMEBUFFER,l.framebuffer),u.blitFramebuffer(r.x,r.y,r.width,r.height,n.x,n.y,n.width,n.height,u.COLOR_BUFFER_BIT,f?u.NEAREST:u.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,r){var n=t.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),r||(o.deleteFramebuffer(n.framebuffer),n.stencil&&o.deleteRenderbuffer(n.stencil))}},e.prototype.disposeAll=function(t){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var r=t.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){t.enableStencil();var n=t.width,o=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,o),r.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new dt},e})(Ht),Ty=(function(){function i(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return i})(),$o={5126:4,5123:2,5121:1},Zf=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r._activeGeometry=null,r._activeVao=null,r.hasVao=!0,r.hasInstance=!0,r.canUseUInt32ElementIndex=!1,r.managedGeometries={},r.managedBuffers={},r}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;nt.PREFER_ENV===ue.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(s,a){return o.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,u,h,l){return o.drawElementsInstancedANGLE(s,a,u,h,l)},t.drawArraysInstanced=function(s,a,u,h){return o.drawArraysInstancedANGLE(s,a,u,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,r){r=r||this.renderer.shader.shader;var n=this.gl,o=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;o||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=o={},s=!0);var a=o[r.program.id]||this.initGeometryVao(t,r.program,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(t,r.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,r=this.gl,n=0;n<t.buffers.length;n++){var o=t.buffers[n],s=o._glBuffers[this.CONTEXT_UID];if(o._updateID!==s.updateID){s.updateID=o._updateID;var a=o.index?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER;if(r.bindBuffer(a,s.buffer),this._boundBuffer=s,s.byteLength>=o.data.byteLength)r.bufferSubData(a,0,o.data);else{var u=o.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=o.data.byteLength,r.bufferData(a,o.data,u)}}}},e.prototype.checkCompatibility=function(t,r){var n=t.attributes,o=r.attributeData;for(var s in o)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},e.prototype.getSignature=function(t,r){var n=t.attributes,o=r.attributeData,s=["g",t.id];for(var a in n)o[a]&&s.push(a);return s.join("-")},e.prototype.initGeometryVao=function(t,r,n){n===void 0&&(n=!0),this.checkCompatibility(t,r);var o=this.gl,s=this.CONTEXT_UID,a=this.getSignature(t,r),u=t.glVertexArrayObjects[this.CONTEXT_UID],h=u[a];if(h)return u[r.id]=h,h;var l=t.buffers,f=t.attributes,c={},d={};for(var v in l)c[v]=0,d[v]=0;for(var v in f)!f[v].size&&r.attributeData[v]?f[v].size=r.attributeData[v].size:f[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[f[v].buffer]+=f[v].size*$o[f[v].type];for(var v in f){var m=f[v],y=m.size;m.stride===void 0&&(c[m.buffer]===y*$o[m.type]?m.stride=0:m.stride=c[m.buffer]),m.start===void 0&&(m.start=d[m.buffer],d[m.buffer]+=y*$o[m.type])}h=o.createVertexArray(),o.bindVertexArray(h);for(var x=0;x<l.length;x++){var C=l[x];C._glBuffers[s]||(C._glBuffers[s]=new Ty(o.createBuffer()),this.managedBuffers[C.id]=C,C.disposeRunner.add(this)),n&&C._glBuffers[s].refCount++}return this.activateVao(t,r),this._activeVao=h,u[r.id]=h,u[a]=h,h},e.prototype.disposeBuffer=function(t,r){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],o=this.gl;t.disposeRunner.remove(this),n&&(r||o.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,r){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=t.buffers;if(t.disposeRunner.remove(this),!!n){for(var a=0;a<s.length;a++){var u=s[a]._glBuffers[this.CONTEXT_UID];u.refCount--,u.refCount===0&&!r&&this.disposeBuffer(s[a],r)}if(!r){for(var h in n)if(h[0]==="g"){var l=n[h];this._activeVao===l&&this.unbind(),o.deleteVertexArray(l)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t);r=Object.keys(this.managedBuffers);for(var n=0;n<r.length;n++)this.disposeBuffer(this.managedBuffers[r[n]],t)},e.prototype.activateVao=function(t,r){var n=this.gl,o=this.CONTEXT_UID,s=t.buffers,a=t.attributes;t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[o].buffer);var u=null;for(var h in a){var l=a[h],f=s[l.buffer],c=f._glBuffers[o];if(r.attributeData[h]){u!==c&&(n.bindBuffer(n.ARRAY_BUFFER,c.buffer),u=c);var d=r.attributeData[h].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)n.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,r,n,o){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var u=a.indexBuffer.data.BYTES_PER_ELEMENT,h=u===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;u===2||u===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,r||a.indexBuffer.data.length,h,(n||0)*u,o||1):s.drawElements(t,r||a.indexBuffer.data.length,h,(n||0)*u):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,n,r||a.getSize(),o||1):s.drawArrays(t,n,r||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e})(Ht),Jf=(function(){function i(e){e===void 0&&(e=null),this.type=Bt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Bt.NONE,this.autoDetect=!0),this._target=null},i.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i})();function Xh(i,e,t){var r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}function Qf(i,e,t,r){var n=Xh(i,i.VERTEX_SHADER,e),o=Xh(i,i.FRAGMENT_SHADER,t),s=i.createProgram();if(i.attachShader(s,n),i.attachShader(s,o),r)for(var a in r)i.bindAttribLocation(s,r[a],a);return i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||(i.getShaderParameter(n,i.COMPILE_STATUS)||(console.warn(e),console.error(i.getShaderInfoLog(n))),i.getShaderParameter(o,i.COMPILE_STATUS)||(console.warn(t),console.error(i.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(s,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),i.getProgramInfoLog(s)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(s)),i.deleteProgram(s),s=null),i.deleteShader(n),i.deleteShader(o),s}function Ko(i){for(var e=new Array(i),t=0;t<e.length;t++)e[t]=!1;return e}function tc(i,e){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Ko(2*e);case"bvec3":return Ko(3*e);case"bvec4":return Ko(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ec={},Vr=ec;function rc(){if(Vr===ec||Vr&&Vr.isContextLost()){var i=document.createElement("canvas"),e=void 0;nt.PREFER_ENV>=ue.WEBGL2&&(e=i.getContext("webgl2",{})),e||(e=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Vr=e}return Vr}var Mi;function Ey(){if(!Mi){Mi=oe.MEDIUM;var i=rc();if(i&&i.getShaderPrecisionFormat){var e=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);Mi=e.precision?oe.HIGH:oe.MEDIUM}}return Mi}function Hh(i,e,t){if(i.substring(0,9)!=="precision"){var r=e;return e===oe.HIGH&&t!==oe.HIGH&&(r=oe.MEDIUM),"precision "+r+` float;
`+i}else if(t!==oe.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}var Iy={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Py(i){return Iy[i]}var Fi=null,Gh={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Vh(i,e){if(!Fi){var t=Object.keys(Gh);Fi={};for(var r=0;r<t.length;++r){var n=t[r];Fi[i[n]]=Gh[n]}}return Fi[e]}var ji=[{test:function(i){return i.type==="float"&&i.size===1},code:function(i){return`
            if(uv["`+i+'"] !== ud["'+i+`"].value)
            {
                ud["`+i+'"].value = uv["'+i+`"]
                gl.uniform1f(ud["`+i+'"].location, uv["'+i+`"])
            }
            `}},{test:function(i){return(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray},code:function(i){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+i+`"], t);

            if(ud["`+i+`"].value !== t)
            {
                ud["`+i+`"].value = t;
                gl.uniform1i(ud["`+i+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(i,e){return i.type==="mat3"&&i.size===1&&e.a!==void 0},code:function(i){return`
            gl.uniformMatrix3fv(ud["`+i+'"].location, false, uv["'+i+`"].toArray(true));
            `}},{test:function(i,e){return i.type==="vec2"&&i.size===1&&e.x!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+i+`"].location, v.x, v.y);
                }`}},{test:function(i){return i.type==="vec2"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+i+`"].location, v[0], v[1]);
                }
            `}},{test:function(i,e){return i.type==="vec4"&&i.size===1&&e.width!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+i+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(i){return i.type==="vec4"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+i+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Ay={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Sy={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Cy(i,e){var t=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var r in i.uniforms){var n=e[r];if(!n){i.uniforms[r].group&&t.push(`
                    renderer.shader.syncUniformGroup(uv["`+r+`"], syncData);
                `);continue}for(var o=i.uniforms[r],s=!1,a=0;a<ji.length;a++)if(ji[a].test(n,o)){t.push(ji[a].code(r,o)),s=!0;break}if(!s){var u=n.size===1?Ay:Sy,h=u[n.type].replace("location",'ud["'+r+'"].location');t.push(`
            cv = ud["`+r+`"].value;
            v = uv["`+r+`"];
            `+h+";")}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var Oy=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ry(i){for(var e="",t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+="if(test == "+t+".0){}");return e}function ic(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var r=Oy.replace(/%forloop%/gi,Ry(i));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}return i}var zr;function Ly(){if(typeof zr=="boolean")return zr;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");zr=i({a:"b"},"a","b")===!0}catch{zr=!1}return zr}var My=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Fy=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Ny=0,Ni={},Br=(function(){function i(e,t,r){r===void 0&&(r="pixi-shader"),this.id=Ny++,this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Ni[r]?(Ni[r]++,r+="-"+Ni[r]):Ni[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=Hh(this.vertexSrc,nt.PRECISION_VERTEX,oe.HIGH),this.fragmentSrc=Hh(this.fragmentSrc,nt.PRECISION_FRAGMENT,Ey())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return i.prototype.extractData=function(e,t){var r=rc();if(r){var n=Qf(r,e,t);this.attributeData=this.getAttributeData(n,r),this.uniformData=this.getUniformData(n,r),r.deleteProgram(n)}else this.uniformData={},this.attributeData={}},i.prototype.getAttributeData=function(e,t){for(var r={},n=[],o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var a=t.getActiveAttrib(e,s),u=Vh(t,a.type),h={type:u,name:a.name,size:Py(u),location:0};r[a.name]=h,n.push(h)}n.sort(function(l,f){return l.name>f.name?1:-1});for(var s=0;s<n.length;s++)n[s].location=s;return r},i.prototype.getUniformData=function(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<n;o++){var s=t.getActiveUniform(e,o),a=s.name.replace(/\[.*?\]$/,""),u=s.name.match(/\[.*?\]$/),h=Vh(t,s.type);r[a]={type:h,size:s.size,isArray:u,value:tc(h,s.size)}}return r},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return Fy},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return My},enumerable:!1,configurable:!0}),i.from=function(e,t,r){var n=e+t,o=ws[n];return o||(ws[n]=o=new i(e,t,r)),o},i})(),Te=(function(){function i(e,t){this.program=e,t?t instanceof Le?this.uniformGroup=t:this.uniformGroup=new Le(t):this.uniformGroup=new Le({});for(var r in e.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}return i.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var r in t.uniforms){var n=t.uniforms[r];if(n.group&&this.checkUniformExists(e,n))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(e,t,r){var n=Br.from(e,t);return new i(n,r)},i})(),Zo=0,Jo=1,Qo=2,ts=3,es=4,Fe=(function(){function i(){this.data=0,this.blendMode=ot.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(this.data&1<<Zo)},set:function(e){!!(this.data&1<<Zo)!==e&&(this.data^=1<<Zo)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(this.data&1<<Jo)},set:function(e){!!(this.data&1<<Jo)!==e&&(this.data^=1<<Jo)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(this.data&1<<Qo)},set:function(e){!!(this.data&1<<Qo)!==e&&(this.data^=1<<Qo)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(this.data&1<<ts)},set:function(e){!!(this.data&1<<ts)!==e&&(this.data^=1<<ts)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<es)},set:function(e){!!(this.data&1<<es)!==e&&(this.data^=1<<es)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ot.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),i.for2d=function(){var e=new i;return e.depthTest=!1,e.blend=!0,e},i})(),By=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Dy=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Ie=(function(i){lt(e,i);function e(t,r,n){var o=this,s=Br.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc);return o=i.call(this,s,n)||this,o.padding=0,o.resolution=nt.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Fe,o}return e.prototype.apply=function(t,r,n,o,s){t.applyFilter(this,r,n,o)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return By},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return Dy},enumerable:!1,configurable:!0}),e})(Te),Uy=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,ky=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,zh=new Et,On=(function(){function i(e,t){this._texture=e,this.mapCoord=new Et,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(e,t){t===void 0&&(t=e);for(var r=this.mapCoord,n=0;n<e.length;n+=2){var o=e[n],s=e[n+1];t[n]=o*r.a+s*r.c+r.tx,t[n+1]=o*r.b+s*r.d+r.ty}return t},i.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,o=t.trim;o&&(zh.set(n.width/o.width,0,0,n.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(zh));var s=t.baseTexture,a=this.uClampFrame,u=this.clampMargin/s.resolution,h=this.clampOffset;return a[0]=(t._frame.x+u+h)/s.width,a[1]=(t._frame.y+u+h)/s.height,a[2]=(t._frame.x+t._frame.width-u+h)/s.width,a[3]=(t._frame.y+t._frame.height-u+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&t.rotate===0,!0},i})(),nc=(function(i){lt(e,i);function e(t){var r=this,n=new Et;return r=i.call(this,Uy,ky)||this,t.renderable=!1,r.maskSprite=t,r.maskMatrix=n,r}return e.prototype.apply=function(t,r,n,o){var s=this.maskSprite,a=s._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new On(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,r,n,o))},e})(Ie),oc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.enableScissor=!1,r.alphaMaskPool=[],r.maskDataPool=[],r.maskStack=[],r.alphaMaskIndex=0,r}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,r){var n=r;if(!n.isMaskData){var o=this.maskDataPool.pop()||new Jf;o.pooled=!0,o.maskObject=r,n=o}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case Bt.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case Bt.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case Bt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n);break}},e.prototype.pop=function(t){var r=this.maskStack.pop();if(!(!r||r._target!==t)){switch(r.type){case Bt.SCISSOR:this.renderer.scissor.pop();break;case Bt.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Bt.SPRITE:this.popSpriteMask();break}r.reset(),r.pooled&&this.maskDataPool.push(r)}},e.prototype.detect=function(t){var r=t.maskObject;if(r.isSprite){t.type=Bt.SPRITE;return}if(t.type=Bt.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()){var n=r.worldTransform,o=Math.atan2(n.b,n.a),s=Math.atan2(n.d,n.c);o=Math.round(o*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-o,o=(o%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,o===0&&s===9e3&&(t.type=Bt.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var r=t.maskObject,n=t._target,o=this.alphaMaskPool[this.alphaMaskIndex];o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new nc(r)]),o[0].resolution=this.renderer.resolution,o[0].maskSprite=r;var s=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,o),n.filterArea=s,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e})(Ht),sc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.maskStack=[],r.glConst=0,r}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var o=this.getStackLength();o!==n&&(o===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.maskStack=null},e})(Ht),ac=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var r=t.maskObject;r.renderable=!0;var n=t._scissorRect,o=r.getBounds(!0),s=this.renderer.gl;r.renderable=!1,n?o.fit(n):s.enable(s.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=o,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,r=this.renderer.renderTexture.current,n=this.renderer.projection,o=n.transform,s=n.sourceFrame,a=n.destinationFrame,u=r?r.resolution:this.renderer.resolution,h=(t.x-s.x)*u+a.x,l=(t.y-s.y)*u+a.y,f=t.width*u,c=t.height*u;o&&(h+=o.tx*u,l+=o.ty*u),r||(l=this.renderer.height-c-l),this.renderer.gl.scissor(h,l,f,c)},e})(sc),uc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var r=t.maskObject,n=this.renderer.gl,o=t._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,o,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var r=this.renderer.gl;this.getStackLength()===0?(r.disable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),r.clearStencil(0)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e})(sc),hc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.destinationFrame=null,r.sourceFrame=null,r.defaultFrame=null,r.projectionMatrix=new Et,r.transform=null,r}return e.prototype.update=function(t,r,n,o){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,o),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,r,n,o){var s=this.projectionMatrix,a=o?-1:1;s.identity(),s.a=1/r.width*2,s.d=a*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-a-r.y*s.d},e.prototype.setTransform=function(t){},e})(Ht),Ue=new dt,jr=new dt,Yr=new dt,lc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.clearColor=t._backgroundColorRgba,r.defaultMaskStack=[],r.current=null,r.sourceFrame=new dt,r.destinationFrame=new dt,r}return e.prototype.bind=function(t,r,n){t===void 0&&(t=null);var o=this.renderer;this.current=t;var s,a,u;t?(s=t.baseTexture,u=s.resolution,r||(Ue.width=t.frame.width,Ue.height=t.frame.height,r=Ue),n||(jr.x=t.frame.x,jr.y=t.frame.y,jr.width=r.width,jr.height=r.height,n=jr),a=s.framebuffer):(u=o.resolution,r||(Ue.width=o.screen.width,Ue.height=o.screen.height,r=Ue),n||(n=Ue,n.width=r.width,n.height=r.height)),Yr.x=n.x*u,Yr.y=n.y*u,Yr.width=n.width*u,Yr.height=n.height*u,this.renderer.framebuffer.bind(a,Yr),this.renderer.projection.update(n,r,u,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,r){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],r)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e})(Ht),Xy=(function(){function i(){}return i})(),fc=(function(){function i(e,t){this.program=e,this.uniformData=t,this.uniformGroups={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},i})(),Hy=0,jh={textureCount:0},cc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.destroyed=!1,r.systemCheck(),r.gl=null,r.shader=null,r.program=null,r.cache={},r.id=Hy++,r}return e.prototype.systemCheck=function(){if(!Ly())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,r){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,o=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(o.program)),r||(jh.textureCount=0,this.syncUniformGroup(t.uniformGroup,jh)),o},e.prototype.setUniforms=function(t){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,r){var n=this.getglProgram();(!t.static||t.dirtyId!==n.uniformGroups[t.id])&&(n.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))},e.prototype.syncUniforms=function(t,r,n){var o=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);o(r.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var r=this.getSignature(t,this.shader.program.uniformData);return this.cache[r]||(this.cache[r]=Cy(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,r){var n=t.uniforms,o=[];for(var s in n)o.push(s),r[s]&&o.push(r[s].type);return o.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var r=this.gl,n=t.program,o={};for(var s in n.attributeData)o[s]=n.attributeData[s].location;var a=Qf(r,n.vertexSrc,n.fragmentSrc,o),u={};for(var s in n.uniformData){var h=n.uniformData[s];u[s]={location:r.getUniformLocation(a,s),value:tc(h.type,h.size)}}var l=new fc(a,u);return n.glPrograms[this.renderer.CONTEXT_UID]=l,l},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e})(Ht);function Gy(i,e){return e===void 0&&(e=[]),e[ot.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.ADD]=[i.ONE,i.ONE],e[ot.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.NONE]=[0,0],e[ot.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],e[ot.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ot.SRC_IN]=[i.DST_ALPHA,i.ZERO],e[ot.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],e[ot.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ot.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],e[ot.DST_IN]=[i.ZERO,i.SRC_ALPHA],e[ot.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],e[ot.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],e[ot.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ot.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],e}var Vy=0,zy=1,jy=2,Yy=3,qy=4,dc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.gl=null,r.stateId=0,r.polygonOffset=0,r.blendMode=ot.NONE,r._blendEq=!1,r.map=[],r.map[Vy]=r.setBlend,r.map[zy]=r.setOffset,r.map[jy]=r.setCullFace,r.map[Yy]=r.setDepthTest,r.map[qy]=r.setFrontFace,r.checks=[],r.defaultState=new Fe,r.defaultState.blend=!0,r}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=Gy(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var r=this.stateId^t.data,n=0;r;)r&1&&this.map[n].call(this,!!(t.data&1<<n)),r=r>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var r=this.blendModes[t],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,r){this.gl.polygonOffset(t,r)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,r){var n=this.checks.indexOf(t);r&&n===-1?this.checks.push(t):!r&&n!==-1&&this.checks.splice(n,1)},e.checkBlendMode=function(t,r){t.setBlendMode(r.blendMode)},e.checkPolygonOffset=function(t,r){t.setPolygonOffset(1,r.polygonOffset)},e})(Ht),pc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.count=0,r.checkCount=0,r.maxIdle=nt.GC_MAX_IDLE,r.checkCountMax=nt.GC_MAX_CHECK_COUNT,r.mode=nt.GC_MODE,r}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==cn.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,r=t.managedTextures,n=!1,o=0;o<r.length;o++){var s=r[o];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),r[o]=null,n=!0)}if(n){for(var a=0,o=0;o<r.length;o++)r[o]!==null&&(r[a++]=r[o]);r.length=a}},e.prototype.unload=function(t){var r=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var o=t.children.length-1;o>=0;o--)this.unload(t.children[o])},e})(Ht),Yi=(function(){function i(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return i})(),vc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.boundTextures=[],r.currentLocation=-1,r.managedTextures=[],r._unknownBoundTextures=!1,r.unknownTexture=new _t,r}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var o=new Yi(t.createTexture());t.bindTexture(t.TEXTURE_2D,o.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=o,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Yi(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,r){r===void 0&&(r=0);var n=this.gl;if(t){if(t=t.castToBaseTexture(),t.parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var o=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,o.texture)),o.dirtyId!==t.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)),this.boundTextures[r]=t}}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var r=this,n=r.gl,o=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<o.length;s++)o[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<o.length;s++)o[s]===t&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(t.target,this.emptyTextures[t.target].texture),o[s]=null)},e.prototype.initTexture=function(t){var r=new Yi(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r},e.prototype.initTextureType=function(t,r){if(r.internalFormat=t.format,r.type=t.type,this.webGLVersion===2){var n=this.renderer.gl;t.type===n.FLOAT&&t.format===n.RGBA&&(r.internalFormat=n.RGBA32F),t.type===At.HALF_FLOAT&&(r.type=n.HALF_FLOAT),r.type===n.HALF_FLOAT&&t.format===n.RGBA&&(r.internalFormat=n.RGBA16F)}},e.prototype.updateTexture=function(t){var r=t._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(t,r),!(t.resource&&t.resource.upload(n,t,r))){var o=t.realWidth,s=t.realHeight,a=n.gl;(r.width!==o||r.height!==s||r.dirtyId<0)&&(r.width=o,r.height=s,a.texImage2D(t.target,0,r.internalFormat,o,s,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,r){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){var o=this.managedTextures.indexOf(t);o!==-1&&$e(this.managedTextures,o,1)}},e.prototype.updateTextureStyle=function(t){var r=t._glTextures[this.CONTEXT_UID];r&&((t.mipmap===Tr.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=se.CLAMP:r.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,r){var n=this.gl;if(r.mipmap&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===ne.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&t.anisotropicLevel>0&&t.scaleMode===ne.LINEAR){var s=Math.min(t.anisotropicLevel,n.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,o.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===ne.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===ne.LINEAR?n.LINEAR:n.NEAREST)},e})(Ht),Wy={FilterSystem:Yf,BatchSystem:qf,ContextSystem:Wf,FramebufferSystem:Kf,GeometrySystem:Zf,MaskSystem:oc,ScissorSystem:ac,StencilSystem:uc,ProjectionSystem:hc,RenderTextureSystem:lc,ShaderSystem:cc,StateSystem:dc,TextureGCSystem:pc,TextureSystem:vc},rs=new Et,yc=(function(i){lt(e,i);function e(t,r){t===void 0&&(t=br.UNKNOWN);var n=i.call(this)||this;return r=Object.assign({},nt.RENDER_OPTIONS,r),r.roundPixels&&(nt.ROUND_PIXELS=r.roundPixels,W("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=r,n.type=t,n.screen=new dt(0,0,r.width,r.height),n.view=r.view||document.createElement("canvas"),n.resolution=r.resolution||nt.RESOLUTION,n.transparent=r.transparent,n.autoDensity=r.autoDensity||r.autoResize||!1,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return e.prototype.initPlugins=function(t){for(var r in t)this.plugins[r]=new t[r](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r){this.screen.width=t,this.screen.height=r,this.view.width=t*this.resolution,this.view.height=r*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=r+"px"),this.emit("resize",t,r)},e.prototype.generateTexture=function(t,r,n,o){o=o||t.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var s=tr.create({width:o.width|0,height:o.height|0,scaleMode:r,resolution:n});return rs.tx=-o.x,rs.ty=-o.y,this.render(t,s,!1,rs,!!t.parent),s},e.prototype.destroy=function(t){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=br.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Ia(t),Je(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e})(Mr),fe=(function(i){lt(e,i);function e(t){var r=i.call(this,br.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Mt("destroy"),contextChange:new Mt("contextChange"),reset:new Mt("reset"),update:new Mt("update"),postrender:new Mt("postrender"),prerender:new Mt("prerender"),resize:new Mt("resize")},r.globalUniforms=new Le({projectionMatrix:new Et},!0),r.addSystem(oc,"mask").addSystem(Wf,"context").addSystem(dc,"state").addSystem(cc,"shader").addSystem(vc,"texture").addSystem(Zf,"geometry").addSystem(Kf,"framebuffer").addSystem(ac,"scissor").addSystem(uc,"stencil").addSystem(hc,"projection").addSystem(pc,"textureGC").addSystem(Yf,"filter").addSystem(lc,"renderTexture").addSystem(qf,"batch"),r.initPlugins(e.__plugins),t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:t.antialias,premultipliedAlpha:r.transparent&&r.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,mf(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return e.create=function(t){if(gf())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,r){r||(r=t.name);var n=new t(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=n;for(var o in this.runners)this.runners[o].add(n);return this},e.prototype.render=function(t,r,n,o,s){if(this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(r||(this._lastObjectRendered=t),!s){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(n!==void 0?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(t,r){i.prototype.resize.call(this,t,r),this.runners.resize.emit(t,r)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();i.prototype.destroy.call(this,t),this.gl=null},e.registerPlugin=function(t,r){e.__plugins=e.__plugins||{},e.__plugins[t]=r},e})(yc);function mc(i){return fe.create(i)}var gc=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Xa=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,vn=(function(){function i(){this.texArray=null,this.blend=0,this.type=zt.TRIANGLES,this.start=0,this.size=0,this.data=null}return i})(),yn=(function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},i})(),_c=(function(){function i(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(e){return this[e+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},i})(),xc=(function(i){lt(e,i);function e(t){var r=i.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Fe.for2d(),r.size=nt.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return e.prototype.contextChange=function(){var t=this.renderer.gl;nt.PREFER_ENV===ue.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),nt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=ic(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,n=this.size/4,o=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new vn);for(;r.length<o;)r.push(new yn);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this,r=t._bufferedTextures,n=t.MAX_TEXTURES,o=e._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,u=this.renderer.textureGC.count,h=++_t._globalBatch,l=0,f=o[0],c=0;s.copyBoundTextures(a,n);for(var d=0;d<this._bufferSize;++d){var v=r[d];r[d]=null,v._batchEnabled!==h&&(f.count>=n&&(s.boundArray(f,a,h,n),this.buildDrawCalls(f,c,d),c=d,f=o[++l],++h),v._batchEnabled=h,v.touched=u,f.elements[f.count++]=v)}f.count>0&&(s.boundArray(f,a,h,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++h);for(var d=0;d<a.length;d++)a[d]=null;_t._globalBatch=h},e.prototype.buildDrawCalls=function(t,r,n){var o=this,s=o._bufferedElements,a=o._attributeBuffer,u=o._indexBuffer,h=o.vertexSize,l=e._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=t;for(var m=r;m<n;++m){var y=s[m],x=y._texture.baseTexture,C=Aa[x.alphaMode?1:0][y.blendMode];s[m]=null,r<m&&v.blend!==C&&(v.size=d-v.start,r=m,v=l[++f],v.texArray=t,v.start=d),this.packInterleavedGeometry(y,a,u,c,d),c+=y.vertexData.length/2*h,d+=y.indices.length,v.blend=C}r<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var r=this.renderer.texture,n=0;n<t.count;n++)r.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,r=t._packedGeometries,n=t._attributeBuffer,o=t._indexBuffer;nt.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,n=r.gl,o=r.state,s=e._drawCallPool,a=null,u=0;u<t;u++){var h=s[u],l=h.texArray,f=h.type,c=h.size,d=h.start,v=h.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,o.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),nt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var r=si(Math.ceil(t/8)),n=bs(r),o=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new _c(o*this.vertexSize*4)),s},e.prototype.getIndexBuffer=function(t){var r=si(Math.ceil(t/12)),n=bs(r),o=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(o)),s},e.prototype.packInterleavedGeometry=function(t,r,n,o,s){for(var a=r.uint32View,u=r.float32View,h=o/this.vertexSize,l=t.uvs,f=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),m=v<1&&t._texture.baseTexture.alphaMode?An(t._tintRGB,v):t._tintRGB+(v*255<<24),y=0;y<c.length;y+=2)u[o++]=c[y],u[o++]=c[y+1],u[o++]=l[y],u[o++]=l[y+1],a[o++]=m,u[o++]=d;for(var y=0;y<f.length;y++)n[s++]=h+f[y]},e._drawCallPool=[],e._textureArrayPool=[],e})(Nr),bc=(function(){function i(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=Le.from({uSamplers:t},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+e),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Br(this.vertexSrc,n)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Et,default:this.defaultGroupCache[e]};return new Te(this.programCache[e],o)},i.prototype.generateSampleSrc=function(e){var t="";t+=`
`,t+=`
`;for(var r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},i})(),Ha=(function(i){lt(e,i);function e(t){t===void 0&&(t=!1);var r=i.call(this)||this;return r._buffer=new Pt(null,t,!1),r._indexBuffer=new Pt(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,At.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,At.FLOAT).addAttribute("aColor",r._buffer,4,!0,At.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,At.FLOAT).addIndex(r._indexBuffer),r}return e})(nr),Yh=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,qh=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,wc=(function(){function i(){}return i.create=function(e){var t=Object.assign({vertex:Yh,fragment:qh,geometryClass:Ha,vertexSize:6},e),r=t.vertex,n=t.fragment,o=t.vertexSize,s=t.geometryClass;return(function(a){lt(u,a);function u(h){var l=a.call(this,h)||this;return l.shaderGenerator=new bc(r,n),l.geometryClass=s,l.vertexSize=o,l}return u})(xc)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return Yh},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return qh},enumerable:!1,configurable:!0}),i})(),Tc=wc.create();/*!
 * @pixi/app - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pi=(function(){function i(e){var t=this;e=Object.assign({forceCanvas:!1},e),this.renderer=mc(e),this.stage=new Ut,i._plugins.forEach(function(r){r.init.call(t,e)})}return i.registerPlugin=function(e){i._plugins.push(e)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(e,t){var r=this,n=i._plugins.slice(0);n.reverse(),n.forEach(function(o){o.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},i})();pi._plugins=[];var $y=(function(){function i(){}return i.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){window.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){t.cancelResize();var r,n;if(t._resizeTo===window)r=window.innerWidth,n=window.innerHeight;else{var o=t._resizeTo,s=o.clientWidth,a=o.clientHeight;r=s,n=a}t.renderer.resize(r,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},i.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i})();pi.registerPlugin($y);/*!
 * @pixi/extract - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wh=new dt,$h=4,Ec=(function(){function i(e){this.renderer=e,e.extract=this}return i.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},i.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},i.prototype.canvas=function(e){var t=this.renderer,r,n,o=!1,s,a=!1;e&&(e instanceof tr?s=e:(s=this.renderer.generateTexture(e),a=!0)),s?(r=s.baseTexture.resolution,n=s.frame,o=!1,t.renderTexture.bind(s)):(r=this.renderer.resolution,o=!0,n=Wh,n.width=this.renderer.width,n.height=this.renderer.height,t.renderTexture.bind(null));var u=Math.floor(n.width*r+1e-4),h=Math.floor(n.height*r+1e-4),l=new Ts(u,h,1),f=new Uint8Array($h*u*h),c=t.gl;c.readPixels(n.x*r,n.y*r,u,h,c.RGBA,c.UNSIGNED_BYTE,f);var d=l.context.getImageData(0,0,u,h);if(i.arrayPostDivide(f,d.data),l.context.putImageData(d,0,0),o){var v=new Ts(l.width,l.height,1);v.context.scale(1,-1),v.context.drawImage(l.canvas,0,-h),l.destroy(),l=v}return a&&s.destroy(!0),l.canvas},i.prototype.pixels=function(e){var t=this.renderer,r,n,o,s=!1;e&&(e instanceof tr?o=e:(o=this.renderer.generateTexture(e),s=!0)),o?(r=o.baseTexture.resolution,n=o.frame,t.renderTexture.bind(o)):(r=t.resolution,n=Wh,n.width=t.width,n.height=t.height,t.renderTexture.bind(null));var a=n.width*r,u=n.height*r,h=new Uint8Array($h*a*u),l=t.gl;return l.readPixels(n.x*r,n.y*r,a,u,l.RGBA,l.UNSIGNED_BYTE,h),s&&o.destroy(!0),i.arrayPostDivide(h,h),h},i.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},i.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];n!==0?(t[r]=Math.round(Math.min(e[r]*255/n,255)),t[r+1]=Math.round(Math.min(e[r+1]*255/n,255)),t[r+2]=Math.round(Math.min(e[r+2]*255/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},i})(),is,Kh;function Ky(){return Kh||(Kh=1,is=(i,e={})=>{if(!i)return;const t=/(?:^|&)([^&=]*)=?([^&]*)/g,r={strict:/^(?:([^:/?#]+):)?(?:\/\/([^/?#]*)|([^?#]*?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/,loose:/^(?:([^:/?#.]+):)?(?:\/\/([^/?#]*)|([^?#]*?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},o=(e.strictMode?r.strict:r.loose).exec(i);if(!o)return;const[,s="",a="",u="",h="",l="",f=""]=o,c=a||"",d=a?h:u+h,v={source:i,protocol:s,authority:c,relative:d,query:l,anchor:f,userInfo:"",user:"",password:"",host:"",port:"",path:d,directory:"",file:"",queryKey:{}};if(c){const y=/^(?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?/.exec(c);if(y){const[,x="",C="",P="",F="",w=""]=y;Object.assign(v,{userInfo:x,user:C,password:P,host:F,port:w})}}if(d){const m=d.lastIndexOf("/");m>-1?(v.directory=d.substring(0,m+1),v.file=d.substring(m+1)):v.file=d}if(l)for(const[,m,y]of l.matchAll(t))m&&(v.queryKey[m]=y);return v}),is}var Zy=Ky();const Ic=Lr(Zy);class Bi{constructor(e,t=!1,r){this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}}function Zh(i,e){return i._head?(i._tail._next=e,e._prev=i._tail,i._tail=e):(i._head=e,i._tail=e),e._owner=i,e}class ve{constructor(){this._head=this._tail=void 0}handlers(e=!1){let t=this._head;if(e)return!!t;const r=[];for(;t;)r.push(t),t=t._next;return r}has(e){if(!(e instanceof Bi))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}dispatch(){let e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}add(e,t=null){if(typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Zh(this,new Bi(e,!1,t))}once(e,t=null){if(typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Zh(this,new Bi(e,!0,t))}detach(e){if(!(e instanceof Bi))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}detachAll(){let e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function ke(){}function Jh(i,e,t,r){var n=0,o=i.length;(function s(a){if(a||n===o){t&&t(a);return}r?setTimeout(function(){e(i[n++],s)},1):e(i[n++],s)})()}function Jy(i){return function(){if(i===null)throw new Error("Callback was already called.");var t=i;i=null,t.apply(this,arguments)}}function Qy(i,e){if(e==null)e=1;else if(e===0)throw new Error("Concurrency must not be zero");var t=0,r={_tasks:[],concurrency:e,saturated:ke,unsaturated:ke,buffer:e/4,empty:ke,drain:ke,error:ke,started:!1,paused:!1,push:function(a,u){n(a,!1,u)},kill:function(){t=0,r.drain=ke,r.started=!1,r._tasks=[]},unshift:function(a,u){n(a,!0,u)},process:function(){for(;!r.paused&&t<r.concurrency&&r._tasks.length;){var a=r._tasks.shift();r._tasks.length===0&&r.empty(),t+=1,t===r.concurrency&&r.saturated(),i(a.data,Jy(o(a)))}},length:function(){return r._tasks.length},running:function(){return t},idle:function(){return r._tasks.length+t===0},pause:function(){r.paused!==!0&&(r.paused=!0)},resume:function(){if(r.paused!==!1){r.paused=!1;for(var a=1;a<=r.concurrency;a++)r.process()}}};function n(s,a,u){if(u!=null&&typeof u!="function")throw new Error("task callback must be a function");if(r.started=!0,s==null&&r.idle()){setTimeout(function(){return r.drain()},1);return}var h={data:s,callback:typeof u=="function"?u:ke};a?r._tasks.unshift(h):r._tasks.push(h),setTimeout(function(){return r.process()},1)}function o(s){return function(){t-=1,s.callback.apply(s,arguments),arguments[0]!=null&&r.error(arguments[0],s.data),t<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}function tm(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Pc(i,e,t){return e&&tm(i.prototype,e),i}var em=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),Di=null,rm=0,Qh=200,im=204,nm=1223,om=2;function sm(){}var st=(function(){i.setExtensionLoadType=function(r,n){tl(i._loadTypeMap,r,n)},i.setExtensionXhrType=function(r,n){tl(i._xhrTypeMap,r,n)};function i(t,r,n){if(typeof t!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=sm,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new ve,this.onProgress=new ve,this.onComplete=new ve,this.onAfterMiddleware=new ve}var e=i.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(r){if(!this.error){if(this.error=new Error(r),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(r){var n=this;if(!this.isLoading){if(this.isComplete){r&&setTimeout(function(){return r(n)},1);return}else r&&this.onComplete.once(r);switch(this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:em&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e._hasFlag=function(r){return(this._flags&r)!==0},e._setFlag=function(r,n){this._flags=n?this._flags|r:this._flags&~r},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(r){this.metadata.loadElement?this.data=this.metadata.loadElement:r==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(r),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(r){if(this.metadata.loadElement?this.data=this.metadata.loadElement:r==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(r),this.data===null){this.abort("Unsupported element: "+r);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,o=0;o<this.url.length;++o)this.data.appendChild(this._createSource(r,this.url[o],Array.isArray(n)?n[o]:n));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(r,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XMLHttpRequest;r.open("GET",this.url,!0),r.timeout=this.timeout,this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?r.responseType=i.XHR_RESPONSE_TYPE.TEXT:r.responseType=this.xhrType,r.addEventListener("error",this._boundXhrOnError,!1),r.addEventListener("timeout",this._boundXhrOnTimeout,!1),r.addEventListener("abort",this._boundXhrOnAbort,!1),r.addEventListener("progress",this._boundOnProgress,!1),r.addEventListener("load",this._boundXhrOnLoad,!1),r.send()},e._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XDomainRequest;r.timeout=this.timeout||5e3,r.onerror=this._boundXhrOnError,r.ontimeout=this._boundXhrOnTimeout,r.onprogress=this._boundOnProgress,r.onload=this._boundXhrOnLoad,r.open("GET",this.url,!0),setTimeout(function(){return r.send()},1)},e._createSource=function(r,n,o){o||(o=r+"/"+this._getExtension(n));var s=document.createElement("source");return s.src=n,s.type=o,s},e._onError=function(r){this.abort("Failed to load element using: "+r.target.nodeName)},e._onProgress=function(r){r&&r.lengthComputable&&this.onProgress.dispatch(this,r.loaded/r.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var r=this.xhr;this.abort(ns(r)+" Request failed. Status: "+r.status+', text: "'+r.statusText+'"')},e._xhrOnTimeout=function(){var r=this.xhr;this.abort(ns(r)+" Request timed out.")},e._xhrOnAbort=function(){var r=this.xhr;this.abort(ns(r)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var r=this.xhr,n="",o=typeof r.status>"u"?Qh:r.status;(r.responseType===""||r.responseType==="text"||typeof r.responseType>"u")&&(n=r.responseText),o===rm&&(n.length>0||r.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?o=Qh:o===nm&&(o=im);var s=o/100|0;if(s===om)if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=i.TYPE.JSON}catch(h){this.abort("Error trying to parse loaded json: "+h);return}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(n,"text/xml")}else{var u=document.createElement("div");u.innerHTML=n,this.data=u}this.type=i.TYPE.XML}catch(h){this.abort("Error trying to parse loaded xml: "+h);return}else this.data=r.response||n;else{this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL);return}this.complete()},e._determineCrossOrigin=function(r,n){if(r.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,Di||(Di=document.createElement("a")),Di.href=r,r=Ic(Di.href,{strictMode:!0});var o=!r.port&&n.port===""||r.port===n.port,s=r.protocol?r.protocol+":":"";return r.host!==n.hostname||!o||s!==n.protocol?"anonymous":""},e._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},e._getExtension=function(){var r=this.url,n="";if(this.isDataUrl){var o=r.indexOf("/");n=r.substring(o+1,r.indexOf(";",o))}else{var s=r.indexOf("?"),a=r.indexOf("#"),u=Math.min(s>-1?s:r.length,a>-1?a:r.length);r=r.substring(0,u),n=r.substring(r.lastIndexOf(".")+1)}return n.toLowerCase()},e._getMimeFromXhrType=function(r){switch(r){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Pc(i,[{key:"isDataUrl",get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)}}]),i})();st.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};st.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};st.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};st.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};st._loadTypeMap={gif:st.LOAD_TYPE.IMAGE,png:st.LOAD_TYPE.IMAGE,bmp:st.LOAD_TYPE.IMAGE,jpg:st.LOAD_TYPE.IMAGE,jpeg:st.LOAD_TYPE.IMAGE,tif:st.LOAD_TYPE.IMAGE,tiff:st.LOAD_TYPE.IMAGE,webp:st.LOAD_TYPE.IMAGE,tga:st.LOAD_TYPE.IMAGE,svg:st.LOAD_TYPE.IMAGE,"svg+xml":st.LOAD_TYPE.IMAGE,mp3:st.LOAD_TYPE.AUDIO,ogg:st.LOAD_TYPE.AUDIO,wav:st.LOAD_TYPE.AUDIO,mp4:st.LOAD_TYPE.VIDEO,webm:st.LOAD_TYPE.VIDEO};st._xhrTypeMap={xhtml:st.XHR_RESPONSE_TYPE.DOCUMENT,html:st.XHR_RESPONSE_TYPE.DOCUMENT,htm:st.XHR_RESPONSE_TYPE.DOCUMENT,xml:st.XHR_RESPONSE_TYPE.DOCUMENT,tmx:st.XHR_RESPONSE_TYPE.DOCUMENT,svg:st.XHR_RESPONSE_TYPE.DOCUMENT,tsx:st.XHR_RESPONSE_TYPE.DOCUMENT,gif:st.XHR_RESPONSE_TYPE.BLOB,png:st.XHR_RESPONSE_TYPE.BLOB,bmp:st.XHR_RESPONSE_TYPE.BLOB,jpg:st.XHR_RESPONSE_TYPE.BLOB,jpeg:st.XHR_RESPONSE_TYPE.BLOB,tif:st.XHR_RESPONSE_TYPE.BLOB,tiff:st.XHR_RESPONSE_TYPE.BLOB,webp:st.XHR_RESPONSE_TYPE.BLOB,tga:st.XHR_RESPONSE_TYPE.BLOB,json:st.XHR_RESPONSE_TYPE.JSON,text:st.XHR_RESPONSE_TYPE.TEXT,txt:st.XHR_RESPONSE_TYPE.TEXT,ttf:st.XHR_RESPONSE_TYPE.BUFFER,otf:st.XHR_RESPONSE_TYPE.BUFFER};st.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function tl(i,e,t){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(i[e]=t)}function ns(i){return i.toString().replace("object ","")}var am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function um(i){for(var e="",t=0;t<i.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)t<i.length?r[o]=i.charCodeAt(t++)&255:r[o]=0;n[0]=r[0]>>2,n[1]=(r[0]&3)<<4|r[1]>>4,n[2]=(r[1]&15)<<2|r[2]>>6,n[3]=r[2]&63;var s=t-(i.length-1);switch(s){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var a=0;a<n.length;++a)e+=am.charAt(n[a])}return e}var el=window.URL||window.webkitURL;function hm(i,e){if(!i.data){e();return}if(i.xhr&&i.xhrType===st.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof i.data=="string"){var t=i.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){i.data=new Image,i.data.src="data:"+t+";base64,"+um(i.xhr.responseText),i.type=st.TYPE.IMAGE,i.data.onload=function(){i.data.onload=null,e()};return}}else if(i.data.type.indexOf("image")===0){var r=el.createObjectURL(i.data);i.blob=i.data,i.data=new Image,i.data.src=r,i.type=st.TYPE.IMAGE,i.data.onload=function(){el.revokeObjectURL(r),i.data.onload=null,e()};return}}e()}var lm={parsing:hm},os=100,fm=/(#[\w-]+)?$/,ge=(function(){function i(t,r){var n=this;t===void 0&&(t=""),r===void 0&&(r=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,u){return n._loadResource(a,u)},this._queue=Qy(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new ve,this.onError=new ve,this.onLoad=new ve,this.onStart=new ve,this.onComplete=new ve;for(var o=0;o<i._defaultBeforeMiddleware.length;++o)this.pre(i._defaultBeforeMiddleware[o]);for(var s=0;s<i._defaultAfterMiddleware.length;++s)this.use(i._defaultAfterMiddleware[s])}var e=i.prototype;return e.add=function(r,n,o,s){if(Array.isArray(r)){for(var a=0;a<r.length;++a)this.add(r[a]);return this}if(typeof r=="object"&&(s=n||r.callback||r.onComplete,o=r,n=r.url,r=r.name||r.key||r.url),typeof n!="string"&&(s=o,o=n,n=r),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof o=="function"&&(s=o,o=null),this.loading&&(!o||!o.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');if(n=this._prepareUrl(n),this.resources[r]=new st(r,n,o),typeof s=="function"&&this.resources[r].onAfterMiddleware.once(s),this.loading){for(var u=o.parentResource,h=[],l=0;l<u.children.length;++l)u.children[l].isComplete||h.push(u.children[l]);var f=u.progressChunk*(h.length+1),c=f/(h.length+2);u.children.push(this.resources[r]),u.progressChunk=c;for(var d=0;d<h.length;++d)h[d].progressChunk=c;this.resources[r].progressChunk=c}return this._queue.push(this.resources[r]),this},e.pre=function(r){return this._beforeMiddleware.push(r),this},e.use=function(r){return this._afterMiddleware.push(r),this},e.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var r in this.resources){var n=this.resources[r];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},e.load=function(r){if(typeof r=="function"&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,o=os/n,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=o;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(r){var n=Ic(r,{strictMode:!0}),o;if(n.protocol||!n.path||r.indexOf("//")===0?o=r:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&r.charAt(0)!=="/"?o=this.baseUrl+"/"+r:o=this.baseUrl+r,this.defaultQueryString){var s=fm.exec(o)[0];o=o.substr(0,o.length-s.length),o.indexOf("?")!==-1?o+="&"+this.defaultQueryString:o+="?"+this.defaultQueryString,o+=s}return o},e._loadResource=function(r,n){var o=this;r._dequeue=n,Jh(this._beforeMiddleware,function(s,a){s.call(o,r,function(){a(r.isComplete?{}:null)})},function(){r.isComplete?o._onLoad(r):(r._onLoadBinding=r.onComplete.once(o._onLoad,o),r.load())},!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=os,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(r){var n=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),Jh(this._afterMiddleware,function(o,s){o.call(n,r,s)},function(){r.onAfterMiddleware.dispatch(r),n.progress=Math.min(os,n.progress+r.progressChunk),n.onProgress.dispatch(n,r),r.error?n.onError.dispatch(r.error,n,r):n.onLoad.dispatch(n,r),n._resourcesParsing.splice(n._resourcesParsing.indexOf(r),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},Pc(i,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(r){this._queue.concurrency=r}}]),i})();ge._defaultBeforeMiddleware=[];ge._defaultAfterMiddleware=[];ge.pre=function(e){return ge._defaultBeforeMiddleware.push(e),ge};ge.use=function(e){return ge._defaultAfterMiddleware.push(e),ge};/*!
 * @pixi/loaders - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ei=st;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Os=function(i,e){return Os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Os(i,e)};function cm(i,e){Os(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ac=(function(){function i(){}return i.use=function(e,t){e.data&&e.type===st.TYPE.IMAGE&&(e.texture=ut.fromLoader(e.data,e.url,e.name)),t()},i})(),er=(function(i){cm(e,i);function e(t,r){for(var n=i.call(this,t,r)||this,o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,u=s.use;a&&n.pre(a),u&&n.use(u)}return n._protected=!1,n}return e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e})(ge);er.registerPlugin({use:lm.parsing});er.registerPlugin(Ac);var Sc=(function(){function i(){}return i.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?er.shared:new er},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i})();/*!
 * @pixi/particles - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Rs=function(i,e){return Rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Rs(i,e)};function Cc(i,e){Rs(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var dm=(function(i){Cc(e,i);function e(t,r,n,o){t===void 0&&(t=1500),n===void 0&&(n=16384),o===void 0&&(o=!1);var s=i.call(this)||this,a=16384;return n>a&&(n=a),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=ot.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Je(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e})(Ut),rl=(function(){function i(e,t,r){this.geometry=new nr,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var o=e[n];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||At.FLOAT,offset:o.offset},t[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new Pt(Oa(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Pt(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var n=this.staticProperties[r];n.offset=s,s+=n.size,this.staticStride+=n.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Pt(this.staticData,!0,!1);for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];e.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===At.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var n=this.staticProperties[r];e.addAttribute(n.attributeName,this.staticBuffer,0,n.type===At.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},i.prototype.uploadDynamic=function(e,t,r){for(var n=0;n<this.dynamicProperties.length;n++){var o=this.dynamicProperties[n];o.uploadFunction(e,t,r,o.type===At.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(e,t,r){for(var n=0;n<this.staticProperties.length;n++){var o=this.staticProperties[n];o.uploadFunction(e,t,r,o.type===At.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i})(),pm=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vm=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Oc=(function(i){Cc(e,i);function e(t){var r=i.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new Et,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:At.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=Te.from(vm,pm,{}),r.state=Fe.for2d(),r}return e.prototype.render=function(t){var r=t.children,n=t._maxSize,o=t._batchSize,s=this.renderer,a=r.length;if(a!==0){a>n&&!t.autoResize&&(a=n);var u=t._buffers;u||(u=t._buffers=this.generateBuffers(t));var h=r[0]._texture.baseTexture;this.state.blendMode=Sa(t.blendMode,h.alphaMode),s.state.set(this.state);var l=s.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=_f(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,v=0;d<a;d+=o,v+=1){var m=a-d;m>o&&(m=o),v>=u.length&&u.push(this._generateOneMoreBuffer(t));var y=u[v];y.uploadDynamic(r,d,m);var x=t._bufferUpdateIDs[v]||0;c=c||y._updateID<x,c&&(y._updateID=t._updateID,y.uploadStatic(r,d,m)),s.geometry.bind(y.geometry),l.drawElements(l.TRIANGLES,m*6,l.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var r=[],n=t._maxSize,o=t._batchSize,s=t._properties,a=0;a<n;a+=o)r.push(new rl(this.properties,s,o));return r},e.prototype._generateOneMoreBuffer=function(t){var r=t._batchSize,n=t._properties;return new rl(this.properties,n,r)},e.prototype.uploadVertices=function(t,r,n,o,s,a){for(var u=0,h=0,l=0,f=0,c=0;c<n;++c){var d=t[r+c],v=d._texture,m=d.scale.x,y=d.scale.y,x=v.trim,C=v.orig;x?(h=x.x-d.anchor.x*C.width,u=h+x.width,f=x.y-d.anchor.y*C.height,l=f+x.height):(u=C.width*(1-d.anchor.x),h=C.width*-d.anchor.x,l=C.height*(1-d.anchor.y),f=C.height*-d.anchor.y),o[a]=h*m,o[a+1]=f*y,o[a+s]=u*m,o[a+s+1]=f*y,o[a+s*2]=u*m,o[a+s*2+1]=l*y,o[a+s*3]=h*m,o[a+s*3+1]=l*y,a+=s*4}},e.prototype.uploadPosition=function(t,r,n,o,s,a){for(var u=0;u<n;u++){var h=t[r+u].position;o[a]=h.x,o[a+1]=h.y,o[a+s]=h.x,o[a+s+1]=h.y,o[a+s*2]=h.x,o[a+s*2+1]=h.y,o[a+s*3]=h.x,o[a+s*3+1]=h.y,a+=s*4}},e.prototype.uploadRotation=function(t,r,n,o,s,a){for(var u=0;u<n;u++){var h=t[r+u].rotation;o[a]=h,o[a+s]=h,o[a+s*2]=h,o[a+s*3]=h,a+=s*4}},e.prototype.uploadUvs=function(t,r,n,o,s,a){for(var u=0;u<n;++u){var h=t[r+u]._texture._uvs;h?(o[a]=h.x0,o[a+1]=h.y0,o[a+s]=h.x1,o[a+s+1]=h.y1,o[a+s*2]=h.x2,o[a+s*2+1]=h.y2,o[a+s*3]=h.x3,o[a+s*3+1]=h.y3,a+=s*4):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+s*2]=0,o[a+s*2+1]=0,o[a+s*3]=0,o[a+s*3+1]=0,a+=s*4)}},e.prototype.uploadTint=function(t,r,n,o,s,a){for(var u=0;u<n;++u){var h=t[r+u],l=h._texture.baseTexture.alphaMode>0,f=h.alpha,c=f<1&&l?An(h._tintRGB,f):h._tintRGB+(f*255<<24);o[a]=c,o[a+s]=c,o[a+s*2]=c,o[a+s*3]=c,a+=s*4}},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e})(Nr);/*!
 * @pixi/graphics - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ye;(function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"})(ye||(ye={}));var me;(function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"})(me||(me={}));var Pr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,e){if(e===void 0&&(e=20),!this.adaptive||!i||isNaN(i))return e;var t=Math.ceil(i/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Ga=(function(){function i(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ls=function(i,e){return Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Ls(i,e)};function Rn(i,e){Ls(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Va={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,e){var t=i.points,r=i.holes,n=e.points,o=e.indices;if(t.length>=6){for(var s=[],a=0;a<r.length;a++){var u=r[a];s.push(t.length/2),t=t.concat(u.points)}var h=ba(t,s,2);if(!h)return;for(var l=n.length/2,a=0;a<h.length;a+=3)o.push(h[a]+l),o.push(h[a+1]+l),o.push(h[a+2]+l);for(var a=0;a<t.length;a++)n.push(t[a])}}},Ms={build:function(i){var e=i.shape,t=i.points,r=e.x,n=e.y,o,s;if(t.length=0,i.type===Tt.CIRC)o=e.radius,s=e.radius;else{var a=i.shape;o=a.width,s=a.height}if(!(o===0||s===0)){var u=Math.floor(30*Math.sqrt(e.radius))||Math.floor(15*Math.sqrt(o+s));u/=2.3;for(var h=Math.PI*2/u,l=0;l<u-.5;l++)t.push(r+Math.sin(-h*l)*o,n+Math.cos(-h*l)*s);t.push(t[0],t[1])}},triangulate:function(i,e){var t=i.points,r=e.points,n=e.indices,o=r.length/2,s=o,a=i.shape,u=i.matrix,h=a.x,l=a.y;r.push(i.matrix?u.a*h+u.c*l+u.tx:h,i.matrix?u.b*h+u.d*l+u.ty:l);for(var f=0;f<t.length;f+=2)r.push(t[f],t[f+1]),n.push(o++,s,o)}},Rc={build:function(i){var e=i.shape,t=e.x,r=e.y,n=e.width,o=e.height,s=i.points;s.length=0,s.push(t,r,t+n,r,t+n,r+o,t,r+o)},triangulate:function(i,e){var t=i.points,r=e.points,n=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function vr(i,e,t){var r=e-i;return i+r*t}function Ui(i,e,t,r,n,o,s){s===void 0&&(s=[]);for(var a=20,u=s,h=0,l=0,f=0,c=0,d=0,v=0,m=0,y=0;m<=a;++m)y=m/a,h=vr(i,t,y),l=vr(e,r,y),f=vr(t,n,y),c=vr(r,o,y),d=vr(h,f,y),v=vr(l,c,y),u.push(d,v);return u}var Lc={build:function(i){var e=i.shape,t=i.points,r=e.x,n=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));t.length=0,a?(Ui(r,n+a,r,n,r+a,n,t),Ui(r+o-a,n,r+o,n,r+o,n+a,t),Ui(r+o,n+s-a,r+o,n+s,r+o-a,n+s,t),Ui(r+a,n+s,r,n+s,r,n+s-a,t)):t.push(r,n,r+o,n,r+o,n+s,r,n+s)},triangulate:function(i,e){for(var t=i.points,r=e.points,n=e.indices,o=r.length/2,s=ba(t,null,2),a=0,u=s.length;a<u;a+=3)n.push(s[a]+o),n.push(s[a+1]+o),n.push(s[a+2]+o);for(var a=0,u=t.length;a<u;a++)r.push(t[a],t[++a])}};function il(i,e,t,r,n,o,s,a){var u=i-t*n,h=e-r*n,l=i+t*o,f=e+r*o,c,d;s?(c=r,d=-t):(c=-r,d=t);var v=u+c,m=h+d,y=l+c,x=f+d;return a.push(v,m),a.push(y,x),2}function yr(i,e,t,r,n,o,s,a){var u=t-i,h=r-e,l=Math.atan2(u,h),f=Math.atan2(n-i,o-e);a&&l<f?l+=Math.PI*2:!a&&l>f&&(f+=Math.PI*2);var c=l,d=f-l,v=Math.abs(d),m=Math.sqrt(u*u+h*h),y=(15*v*Math.sqrt(m)/Math.PI>>0)+1,x=d/y;if(c+=x,a){s.push(i,e),s.push(t,r);for(var C=1,P=c;C<y;C++,P+=x)s.push(i,e),s.push(i+Math.sin(P)*m,e+Math.cos(P)*m);s.push(i,e),s.push(n,o)}else{s.push(t,r),s.push(i,e);for(var C=1,P=c;C<y;C++,P+=x)s.push(i+Math.sin(P)*m,e+Math.cos(P)*m),s.push(i,e);s.push(n,o),s.push(i,e)}return y*2}function ym(i,e){var t=i.shape,r=i.points||t.points.slice(),n=e.closePointEps;if(r.length!==0){var o=i.lineStyle,s=new Rt(r[0],r[1]),a=new Rt(r[r.length-2],r[r.length-1]),u=t.type!==Tt.POLY||t.closeStroke,h=Math.abs(s.x-a.x)<n&&Math.abs(s.y-a.y)<n;if(u){r=r.slice(),h&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var l=(s.x+a.x)*.5,f=(a.y+s.y)*.5;r.unshift(l,f),r.push(l,f)}var c=e.points,d=r.length/2,v=r.length,m=c.length/2,y=o.width/2,x=y*y,C=o.miterLimit*o.miterLimit,P=r[0],F=r[1],w=r[2],R=r[3],A=0,H=0,O=-(F-R),N=P-w,G=0,B=0,K=Math.sqrt(O*O+N*N);O/=K,N/=K,O*=y,N*=y;var Q=o.alignment,z=(1-Q)*2,E=Q*2;u||(o.cap===me.ROUND?v+=yr(P-O*(z-E)*.5,F-N*(z-E)*.5,P-O*z,F-N*z,P+O*E,F+N*E,c,!0)+2:o.cap===me.SQUARE&&(v+=il(P,F,O,N,z,E,!0,c))),c.push(P-O*z,F-N*z),c.push(P+O*E,F+N*E);for(var S=1;S<d-1;++S){P=r[(S-1)*2],F=r[(S-1)*2+1],w=r[S*2],R=r[S*2+1],A=r[(S+1)*2],H=r[(S+1)*2+1],O=-(F-R),N=P-w,K=Math.sqrt(O*O+N*N),O/=K,N/=K,O*=y,N*=y,G=-(R-H),B=w-A,K=Math.sqrt(G*G+B*B),G/=K,B/=K,G*=y,B*=y;var p=w-P,g=F-R,_=w-A,b=H-R,T=g*_-b*p,I=T<0;if(Math.abs(T)<.1){c.push(w-O*z,R-N*z),c.push(w+O*E,R+N*E);continue}var L=(-O+P)*(-N+R)-(-O+w)*(-N+F),M=(-G+A)*(-B+R)-(-G+w)*(-B+H),D=(p*M-_*L)/T,U=(b*L-g*M)/T,j=(D-w)*(D-w)+(U-R)*(U-R),q=w+(D-w)*z,V=R+(U-R)*z,$=w-(D-w)*E,Y=R-(U-R)*E,it=Math.min(p*p+g*g,_*_+b*b),at=I?z:E,et=it+at*at*x,rt=j<=et;rt?o.join===ye.BEVEL||j/x>C?(I?(c.push(q,V),c.push(w+O*E,R+N*E),c.push(q,V),c.push(w+G*E,R+B*E)):(c.push(w-O*z,R-N*z),c.push($,Y),c.push(w-G*z,R-B*z),c.push($,Y)),v+=2):o.join===ye.ROUND?I?(c.push(q,V),c.push(w+O*E,R+N*E),v+=yr(w,R,w+O*E,R+N*E,w+G*E,R+B*E,c,!0)+4,c.push(q,V),c.push(w+G*E,R+B*E)):(c.push(w-O*z,R-N*z),c.push($,Y),v+=yr(w,R,w-O*z,R-N*z,w-G*z,R-B*z,c,!1)+4,c.push(w-G*z,R-B*z),c.push($,Y)):(c.push(q,V),c.push($,Y)):(c.push(w-O*z,R-N*z),c.push(w+O*E,R+N*E),o.join===ye.BEVEL||j/x>C||(o.join===ye.ROUND?I?v+=yr(w,R,w+O*E,R+N*E,w+G*E,R+B*E,c,!0)+2:v+=yr(w,R,w-O*z,R-N*z,w-G*z,R-B*z,c,!1)+2:(I?(c.push($,Y),c.push($,Y)):(c.push(q,V),c.push(q,V)),v+=2)),c.push(w-G*z,R-B*z),c.push(w+G*E,R+B*E),v+=2)}P=r[(d-2)*2],F=r[(d-2)*2+1],w=r[(d-1)*2],R=r[(d-1)*2+1],O=-(F-R),N=P-w,K=Math.sqrt(O*O+N*N),O/=K,N/=K,O*=y,N*=y,c.push(w-O*z,R-N*z),c.push(w+O*E,R+N*E),u||(o.cap===me.ROUND?v+=yr(w-O*(z-E)*.5,R-N*(z-E)*.5,w-O*z,R-N*z,w+O*E,R+N*E,c,!1)+2:o.cap===me.SQUARE&&(v+=il(w,R,O,N,z,E,!1,c)));for(var mt=e.indices,yt=Pr.epsilon*Pr.epsilon,S=m;S<v+m-2;++S)P=c[S*2],F=c[S*2+1],w=c[(S+1)*2],R=c[(S+1)*2+1],A=c[(S+2)*2],H=c[(S+2)*2+1],!(Math.abs(P*(R-H)+w*(H-F)+A*(F-R))<yt)&&mt.push(S,S+1,S+2)}}function mm(i,e){var t=0,r=i.shape,n=i.points||r.points,o=r.type!==Tt.POLY||r.closeStroke;if(n.length!==0){var s=e.points,a=e.indices,u=n.length/2,h=s.length/2,l=h;for(s.push(n[0],n[1]),t=1;t<u;t++)s.push(n[t*2],n[t*2+1]),a.push(l,l+1),l++;o&&a.push(l,h)}}function Fs(i,e){i.lineStyle.native?mm(i,e):ym(i,e)}var Mc=(function(i){Rn(e,i);function e(t,r,n,o,s,a){a===void 0&&(a=0);var u=this;s=s||o/2;for(var h=-1*Math.PI/2+a,l=n*2,f=Er/l,c=[],d=0;d<l;d++){var v=d%2?s:o,m=d*f+h;c.push(t+v*Math.cos(m),r+v*Math.sin(m))}return u=i.call(this,c)||this,u}return e})(gr),Ns=(function(){function i(){}return i.curveTo=function(e,t,r,n,o,s){var a=s[s.length-2],u=s[s.length-1],h=u-t,l=a-e,f=n-t,c=r-e,d=Math.abs(h*c-l*f);if(d<1e-8||o===0)return(s[s.length-2]!==e||s[s.length-1]!==t)&&s.push(e,t),null;var v=h*h+l*l,m=f*f+c*c,y=h*f+l*c,x=o*Math.sqrt(v)/d,C=o*Math.sqrt(m)/d,P=x*y/v,F=C*y/m,w=x*c+C*l,R=x*f+C*h,A=l*(C+P),H=h*(C+P),O=c*(x+F),N=f*(x+F),G=Math.atan2(H-R,A-w),B=Math.atan2(N-R,O-w);return{cx:w+e,cy:R+t,radius:o,startAngle:G,endAngle:B,anticlockwise:l*f>c*h}},i.arc=function(e,t,r,n,o,s,a,u,h){for(var l=a-s,f=Pr._segmentsCount(Math.abs(l)*o,Math.ceil(Math.abs(l)/Er)*40),c=l/(f*2),d=c*2,v=Math.cos(c),m=Math.sin(c),y=f-1,x=y%1/y,C=0;C<=y;++C){var P=C+x*C,F=c+s+d*P,w=Math.cos(F),R=-Math.sin(F);h.push((v*w+m*R)*o+r,(v*-R+m*w)*o+n)}},i})(),Fc=(function(){function i(){}return i.curveLength=function(e,t,r,n,o,s,a,u){for(var h=10,l=0,f=0,c=0,d=0,v=0,m=0,y=0,x=0,C=0,P=0,F=0,w=e,R=t,A=1;A<=h;++A)f=A/h,c=f*f,d=c*f,v=1-f,m=v*v,y=m*v,x=y*e+3*m*f*r+3*v*c*o+d*a,C=y*t+3*m*f*n+3*v*c*s+d*u,P=w-x,F=R-C,w=x,R=C,l+=Math.sqrt(P*P+F*F);return l},i.curveTo=function(e,t,r,n,o,s,a){var u=a[a.length-2],h=a[a.length-1];a.length-=2;var l=Pr._segmentsCount(i.curveLength(u,h,e,t,r,n,o,s)),f=0,c=0,d=0,v=0,m=0;a.push(u,h);for(var y=1,x=0;y<=l;++y)x=y/l,f=1-x,c=f*f,d=c*f,v=x*x,m=v*x,a.push(d*u+3*c*x*e+3*f*v*r+m*o,d*h+3*c*x*t+3*f*v*n+m*s)},i})(),Nc=(function(){function i(){}return i.curveLength=function(e,t,r,n,o,s){var a=e-2*r+o,u=t-2*n+s,h=2*r-2*e,l=2*n-2*t,f=4*(a*a+u*u),c=4*(a*h+u*l),d=h*h+l*l,v=2*Math.sqrt(f+c+d),m=Math.sqrt(f),y=2*f*m,x=2*Math.sqrt(d),C=c/m;return(y*v+m*c*(v-x)+(4*d*f-c*c)*Math.log((2*m+C+v)/(C+x)))/(4*y)},i.curveTo=function(e,t,r,n,o){for(var s=o[o.length-2],a=o[o.length-1],u=Pr._segmentsCount(i.curveLength(s,a,e,t,r,n)),h=0,l=0,f=1;f<=u;++f){var c=f/u;h=s+(e-s)*c,l=a+(t-a)*c,o.push(h+(e+(r-e)*c-h)*c,l+(t+(n-t)*c-l)*c)}},i})(),Bc=(function(){function i(){this.reset()}return i.prototype.begin=function(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r},i.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i})(),Xe,qi=(Xe={},Xe[Tt.POLY]=Va,Xe[Tt.CIRC]=Ms,Xe[Tt.ELIP]=Ms,Xe[Tt.RECT]=Rc,Xe[Tt.RREC]=Lc,Xe),Bs=[],Jr=[],gm={buildPoly:Va,buildCircle:Ms,buildRectangle:Rc,buildRoundedRectangle:Lc,FILL_COMMANDS:qi,BATCH_POOL:Bs,DRAW_CALL_POOL:Jr,buildLine:Fs,Star:Mc,ArcUtils:Ns,BezierUtils:Fc,QuadraticUtils:Nc,BatchPart:Bc},Ds=(function(){function i(e,t,r,n){t===void 0&&(t=null),r===void 0&&(r=null),n===void 0&&(n=null),this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=n,this.type=e.type,this.points=[],this.holes=[]}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i})(),mr=new Rt,_m=new ui,Dc=(function(i){Rn(e,i);function e(){var t=i.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new ui,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Jr.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),Bs.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,r,n,o){r===void 0&&(r=null),n===void 0&&(n=null),o===void 0&&(o=null);var s=new Ds(t,r,n,o);return this.graphicsData.push(s),this.dirty++,this},e.prototype.drawHole=function(t,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var n=new Ds(t,null,null,r),o=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=o.lineStyle,o.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){i.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var r=this.graphicsData,n=0;n<r.length;++n){var o=r[n];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(t,mr):mr.copyFrom(t),o.shape.contains(mr.x,mr.y))){var s=!1;if(o.holes)for(var a=0;a<o.holes.length;a++){var u=o.holes[a];if(u.shape.contains(mr.x,mr.y)){s=!0;break}}if(!s)return!0}}return!1},e.prototype.updateBatches=function(t){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,n=this.graphicsData,o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var u=n[a],h=u.fillStyle,l=u.lineStyle,f=qi[u.type];f.build(u),u.matrix&&this.transformPoints(u.points,u.matrix);for(var c=0;c<2;c++){var d=c===0?h:l;if(d.visible){var v=d.texture.baseTexture,m=this.indices.length,y=this.points.length/2;v.wrapMode=se.REPEAT,c===0?this.processFill(u):this.processLine(u);var x=this.points.length/2-y;x!==0&&(o&&!this._compareStyles(s,d)&&(o.end(m,y),o=null),o||(o=Bs.pop()||new Bc,o.begin(d,m,y),this.batches.push(o),s=d),this.addUvs(this.points,r,d.texture,y,x,d.matrix))}}}var C=this.indices.length,P=this.points.length/2;if(o&&o.end(C,P),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var F=P>65535&&t;this.indicesUint16=F?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var n=this.graphicsData[t],o=n.fillStyle,s=n.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,n=t.length;r<n;r++)for(var o=t[r],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var t=++_t._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Jr.push(this.drawCalls[r]);this.drawCalls.length=0;var n=this.colors,o=this.textureIds,s=Jr.pop();s||(s=new vn,s.texArray=new yn),s.texArray.count=0,s.start=0,s.size=0,s.type=zt.TRIANGLES;var a=0,u=null,h=0,l=!1,f=zt.TRIANGLES,c=0;this.drawCalls.push(s);for(var r=0;r<this.batches.length;r++){var d=this.batches[r],v=8,m=d.style,y=m.texture.baseTexture;l!==!!m.native&&(l=!!m.native,f=l?zt.LINES:zt.TRIANGLES,u=null,a=v,t++),u!==y&&(u=y,y._batchEnabled!==t&&(a===v&&(t++,a=0,s.size>0&&(s=Jr.pop(),s||(s=new vn,s.texArray=new yn),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=f),y.touched=1,y._batchEnabled=t,y._batchLocation=a,y.wrapMode=10497,s.texArray.elements[s.texArray.count++]=y,a++)),s.size+=d.size,c+=d.size,h=y._batchLocation,this.addColors(n,m.color,m.alpha,d.attribSize,d.attribStart),this.addTextureIds(o,h,d.attribSize,d.attribStart)}_t._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,n=this.colors,o=this.textureIds,s=new ArrayBuffer(t.length*3*4),a=new Float32Array(s),u=new Uint32Array(s),h=0,l=0;l<t.length/2;l++)a[h++]=t[l*2],a[h++]=t[l*2+1],a[h++]=r[l*2],a[h++]=r[l*2+1],u[h++]=n[l],a[h++]=o[l];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){if(t.holes.length)this.processHoles(t.holes),Va.triangulate(t,this);else{var r=qi[t.type];r.triangulate(t,this)}},e.prototype.processLine=function(t){Fs(t,this);for(var r=0;r<t.holes.length;r++)Fs(t.holes[r],this)},e.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var n=t[r],o=qi[n.type];o.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,r=_m,n=Et.IDENTITY;this._bounds.clear(),r.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,u=s.type,h=s.lineStyle,l=s.matrix||Et.IDENTITY,f=0;if(h&&h.visible){var c=h.alignment;f=h.width,u===Tt.POLY?f=f*(.5+Math.abs(.5-c)):f=f*Math.max(0,c)}if(n!==l&&(r.isEmpty()||(t.addBoundsMatrix(r,n),r.clear()),n=l),u===Tt.RECT||u===Tt.RREC){var d=a;r.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,f,f)}else if(u===Tt.CIRC){var v=a;r.addFramePad(v.x,v.y,v.x,v.y,v.radius+f,v.radius+f)}else if(u===Tt.ELIP){var m=a;r.addFramePad(m.x,m.y,m.x,m.y,m.width+f,m.height+f)}else{var y=a;t.addVerticesMatrix(n,y.points,0,y.points.length,f,f)}}r.isEmpty()||t.addBoundsMatrix(r,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,r){for(var n=0;n<t.length/2;n++){var o=t[n*2],s=t[n*2+1];t[n*2]=r.a*o+r.c*s+r.tx,t[n*2+1]=r.b*o+r.d*s+r.ty}},e.prototype.addColors=function(t,r,n,o,s){s===void 0&&(s=0);var a=(r>>16)+(r&65280)+((r&255)<<16),u=An(a,n);t.length=Math.max(t.length,s+o);for(var h=0;h<o;h++)t[s+h]=u},e.prototype.addTextureIds=function(t,r,n,o){o===void 0&&(o=0),t.length=Math.max(t.length,o+n);for(var s=0;s<n;s++)t[o+s]=r},e.prototype.addUvs=function(t,r,n,o,s,a){a===void 0&&(a=null);for(var u=0,h=r.length,l=n.frame;u<s;){var f=t[(o+u)*2],c=t[(o+u)*2+1];if(a){var d=a.a*f+a.c*c+a.tx;c=a.b*f+a.d*c+a.ty,f=d}u++,r.push(f/l.width,c/l.height)}var v=n.baseTexture;(l.width<v.width||l.height<v.height)&&this.adjustUvs(r,n,h,s)},e.prototype.adjustUvs=function(t,r,n,o){for(var s=r.baseTexture,a=1e-6,u=n+o*2,h=r.frame,l=h.width/s.width,f=h.height/s.height,c=h.x/h.width,d=h.y/h.height,v=Math.floor(t[n]+a),m=Math.floor(t[n+1]+a),y=n+2;y<u;y+=2)v=Math.min(v,Math.floor(t[y]+a)),m=Math.min(m,Math.floor(t[y+1]+a));c-=v,d-=m;for(var y=n;y<u;y+=2)t[y]=(t[y]+c)*l,t[y+1]=(t[y+1]+d)*f},e.BATCHABLE_SIZE=100,e})(Ha),Uc=(function(i){Rn(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=me.BUTT,t.join=ye.MITER,t.miterLimit=10,t}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e})(Ga),xm=new Float32Array(3),ss={},Ln=(function(i){Rn(e,i);function e(t){t===void 0&&(t=null);var r=i.call(this)||this;return r._geometry=t||new Dc,r._geometry.refCount++,r.shader=null,r.state=Fe.for2d(),r._fillStyle=new Ga,r._lineStyle=new Uc,r._matrix=null,r._holeMode=!1,r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r.pluginName="batch",r._transformID=-1,r.tint=16777215,r.blendMode=ot.NORMAL,r}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t){if(t===void 0&&(t=null),typeof t=="number"){var r=arguments;t={width:r[0]||0,color:r[1]||0,alpha:r[2]!==void 0?r[2]:1,alignment:r[3]!==void 0?r[3]:.5,native:!!r[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if(typeof t=="number"){W("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var r=arguments,n=r[0],o=r[1],s=r[2],a=r[3],u=r[4],h=r[5],l=r[6];t={width:n,texture:o,color:s,alpha:a,matrix:u,alignment:h,native:l},Object.keys(t).forEach(function(c){return t[c]===void 0&&delete t[c]})}t=Object.assign({width:0,texture:ut.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:me.BUTT,join:ye.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var f=t.width>0&&t.alpha>0;return f?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:f},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new gr,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new gr,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},e.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,o=n[n.length-2],s=n[n.length-1];return(o!==t||s!==r)&&n.push(t,r),this},e.prototype._initCurve=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},e.prototype.quadraticCurveTo=function(t,r,n,o){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Nc.curveTo(t,r,n,o,s),this},e.prototype.bezierCurveTo=function(t,r,n,o,s,a){return this._initCurve(),Fc.curveTo(t,r,n,o,s,a,this.currentPath.points),this},e.prototype.arcTo=function(t,r,n,o,s){this._initCurve(t,r);var a=this.currentPath.points,u=Ns.curveTo(t,r,n,o,s,a);if(u){var h=u.cx,l=u.cy,f=u.radius,c=u.startAngle,d=u.endAngle,v=u.anticlockwise;this.arc(h,l,f,c,d,v)}return this},e.prototype.arc=function(t,r,n,o,s,a){if(a===void 0&&(a=!1),o===s)return this;!a&&s<=o?s+=Er:a&&o<=s&&(o+=Er);var u=s-o;if(u===0)return this;var h=t+Math.cos(o)*n,l=r+Math.sin(o)*n,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-h),v=Math.abs(c[c.length-1]-l);d<f&&v<f||c.push(h,l)}else this.moveTo(h,l),c=this.currentPath.points;return Ns.arc(h,l,t,r,n,o,s,a,c),this},e.prototype.beginFill=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=1),this.beginTextureFill({texture:ut.WHITE,color:t,alpha:r})},e.prototype.beginTextureFill=function(t){if(t instanceof ut){W("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var r=arguments,n=r[0],o=r[1],s=r[2],a=r[3];t={texture:n,color:o,alpha:s,matrix:a},Object.keys(t).forEach(function(h){return t[h]===void 0&&delete t[h]})}t=Object.assign({texture:ut.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var u=t.alpha>0;return u?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:u},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,r,n,o){return this.drawShape(new dt(t,r,n,o))},e.prototype.drawRoundedRect=function(t,r,n,o,s){return this.drawShape(new Sf(t,r,n,o,s))},e.prototype.drawCircle=function(t,r,n){return this.drawShape(new Pf(t,r,n))},e.prototype.drawEllipse=function(t,r,n,o){return this.drawShape(new Af(t,r,n,o))},e.prototype.drawPolygon=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var o,s=!0,a=r[0];a.points?(s=a.closeStroke,o=a.points):Array.isArray(r[0])?o=r[0]:o=r;var u=new gr(o);return u.closeStroke=s,this.drawShape(u),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,r,n,o,s,a){return a===void 0&&(a=0),this.drawPolygon(new Mc(t,r,n,o,s,a))},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Tt.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var r=this._geometry,n=t.context.supports.uint32Indices;r.updateBatches(n),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var o=0;o<n;o++){var s=t.batches[o],a=s.style.color,u=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),h=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),l=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),f={vertexData:u,blendMode:r,indices:l,uvs:h,_batchRGB:Je(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=f}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,n=this.batches.length;r<n;r++){var o=this.batches[r];o.worldAlpha=this.worldAlpha*o.alpha,t.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),n=this._geometry,o=this.tint,s=this.worldAlpha,a=r.uniforms,u=n.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,t.shader.bind(r),t.geometry.bind(n,r),t.state.set(this.state);for(var h=0,l=u.length;h<l;h++)this._renderDrawCallDirect(t,n.drawCalls[h])},e.prototype._renderDrawCallDirect=function(t,r){for(var n=r.texArray,o=r.type,s=r.size,a=r.start,u=n.count,h=0;h<u;h++)t.texture.bind(n.elements[h],h);t.geometry.draw(o,s,a)},e.prototype._resolveDirectShader=function(t){var r=this.shader,n=this.pluginName;if(!r){if(!ss[n]){for(var o=t.plugins.batch.MAX_TEXTURES,s=new Int32Array(o),a=0;a<o;a++)s[a]=a;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new Et,default:Le.from({uSamplers:s},!0)},h=t.plugins[n]._shader.program;ss[n]=new Te(h,u)}r=ss[n]}return r},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var r=t.bounds,n=r.minX,o=r.minY,s=r.maxX,a=r.maxY;this._bounds.addFrame(this.transform,n,o,s,a)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Je(this.tint,xm),r=0;r<this.batches.length;r++){var n=this.batches[r],o=n._batchRGB,s=t[0]*o[0]*255,a=t[1]*o[1]*255,u=t[2]*o[2]*255,h=(s<<16)+(a<<8)+(u|0);n._tintRGB=(h>>16)+(h&65280)+((h&255)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,n=r.a,o=r.b,s=r.c,a=r.d,u=r.tx,h=r.ty,l=this._geometry.points,f=this.vertexData,c=0,d=0;d<l.length;d+=2){var v=l[d],m=l[d+1];f[c++]=n*v+s*m+u,f[c++]=a*m+o*v+h}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,t)},e._TEMP_POINT=new Rt,e})(Ut);/*!
 * @pixi/sprite - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Us=function(i,e){return Us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Us(i,e)};function bm(i,e){Us(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var qr=new Rt,wm=new Uint16Array([0,1,2,0,2,3]),or=(function(i){bm(e,i);function e(t){var r=i.call(this)||this;return r._anchor=new qe(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=ot.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||ut.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=wm,r.pluginName="batch",r.isSprite=!0,r._roundPixels=nt.ROUND_PIXELS,r}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ye(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ye(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,n=r.a,o=r.b,s=r.c,a=r.d,u=r.tx,h=r.ty,l=this.vertexData,f=t.trim,c=t.orig,d=this._anchor,v=0,m=0,y=0,x=0;if(f?(m=f.x-d._x*c.width,v=m+f.width,x=f.y-d._y*c.height,y=x+f.height):(m=-d._x*c.width,v=m+c.width,x=-d._y*c.height,y=x+c.height),l[0]=n*m+s*x+u,l[1]=a*x+o*m+h,l[2]=n*v+s*x+u,l[3]=a*x+o*v+h,l[4]=n*v+s*y+u,l[5]=a*y+o*v+h,l[6]=n*m+s*y+u,l[7]=a*y+o*m+h,this._roundPixels)for(var C=nt.RESOLUTION,P=0;P<l.length;++P)l[P]=Math.round((l[P]*C|0)/C)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,r=this.vertexTrimmedData,n=t.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,u=s.b,h=s.c,l=s.d,f=s.tx,c=s.ty,d=-o._x*n.width,v=d+n.width,m=-o._y*n.height,y=m+n.height;r[0]=a*d+h*m+f,r[1]=l*m+u*d+c,r[2]=a*v+h*m+f,r[3]=l*m+u*v+c,r[4]=a*v+h*y+f,r[5]=l*y+u*v+c,r[6]=a*d+h*y+f,r[7]=l*y+u*d+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new dt),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,qr);var r=this._texture.orig.width,n=this._texture.orig.height,o=-r*this.anchor.x,s=0;return qr.x>=o&&qr.x<o+r&&(s=-n*this.anchor.y,qr.y>=s&&qr.y<s+n)},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof t=="boolean"?t:t&&t.texture;if(r){var n=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,r){var n=t instanceof ut?t:ut.from(t,r);return new e(n)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=Ye(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=Ye(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ut.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e})(Ut);/*!
 * @pixi/text - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ks=function(i,e){return ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},ks(i,e)};function Tm(i,e){ks(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ar;(function(i){i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Ar||(Ar={}));var as={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ar.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Em=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rr=(function(){function i(e){this.styleID=0,this.reset(),hs(this,e,e)}return i.prototype.clone=function(){var e={};return hs(e,this,as),new i(e)},i.prototype.reset=function(){hs(this,as,as)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=us(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=us(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){Im(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=us(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&Em.indexOf(n)<0&&(n='"'+n+'"'),t[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},i})();function nl(i){return typeof i=="number"?Ia(i):(typeof i=="string"&&i.indexOf("0x")===0&&(i=i.replace("0x","#")),i)}function us(i){if(Array.isArray(i)){for(var e=0;e<i.length;++e)i[e]=nl(i[e]);return i}else return nl(i)}function Im(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(var t=0;t<i.length;++t)if(i[t]!==e[t])return!1;return!0}function hs(i,e,t){for(var r in t)Array.isArray(e[r])?i[r]=e[r].slice():i[r]=e[r]}var Kt=(function(){function i(e,t,r,n,o,s,a,u,h){this.text=e,this.style=t,this.width=r,this.height=n,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=h}return i.measureText=function(e,t,r,n){n===void 0&&(n=i._canvas),r=r??t.wordWrap;var o=t.toFontString(),s=i.measureFont(o);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);var a=n.getContext("2d");a.font=o;for(var u=r?i.wordWrap(e,t,n):e,h=u.split(/(?:\r\n|\r|\n)/),l=new Array(h.length),f=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*t.letterSpacing;l[c]=d,f=Math.max(f,d)}var v=f+t.strokeThickness;t.dropShadow&&(v+=t.dropShadowDistance);var m=t.lineHeight||s.fontSize+t.strokeThickness,y=Math.max(m,s.fontSize+t.strokeThickness)+(h.length-1)*(m+t.leading);return t.dropShadow&&(y+=t.dropShadowDistance),new i(e,t,v,y,h,l,m+t.leading,f,s)},i.wordWrap=function(e,t,r){r===void 0&&(r=i._canvas);for(var n=r.getContext("2d"),o=0,s="",a="",u=Object.create(null),h=t.letterSpacing,l=t.whiteSpace,f=i.collapseSpaces(l),c=i.collapseNewlines(l),d=!f,v=t.wordWrapWidth+h,m=i.tokenize(e),y=0;y<m.length;y++){var x=m[y];if(i.isNewline(x)){if(!c){a+=i.addLine(s),d=!f,s="",o=0;continue}x=" "}if(f){var C=i.isBreakingSpace(x),P=i.isBreakingSpace(s[s.length-1]);if(C&&P)continue}var F=i.getFromCache(x,h,u,n);if(F>v)if(s!==""&&(a+=i.addLine(s),s="",o=0),i.canBreakWords(x,t.breakWords))for(var w=i.wordWrapSplit(x),R=0;R<w.length;R++){for(var A=w[R],H=1;w[R+H];){var O=w[R+H],N=A[A.length-1];if(!i.canBreakChars(N,O,x,R,t.breakWords))A+=O;else break;H++}R+=A.length-1;var G=i.getFromCache(A,h,u,n);G+o>v&&(a+=i.addLine(s),d=!1,s="",o=0),s+=A,o+=G}else{s.length>0&&(a+=i.addLine(s),s="",o=0);var B=y===m.length-1;a+=i.addLine(x,!B),d=!1,s="",o=0}else F+o>v&&(d=!1,a+=i.addLine(s),s="",o=0),(s.length>0||!i.isBreakingSpace(x)||d)&&(s+=x,o+=F)}return a+=i.addLine(s,!1),a},i.addLine=function(e,t){return t===void 0&&(t=!0),e=i.trimRight(e),e=t?e+`
`:e,e},i.getFromCache=function(e,t,r,n){var o=r[e];if(typeof o!="number"){var s=e.length*t;o=n.measureText(e).width+s,r[e]=o}return o},i.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},i.collapseNewlines=function(e){return e==="normal"},i.trimRight=function(e){if(typeof e!="string")return"";for(var t=e.length-1;t>=0;t--){var r=e[t];if(!i.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},i.isNewline=function(e){return typeof e!="string"?!1:i._newlines.indexOf(e.charCodeAt(0))>=0},i.isBreakingSpace=function(e){return typeof e!="string"?!1:i._breakingSpaces.indexOf(e.charCodeAt(0))>=0},i.tokenize=function(e){var t=[],r="";if(typeof e!="string")return t;for(var n=0;n<e.length;n++){var o=e[n];if(i.isBreakingSpace(o)||i.isNewline(o)){r!==""&&(t.push(r),r=""),t.push(o);continue}r+=o}return r!==""&&t.push(r),t},i.canBreakWords=function(e,t){return t},i.canBreakChars=function(e,t,r,n,o){return!0},i.wordWrapSplit=function(e){return e.split("")},i.measureFont=function(e){if(i._fonts[e])return i._fonts[e];var t={ascent:0,descent:0,fontSize:0},r=i._canvas,n=i._context;n.font=e;var o=i.METRICS_STRING+i.BASELINE_SYMBOL,s=Math.ceil(n.measureText(o).width),a=Math.ceil(n.measureText(i.BASELINE_SYMBOL).width),u=2*a;a=a*i.BASELINE_MULTIPLIER|0,r.width=s,r.height=u,n.fillStyle="#f00",n.fillRect(0,0,s,u),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,a);var h=n.getImageData(0,0,s,u).data,l=h.length,f=s*4,c=0,d=0,v=!1;for(c=0;c<a;++c){for(var m=0;m<f;m+=4)if(h[d+m]!==255){v=!0;break}if(!v)d+=f;else break}for(t.ascent=a-c,d=l-f,v=!1,c=u;c>a;--c){for(var m=0;m<f;m+=4)if(h[d+m]!==255){v=!0;break}if(!v)d-=f;else break}return t.descent=c-a,t.fontSize=t.ascent+t.descent,i._fonts[e]=t,t},i.clearMetrics=function(e){e===void 0&&(e=""),e?delete i._fonts[e]:i._fonts={}},i})(),mn=(function(){try{var i=new OffscreenCanvas(0,0),e=i.getContext("2d");return e&&e.measureText?i:document.createElement("canvas")}catch{return document.createElement("canvas")}})();mn.width=mn.height=10;Kt._canvas=mn;Kt._context=mn.getContext("2d");Kt._fonts={};Kt.METRICS_STRING="|q";Kt.BASELINE_SYMBOL="M";Kt.BASELINE_MULTIPLIER=1.4;Kt._newlines=[10,13];Kt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Pm={texture:!0,children:!1,baseTexture:!0},za=(function(i){Tm(e,i);function e(t,r,n){var o=this,s=!1;n||(n=document.createElement("canvas"),s=!0),n.width=3,n.height=3;var a=ut.from(n);return a.orig=new dt,a.trim=new dt,o=i.call(this,a)||this,o._ownCanvas=s,o.canvas=n,o.context=o.canvas.getContext("2d"),o._resolution=nt.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=r,o.localStyleID=-1,o}return e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var n=this.context,o=Kt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,u=o.lines,h=o.lineHeight,l=o.lineWidths,f=o.maxLineWidth,c=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;for(var d,v,m=r.dropShadow?2:1,y=0;y<m;++y){var x=r.dropShadow&&y===0,C=x?Math.ceil(Math.max(1,a)+r.padding*2):0,P=C*this._resolution;if(x){n.fillStyle="black",n.strokeStyle="black";var F=r.dropShadowColor,w=Je(typeof F=="number"?F:Pa(F)),R=r.dropShadowBlur*this._resolution,A=r.dropShadowDistance*this._resolution;n.shadowColor="rgba("+w[0]*255+","+w[1]*255+","+w[2]*255+","+r.dropShadowAlpha+")",n.shadowBlur=R,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*A,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*A+P}else n.fillStyle=this._generateFillStyle(r,u,o),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var H=0;H<u.length;H++)d=r.strokeThickness/2,v=r.strokeThickness/2+H*h+c.ascent,r.align==="right"?d+=f-l[H]:r.align==="center"&&(d+=(f-l[H])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(u[H],d+r.padding,v+r.padding-C,!0),r.fill&&this.drawLetterSpacing(u[H],d+r.padding,v+r.padding-C)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,r,n,o){o===void 0&&(o=!1);var s=this._style,a=s.letterSpacing;if(a===0){o?this.context.strokeText(t,r,n):this.context.fillText(t,r,n);return}for(var u=r,h=Array.from?Array.from(t):t.split(""),l=this.context.measureText(t).width,f=0,c=0;c<h.length;++c){var d=h[c];o?this.context.strokeText(d,u,n):this.context.fillText(d,u,n),f=this.context.measureText(t.substring(c+1)).width,u+=l-f+a,l=f}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=bf(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var n=this._texture,o=this._style,s=o.trim?0:o.padding,a=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(t.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(t.height/this._resolution),n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),i.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,r,n){var o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,a=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,h=Math.ceil(this.canvas.width/this._resolution)-a-u*2,l=Math.ceil(this.canvas.height/this._resolution)-a-u*2,f=o.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var d=f.length+1,v=1;v<d;++v)c.push(v/d);if(f.unshift(o[0]),c.unshift(0),f.push(o[o.length-1]),c.push(1),t.fillGradientType===Ar.LINEAR_VERTICAL){s=this.context.createLinearGradient(h/2,u,h/2,l+u);for(var m=0,y=n.fontProperties.fontSize+t.strokeThickness,x=y/l,v=0;v<r.length;v++)for(var C=n.lineHeight*v,P=0;P<f.length;P++){var F=0;typeof c[P]=="number"?F=c[P]:F=P/f.length;var w=C/l+F*x,R=Math.max(m,w);R=Math.min(R,1),s.addColorStop(R,f[P]),m=R}}else{s=this.context.createLinearGradient(u,l/2,h+u,l/2);for(var A=f.length+1,H=1,v=0;v<f.length;v++){var O=void 0;typeof c[v]=="number"?O=c[v]:O=H/A,s.addColorStop(O,f[v]),H++}}return s},e.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Pm,t),i.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=Ye(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=Ye(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof rr?this._style=t:this._style=new rr(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e})(or);/*!
 * @pixi/prepare - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */nt.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Xs=function(i,e){return Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Xs(i,e)};function Am(i,e){Xs(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var kc=(function(){function i(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i})();function Sm(i,e){var t=!1;if(i&&i._textures&&i._textures.length){for(var r=0;r<i._textures.length;r++)if(i._textures[r]instanceof ut){var n=i._textures[r].baseTexture;e.indexOf(n)===-1&&(e.push(n),t=!0)}}return t}function Cm(i,e){if(i.baseTexture instanceof _t){var t=i.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function Om(i,e){if(i._texture&&i._texture instanceof ut){var t=i._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function Rm(i,e){return e instanceof za?(e.updateText(!0),!0):!1}function Lm(i,e){if(e instanceof rr){var t=e.toFontString();return Kt.measureFont(t),!0}return!1}function Mm(i,e){if(i instanceof za){e.indexOf(i.style)===-1&&e.push(i.style),e.indexOf(i)===-1&&e.push(i);var t=i._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function Fm(i,e){return i instanceof rr?(e.indexOf(i)===-1&&e.push(i),!0):!1}var Xc=(function(){function i(e){var t=this;this.limiter=new kc(nt.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(Mm),this.registerFindHook(Fm),this.registerFindHook(Sm),this.registerFindHook(Cm),this.registerFindHook(Om),this.registerUploadHook(Rm),this.registerUploadHook(Lm)}return i.prototype.upload=function(e,t){typeof e=="function"&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,Ot.system.addOnce(this.tick,this,he.UTILITY))):t&&t()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed){for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Ot.system.addOnce(this.tick,this,he.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var r=0,n=o.length;r<n;r++)o[r]()}},i.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},i.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},i.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Ut)for(var t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},i.prototype.destroy=function(){this.ticking&&Ot.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i})();function Hc(i,e){return e instanceof _t?(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0):!1}function Nm(i,e){if(!(e instanceof Ln))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var r=t.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&Hc(i,o.baseTexture)}return t.batchable||i.geometry.bind(t,e._resolveDirectShader(i)),!0}function Bm(i,e){return i instanceof Ln?(e.push(i),!0):!1}var Gc=(function(i){Am(e,i);function e(t){var r=i.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(Bm),r.registerUploadHook(Hc),r.registerUploadHook(Nm),r}return e})(Xc),Dm=(function(){function i(e){this.maxMilliseconds=e,this.frameStart=0}return i.prototype.beginFrame=function(){this.frameStart=Date.now()},i.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},i})();/*!
 * @pixi/spritesheet - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Vc=(function(){function i(e,t,r){r===void 0&&(r=null),this._texture=e instanceof ut?e:null,this.baseTexture=e instanceof _t?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(e){e===void 0&&(e=null);var t=this.data.meta.scale,r=ai(e,null);return r===null&&(r=t!==void 0?parseFloat(t):1),r!==1&&this.baseTexture.setResolution(r),r},i.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(e){for(var t=e,r=i.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var n=this._frameKeys[t],o=this._frames[n],s=o.frame;if(s){var a=null,u=null,h=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,l=new dt(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);o.rotated?a=new dt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new dt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(u=new dt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new ut(this.baseTexture,a,l,u,o.rotated?2:0,o.anchor),ut.addToCache(this.textures[n],n)}t++}},i.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++){var n=e[t][r];this.animations[t].push(this.textures[n])}}},i.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},i.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*i.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},i.prototype.destroy=function(e){var t;e===void 0&&(e=!1);for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i})(),zc=(function(){function i(){}return i.use=function(e,t){var r=this,n=e.name+"_image";if(!e.data||e.type!==ei.TYPE.JSON||!e.data.frames||r.resources[n]){t();return}var o={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},s=i.getResourcePath(e,r.baseUrl);r.add(n,s,o,function(u){if(u.error){t(u.error);return}var h=new Vc(u.texture,e.data,e.url);h.parse(function(){e.spritesheet=h,e.textures=h.textures,t()})})},i.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:yf.resolve(e.url.replace(t,""),e.data.meta.image)},i})();/*!
 * @pixi/sprite-tiling - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Hs=function(i,e){return Hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Hs(i,e)};function jc(i,e){Hs(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Wr=new Rt,Um=(function(i){jc(e,i);function e(t,r,n){r===void 0&&(r=100),n===void 0&&(n=100);var o=i.call(this,t)||this;return o.tileTransform=new Ra,o._width=r,o._height=n,o.uvMatrix=o.texture.uvMatrix||new On(t),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,n,o)},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new dt),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Wr);var r=this._width,n=this._height,o=-r*this.anchor._x;if(Wr.x>=o&&Wr.x<o+r){var s=-n*this.anchor._y;if(Wr.y>=s&&Wr.y<s+n)return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return typeof r=="number"&&(W("5.3.0","TilingSprite.from use options instead of width and height args"),r={width:r,height:arguments[2]}),new e(ut.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e})(or),ol=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,km=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,Xm=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,ki=new Et,Yc=(function(i){jc(e,i);function e(t){var r=i.call(this,t)||this,n={globals:r.renderer.globalUniforms};return r.shader=Te.from(ol,km,n),r.simpleShader=Te.from(ol,Xm,n),r.quad=new ka,r.state=Fe.for2d(),r}return e.prototype.render=function(t){var r=this.renderer,n=this.quad,o=n.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(o=n.uvs,o[0]=o[6]=-t.anchor.x,o[1]=o[3]=-t.anchor.y,o[2]=o[4]=1-t.anchor.x,o[5]=o[7]=1-t.anchor.y),n.invalidate();var s=t._texture,a=s.baseTexture,u=t.tileTransform.localTransform,h=t.uvMatrix,l=a.isPowerOfTwo&&s.frame.width===a.width&&s.frame.height===a.height;l&&(a._glTextures[r.CONTEXT_UID]?l=a.wrapMode!==se.CLAMP:a.wrapMode===se.CLAMP&&(a.wrapMode=se.REPEAT));var f=l?this.simpleShader:this.shader,c=s.width,d=s.height,v=t._width,m=t._height;ki.set(u.a*c/v,u.b*c/m,u.c*d/v,u.d*d/m,u.tx/v,u.ty/m),ki.invert(),l?ki.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=ki.toArray(!0),f.uniforms.uColor=Ca(t.tint,t.worldAlpha,f.uniforms.uColor,a.alphaMode),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=s,r.shader.bind(f),r.geometry.bind(n),this.state.blendMode=Sa(t.blendMode,a.alphaMode),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e})(Nr);/*!
 * @pixi/mesh - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Gs=function(i,e){return Gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Gs(i,e)};function ja(i,e){Gs(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var qc=(function(){function i(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},i})(),ls=new Rt,sl=new gr,Sr=(function(i){ja(e,i);function e(t,r,n,o){o===void 0&&(o=zt.TRIANGLES);var s=i.call(this)||this;return s.geometry=t,t.refCount++,s.shader=r,s.state=n||Fe.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s._roundPixels=nt.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===zt.TRIANGLES&&r.length<e.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.program.uniformData.translationMatrix&&(r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var r=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,r=t.buffers[0].data;if(!(t.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));for(var n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,u=n.d,h=n.tx,l=n.ty,f=this.vertexData,c=0;c<f.length/2;c++){var d=r[c*2],v=r[c*2+1];f[c*2]=o*d+a*v+h,f[c*2+1]=s*d+u*v+l}if(this._roundPixels)for(var m=nt.RESOLUTION,c=0;c<f.length;++c)f[c]=Math.round((f[c]*m|0)/m);this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new qc(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,ls);for(var r=this.geometry.getBuffer("aVertexPosition").data,n=sl.points,o=this.geometry.getIndex().data,s=o.length,a=this.drawMode===4?3:1,u=0;u+2<s;u+=a){var h=o[u]*2,l=o[u+1]*2,f=o[u+2]*2;if(n[0]=r[h],n[1]=r[h+1],n[2]=r[l],n[3]=r[l+1],n[4]=r[f],n[5]=r[f+1],sl.contains(ls.x,ls.y))return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e})(Ut),Hm=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Gm=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,vi=(function(i){ja(e,i);function e(t,r){var n=this,o={uSampler:t,alpha:1,uTextureMatrix:Et.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(o,r.uniforms),n=i.call(this,r.program||Br.from(Gm,Hm),o)||this,n._colorDirty=!1,n.uvMatrix=new On(t),n.batchable=r.program===void 0,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Ca(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e})(Te),yi=(function(i){ja(e,i);function e(t,r,n){var o=i.call(this)||this,s=new Pt(t),a=new Pt(r,!0),u=new Pt(n,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,At.FLOAT).addAttribute("aTextureCoord",a,2,!1,At.FLOAT).addIndex(u),o._updateId=-1,o}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e})(nr);/*!
 * @pixi/text-bitmap - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vs=function(i,e){return Vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Vs(i,e)};function Vm(i,e){Vs(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var hi=(function(){function i(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return i})(),zm=(function(){function i(){}return i.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},i.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var n in t){var o=t[n].match(/^[a-z]+/gm)[0],s=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var u in s){var h=s[u].split("="),l=h[0],f=h[1].replace(/"/gm,""),c=parseFloat(f),d=isNaN(c)?f:c;a[l]=d}r[o].push(a)}var v=new hi;return r.info.forEach(function(m){return v.info.push({face:m.face,size:parseInt(m.size,10)})}),r.common.forEach(function(m){return v.common.push({lineHeight:parseInt(m.lineHeight,10)})}),r.page.forEach(function(m){return v.page.push({id:parseInt(m.id,10),file:m.file})}),r.char.forEach(function(m){return v.char.push({id:parseInt(m.id,10),page:parseInt(m.page,10),x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xoffset:parseInt(m.xoffset,10),yoffset:parseInt(m.yoffset,10),xadvance:parseInt(m.xadvance,10)})}),r.kerning.forEach(function(m){return v.kerning.push({first:parseInt(m.first,10),second:parseInt(m.second,10),amount:parseInt(m.amount,10)})}),v},i})(),zs=(function(){function i(){}return i.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},i.parse=function(e){for(var t=new hi,r=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),u=0;u<r.length;u++)t.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(var u=0;u<n.length;u++)t.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(var u=0;u<o.length;u++)t.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(var u=0;u<s.length;u++){var h=s[u];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(var u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});return t},i})(),jm=(function(){function i(){}return i.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var t=new self.DOMParser().parseFromString(e,"text/xml");return zs.test(t)}return!1},i.parse=function(e){var t=new window.DOMParser().parseFromString(e,"text/xml");return zs.parse(t)},i})(),fs=[zm,zs,jm];function Wc(i){for(var e=0;e<fs.length;e++)if(fs[e].test(i))return fs[e];return null}function Ym(i,e,t,r,n,o){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,u=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,l=Math.ceil(i.width/r)-u-h*2,f=Math.ceil(i.height/r)-u-h*2,c=s.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var v=c.length+1,m=1;m<v;++m)d.push(m/v);if(c.unshift(s[0]),d.unshift(0),c.push(s[s.length-1]),d.push(1),t.fillGradientType===Ar.LINEAR_VERTICAL){a=e.createLinearGradient(l/2,h,l/2,f+h);for(var y=0,x=o.fontProperties.fontSize+t.strokeThickness,C=x/f,m=0;m<n.length;m++)for(var P=o.lineHeight*m,F=0;F<c.length;F++){var w=0;typeof d[F]=="number"?w=d[F]:w=F/c.length;var R=P/f+w*C,A=Math.max(y,R);A=Math.min(A,1),a.addColorStop(A,c[F]),y=A}}else{a=e.createLinearGradient(h,f/2,l+h,f/2);for(var H=c.length+1,O=1,m=0;m<c.length;m++){var N=void 0;typeof d[m]=="number"?N=d[m]:N=O/H,a.addColorStop(N,c[m]),O++}}return a}function qm(i,e,t,r,n,o,s){var a=t.text,u=t.fontProperties;e.translate(r,n),e.scale(o,o);var h=s.strokeThickness/2,l=-(s.strokeThickness/2);if(e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=Ym(i,e,s,o,[a],t),e.strokeStyle=s.stroke,s.dropShadow){var f=s.dropShadowColor,c=Je(typeof f=="number"?f:Pa(f)),d=s.dropShadowBlur*o,v=s.dropShadowDistance*o;e.shadowColor="rgba("+c[0]*255+","+c[1]*255+","+c[2]*255+","+s.dropShadowAlpha+")",e.shadowBlur=d,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*v,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*v}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;s.stroke&&s.strokeThickness&&e.strokeText(a,h,l+t.lineHeight-u.descent),s.fill&&e.fillText(a,h,l+t.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Wm(i){typeof i=="string"&&(i=[i]);for(var e=[],t=0,r=i.length;t<r;t++){var n=i[t];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,u=s;a<=u;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,n.split(""))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var Ce=(function(){function i(e,t,r){var n=e.info[0],o=e.common[0],s=e.page[0],a=ai(s.file),u={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=o.lineHeight/a,this.chars={},this.pageTextures=u;for(var h=0;h<e.page.length;h++){var l=e.page[h],f=l.id,c=l.file;u[f]=t instanceof Array?t[h]:t[c]}for(var h=0;h<e.char.length;h++){var d=e.char[h],f=d.id,v=d.page,m=e.char[h],y=m.x,x=m.y,C=m.width,P=m.height,F=m.xoffset,w=m.yoffset,R=m.xadvance;y/=a,x/=a,C/=a,P/=a,F/=a,w/=a,R/=a;var A=new dt(y+u[v].frame.x/a,x+u[v].frame.y/a,C,P);this.chars[f]={xOffset:F,yOffset:w,xAdvance:R,kerning:{},texture:new ut(u[v].baseTexture,A),page:v}}for(var h=0;h<e.kerning.length;h++){var H=e.kerning[h],O=H.first,N=H.second,G=H.amount;O/=a,N/=a,G/=a,this.chars[N]&&(this.chars[N].kerning[O]=G)}}return i.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},i.install=function(e,t,r){var n;if(e instanceof hi)n=e;else{var o=Wc(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}t instanceof ut&&(t=[t]);var s=new i(n,t,r);return i.available[s.font]=s,s},i.uninstall=function(e){var t=i.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete i.available[e]},i.from=function(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},i.defaultOptions,r),o=n.chars,s=n.padding,a=n.resolution,u=n.textureWidth,h=n.textureHeight,l=Wm(o),f=t instanceof rr?t:new rr(t),c=u,d=new hi;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var v=0,m=0,y,x,C,P=0,F=[],w=0;w<l.length;w++){y||(y=document.createElement("canvas"),y.width=u,y.height=h,x=y.getContext("2d"),C=new _t(y,{resolution:a}),F.push(new ut(C)),d.page.push({id:F.length-1,file:""}));var R=Kt.measureText(l[w],f,!1,y),A=R.width,H=Math.ceil(R.height),O=Math.ceil((f.fontStyle==="italic"?2:1)*A);if(m>=h-H*a){if(m===0)throw new Error("[BitmapFont] textureHeight "+h+"px is "+("too small for "+f.fontSize+"px fonts"));--w,y=null,x=null,C=null,m=0,v=0,P=0;continue}if(P=Math.max(H+R.fontProperties.descent,P),O*a+v>=c){--w,m+=P*a,m=Math.ceil(m),v=0,P=0;continue}qm(y,x,R,v,m,a,f);var N=R.text.charCodeAt(0);d.char.push({id:N,page:F.length-1,x:v/a,y:m/a,width:O,height:H,xoffset:0,yoffset:0,xadvance:Math.ceil(A-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),v+=(O+2*s)*a,v=Math.ceil(v)}var G=new i(d,F,!0);return i.available[e]!==void 0&&i.uninstall(e),i.available[e]=G,G},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i})(),al=[],ul=[],$m=(function(i){Vm(e,i);function e(t,r){r===void 0&&(r={});var n=i.call(this)||this;n._tint=16777215,r.font&&(W("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),n._upgradeStyle(r));var o=Object.assign({},e.styleDefaults,r),s=o.align,a=o.tint,u=o.maxWidth,h=o.letterSpacing,l=o.fontName,f=o.fontSize;if(!Ce.available[l])throw new Error('Missing BitmapFont "'+l+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=s,n._tint=a,n._fontName=l,n._fontSize=f||Ce.available[l].size,n._text=t,n._maxWidth=u,n._maxLineHeight=0,n._letterSpacing=h,n._anchor=new qe(function(){n.dirty=!0},n,0,0),n._roundPixels=nt.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return e.prototype.updateText=function(){for(var t,r=Ce.available[this._fontName],n=this._fontSize/r.size,o=new Rt,s=[],a=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=u.length,l=this._maxWidth*r.size/this._fontSize,f=null,c=0,d=0,v=0,m=-1,y=0,x=0,C=0,P=0;P<h;P++){var F=u.charCodeAt(P),w=u.charAt(P);if(/(?:\s)/.test(w)&&(m=P,y=c),w==="\r"||w===`
`){a.push(c),d=Math.max(d,c),++v,++x,o.x=0,o.y+=r.lineHeight,f=null;continue}var R=r.chars[F];if(R){f&&R.kerning[f]&&(o.x+=R.kerning[f]);var A=ul.pop()||{texture:ut.EMPTY,line:0,charCode:0,position:new Rt};A.texture=R.texture,A.line=v,A.charCode=F,A.position.x=o.x+R.xOffset+this._letterSpacing/2,A.position.y=o.y+R.yOffset,s.push(A),o.x+=R.xAdvance+this._letterSpacing,c=o.x,C=Math.max(C,R.yOffset+R.texture.height),f=F,m!==-1&&l>0&&o.x>l&&(++x,$e(s,1+m-x,1+P-m),P=m,m=-1,a.push(y),d=Math.max(d,y),v++,o.x=0,o.y+=r.lineHeight,f=null)}}var H=u.charAt(u.length-1);H!=="\r"&&H!==`
`&&(/(?:\s)/.test(H)&&(c=y),a.push(c),d=Math.max(d,c));for(var O=[],P=0;P<=v;P++){var N=0;this._align==="right"?N=d-a[P]:this._align==="center"&&(N=(d-a[P])/2),O.push(N)}for(var G=s.length,B={},K=[],Q=this._activePagesMeshData,P=0;P<Q.length;P++)al.push(Q[P]);for(var P=0;P<G;P++){var z=s[P].texture,E=z.baseTexture.uid;if(!B[E]){var S=al.pop();if(!S){var p=new yi,g=new vi(ut.EMPTY),_=new Sr(p,g);S={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:_,vertices:null,uvs:null,indices:null}}S.index=0,S.indexCount=0,S.vertexCount=0,S.uvsCount=0,S.total=0;var b=this._textureCache;b[E]=b[E]||new ut(z.baseTexture),S.mesh.texture=b[E],S.mesh.tint=this._tint,K.push(S),B[E]=S}B[E].total++}for(var P=0;P<Q.length;P++)K.indexOf(Q[P])===-1&&this.removeChild(Q[P].mesh);for(var P=0;P<K.length;P++)K[P].mesh.parent!==this&&this.addChild(K[P].mesh);this._activePagesMeshData=K;for(var P in B){var S=B[P],T=S.total;if(!(((t=S.indices)===null||t===void 0?void 0:t.length)>6*T)||S.vertices.length<Sr.BATCHABLE_SIZE*2)S.vertices=new Float32Array(8*T),S.uvs=new Float32Array(8*T),S.indices=new Uint16Array(6*T);else for(var I=S.total,L=S.vertices,M=I*4*2;M<L.length;M++)L[M]=0;S.mesh.size=6*T}for(var P=0;P<G;P++){var w=s[P],D=w.position.x+O[w.line];this._roundPixels&&(D=Math.round(D));var U=D*n,j=w.position.y*n,z=w.texture,q=B[z.baseTexture.uid],V=z.frame,$=z._uvs,Y=q.index++;q.indices[Y*6+0]=0+Y*4,q.indices[Y*6+1]=1+Y*4,q.indices[Y*6+2]=2+Y*4,q.indices[Y*6+3]=0+Y*4,q.indices[Y*6+4]=2+Y*4,q.indices[Y*6+5]=3+Y*4,q.vertices[Y*8+0]=U,q.vertices[Y*8+1]=j,q.vertices[Y*8+2]=U+V.width*n,q.vertices[Y*8+3]=j,q.vertices[Y*8+4]=U+V.width*n,q.vertices[Y*8+5]=j+V.height*n,q.vertices[Y*8+6]=U,q.vertices[Y*8+7]=j+V.height*n,q.uvs[Y*8+0]=$.x0,q.uvs[Y*8+1]=$.y0,q.uvs[Y*8+2]=$.x1,q.uvs[Y*8+3]=$.y1,q.uvs[Y*8+4]=$.x2,q.uvs[Y*8+5]=$.y2,q.uvs[Y*8+6]=$.x3,q.uvs[Y*8+7]=$.y3}this._textWidth=d*n,this._textHeight=(o.y+r.lineHeight)*n;for(var P in B){var S=B[P];if(this.anchor.x!==0||this.anchor.y!==0)for(var it=0,at=this._textWidth*this.anchor.x,et=this._textHeight*this.anchor.y,rt=0;rt<S.total;rt++)S.vertices[it++]-=at,S.vertices[it++]-=et,S.vertices[it++]-=at,S.vertices[it++]-=et,S.vertices[it++]-=at,S.vertices[it++]-=et,S.vertices[it++]-=at,S.vertices[it++]-=et;this._maxLineHeight=C*n;var mt=S.mesh.geometry.getBuffer("aVertexPosition"),yt=S.mesh.geometry.getBuffer("aTextureCoord"),bt=S.mesh.geometry.getIndex();mt.data=S.vertices,yt.data=S.uvs,bt.data=S.indices,mt.update(),yt.update(),bt.update()}for(var P=0;P<s.length;P++)ul.push(s[P])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Ce.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(t){if(typeof t.font=="string"){var r=t.font.split(" ");t.fontName=r.length===1?r[0]:r.slice(1).join(" "),r.length>=2&&(t.fontSize=parseInt(r[0],10))}else t.fontName=t.font.name,t.fontSize=typeof t.font.size=="number"?t.font.size:parseInt(t.font.size,10)},e.prototype.destroy=function(t){var r=this._textureCache;for(var n in r){var o=r[n];o.destroy(),delete r[n]}this._textureCache=null,i.prototype.destroy.call(this,t)},e.registerFont=function(t,r){return W("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),Ce.install(t,r)},Object.defineProperty(e,"fonts",{get:function(){return W("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),Ce.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e})(Ut),$c=(function(){function i(){}return i.add=function(){ei.setExtensionXhrType("fnt",ei.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,t){var r=Wc(e.data);if(!r){t();return}for(var n=i.getBaseUrl(this,e),o=r.parse(e.data),s={},a=function(m){s[m.metadata.pageFile]=m.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=Ce.install(o,s,!0),t())},u=0;u<o.page.length;++u){var h=o.page[u].file,l=n+h,f=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===l){d.metadata.pageFile=h,d.texture?a(d):d.onAfterMiddleware.add(a),f=!0;break}}if(!f){var v={crossOrigin:e.crossOrigin,loadType:ei.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},e.metadata.imageMetadata),parentResource:e};this.add(l,v,a)}}},i.getBaseUrl=function(e,t){var r=t.isDataUrl?"":i.dirname(t.url);return t.isDataUrl&&(r==="."&&(r=""),e.baseUrl&&r&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(r+="/")),r=r.replace(e.baseUrl,""),r&&r.charAt(r.length-1)!=="/"&&(r+="/"),r},i.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":t===""?"/":t},i})();/*!
 * @pixi/filter-alpha - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var js=function(i,e){return js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},js(i,e)};function Km(i,e){js(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Zm=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,Jm=(function(i){Km(e,i);function e(t){t===void 0&&(t=1);var r=i.call(this,gc,Zm,{uAlpha:1})||this;return r.alpha=t,r}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e})(Ie);/*!
 * @pixi/filter-blur - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ys=function(i,e){return Ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Ys(i,e)};function Kc(i,e){Ys(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Qm=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function tg(i,e){var t=Math.ceil(i/2),r=Qm,n="",o;e?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<i;s++){var a=o.replace("%index%",s.toString());a=a.replace("%sampleIndex%",s-(t-1)+".0"),n+=a,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",i.toString()),r}var eg={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},rg=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function ig(i){for(var e=eg[i],t=e.length,r=rg,n="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,a=0;a<i;a++){var u=o.replace("%index%",a.toString());s=a,a>=t&&(s=i-a-1),u=u.replace("%value%",e[s].toString()),n+=u,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",i.toString()),r}var hl;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(hl||(hl={}));var ll;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(ll||(ll={}));var fl;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})(fl||(fl={}));var cl;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(cl||(cl={}));var dl;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(dl||(dl={}));var pl;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(pl||(pl={}));var vl;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(vl||(vl={}));var yl;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(yl||(yl={}));var ml;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(ml||(ml={}));var gl;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(gl||(gl={}));var _l;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"})(_l||(_l={}));var xl;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(xl||(xl={}));var li;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(li||(li={}));var bl;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(bl||(bl={}));var wl;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(wl||(wl={}));var Tl;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"})(Tl||(Tl={}));var El;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(El||(El={}));var qs=(function(i){Kc(e,i);function e(t,r,n,o,s){r===void 0&&(r=8),n===void 0&&(n=4),o===void 0&&(o=nt.FILTER_RESOLUTION),s===void 0&&(s=5);var a=this,u=tg(s,t),h=ig(s);return a=i.call(this,u,h)||this,a.horizontal=t,a.resolution=o,a._quality=0,a.quality=n,a.blur=r,a}return e.prototype.apply=function(t,r,n,o){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,n,o);else{var s=t.getFilterTexture(),a=t.renderer,u=r,h=s;this.state.blend=!1,t.applyFilter(this,u,h,li.CLEAR);for(var l=1;l<this.passes-1;l++){t.bindAndClear(u,li.BLIT),this.uniforms.uSampler=h;var f=h;h=u,u=f,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,h,n,o),t.returnFilterTexture(s)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e})(Ie),ng=(function(i){Kc(e,i);function e(t,r,n,o){t===void 0&&(t=8),r===void 0&&(r=4),n===void 0&&(n=nt.FILTER_RESOLUTION),o===void 0&&(o=5);var s=i.call(this)||this;return s.blurXFilter=new qs(!0,t,r,n,o),s.blurYFilter=new qs(!1,t,r,n,o),s.resolution=n,s.quality=r,s.blur=t,s.repeatEdgePixels=!1,s}return e.prototype.apply=function(t,r,n,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var u=t.getFilterTexture();this.blurXFilter.apply(t,r,u,li.CLEAR),this.blurYFilter.apply(t,u,n,o),t.returnFilterTexture(u)}else a?this.blurYFilter.apply(t,r,n,o):this.blurXFilter.apply(t,r,n,o)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e})(Ie);/*!
 * @pixi/filter-color-matrix - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ws=function(i,e){return Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Ws(i,e)};function og(i,e){Ws(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var sg=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,$s=(function(i){og(e,i);function e(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=i.call(this,Xa,sg,r)||this,t.alpha=1,t}return e.prototype._loadMatrix=function(t,r){r===void 0&&(r=!1);var n=t;r&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,r,n){return t[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],t[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],t[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],t[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],t[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],t[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],t[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],t[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],t[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],t[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],t[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],t[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],t[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],t[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],t[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],t[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],t[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],t[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],t[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],t[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],t},e.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},e.prototype.brightness=function(t,r){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.greyscale=function(t,r){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.blackAndWhite=function(t){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var n=Math.cos(t),o=Math.sin(t),s=Math.sqrt,a=1/3,u=s(a),h=n+(1-n)*a,l=a*(1-n)-u*o,f=a*(1-n)+u*o,c=a*(1-n)+u*o,d=n+a*(1-n),v=a*(1-n)-u*o,m=a*(1-n)-u*o,y=a*(1-n)+u*o,x=n+a*(1-n),C=[h,l,f,0,0,c,d,v,0,0,m,y,x,0,0,0,0,0,1,0];this._loadMatrix(C,r)},e.prototype.contrast=function(t,r){var n=(t||0)+1,o=-.5*(n-1),s=[n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0];this._loadMatrix(s,r)},e.prototype.saturate=function(t,r){t===void 0&&(t=0);var n=t*2/3+1,o=(n-1)*-.5,s=[n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.sepia=function(t){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.technicolor=function(t){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.polaroid=function(t){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.toBGR=function(t){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.kodachrome=function(t){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.browni=function(t){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.vintage=function(t){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.colorTone=function(t,r,n,o,s){t=t||.2,r=r||.15,n=n||16770432,o=o||3375104;var a=(n>>16&255)/255,u=(n>>8&255)/255,h=(n&255)/255,l=(o>>16&255)/255,f=(o>>8&255)/255,c=(o&255)/255,d=[.3,.59,.11,0,0,a,u,h,t,0,l,f,c,r,0,a-l,u-f,h-c,0,0];this._loadMatrix(d,s)},e.prototype.night=function(t,r){t=t||.1;var n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.predator=function(t,r){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.lsd=function(t){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e})(Ie);$s.prototype.grayscale=$s.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ks=function(i,e){return Ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Ks(i,e)};function ag(i,e){Ks(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ug=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,hg=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,lg=(function(i){ag(e,i);function e(t,r){var n=this,o=new Et;return t.renderable=!1,n=i.call(this,hg,ug,{mapSampler:t._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=t,n.maskMatrix=o,r==null&&(r=20),n.scale=new Rt(r,r),n}return e.prototype.apply=function(t,r,n,o){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),u=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&u!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/u,this.uniforms.rotation[3]=s.d/u),t.applyFilter(this,r,n,o)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e})(Ie);/*!
 * @pixi/filter-fxaa - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Zs=function(i,e){return Zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Zs(i,e)};function fg(i,e){Zs(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var cg=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,dg=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,pg=(function(i){fg(e,i);function e(){return i.call(this,cg,dg)||this}return e})(Ie);/*!
 * @pixi/filter-noise - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Js=function(i,e){return Js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Js(i,e)};function vg(i,e){Js(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yg=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,mg=(function(i){vg(e,i);function e(t,r){t===void 0&&(t=.5),r===void 0&&(r=Math.random());var n=i.call(this,Xa,yg,{uNoise:0,uSeed:0})||this;return n.noise=t,n.seed=r,n}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e})(Ie);/*!
 * @pixi/mixin-cache-as-bitmap - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zc=new Et;Ct.prototype._cacheAsBitmap=!1;Ct.prototype._cacheData=null;var gg=(function(){function i(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return i})();Object.defineProperties(Ct.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){if(this._cacheAsBitmap!==i){this._cacheAsBitmap=i;var e;i?(this._cacheData||(this._cacheData=new gg),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});Ct.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};Ct.prototype._initCachedDisplayObject=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.alpha;this.alpha=1,e.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;r.pad(n)}r.ceil(nt.RESOLUTION);var o=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),a=e.renderTexture.destinationFrame.clone(),u=e.projection.transform,h=tr.create({width:r.width,height:r.height}),l="cacheAsBitmap_"+Qe();this._cacheData.textureCacheId=l,_t.addToCache(h.baseTexture,l),ut.addToCache(h,l);var f=this.transform.localTransform.copyTo(Zc).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,h,!0,f,!1),e.projection.transform=u,e.renderTexture.bind(o,s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new or(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(r.x/r.width),c.anchor.y=-(r.y/r.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}};Ct.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};Ct.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=e.context,o=e._projTransform;t.ceil(nt.RESOLUTION);var s=tr.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+Qe();this._cacheData.textureCacheId=a,_t.addToCache(s.baseTexture,a),ut.addToCache(s,a);var u=Zc;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=t.x,u.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,s,!0,u,!1),e.context=n,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new or(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}};Ct.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ct.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ct.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_t.removeFromCache(this._cacheData.textureCacheId),ut.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ct.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ct.prototype.name=null;Ut.prototype.getChildByName=function(e,t){for(var r=0,n=this.children.length;r<n;r++)if(this.children[r].name===e)return this.children[r];if(t)for(var r=0,n=this.children.length;r<n;r++){var o=this.children[r];if(o.getChildByName){var s=this.children[r].getChildByName(e,!0);if(s)return s}}return null};/*!
 * @pixi/mixin-get-global-position - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ct.prototype.getGlobalPosition=function(e,t){return e===void 0&&(e=new Rt),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/mesh-extras - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qs=function(i,e){return Qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Qs(i,e)};function Dr(i,e){Qs(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Jc=(function(i){Dr(e,i);function e(t,r,n,o){t===void 0&&(t=100),r===void 0&&(r=100),n===void 0&&(n=10),o===void 0&&(o=10);var s=i.call(this)||this;return s.segWidth=n,s.segHeight=o,s.width=t,s.height=r,s.build(),s}return e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],n=[],o=[],s=this.segWidth-1,a=this.segHeight-1,u=this.width/s,h=this.height/a,l=0;l<t;l++){var f=l%this.segWidth,c=l/this.segWidth|0;r.push(f*u,c*h),n.push(f/s,c/a)}for(var d=s*a,l=0;l<d;l++){var v=l%s,m=l/s|0,y=m*this.segWidth+v,x=m*this.segWidth+v+1,C=(m+1)*this.segWidth+v,P=(m+1)*this.segWidth+v+1;o.push(y,x,C,x,P,C)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e})(yi),Qc=(function(i){Dr(e,i);function e(t,r,n){t===void 0&&(t=200),n===void 0&&(n=0);var o=i.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return o.points=r,o._width=t,o.textureScale=n,o.build(),o}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),o.data=new Uint16Array((t.length-1)*6));var s=n.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var u=0,h=t[0],l=this._width*this.textureScale,f=t.length,c=0;c<f;c++){var d=c*4;if(this.textureScale>0){var v=h.x-t[c].x,m=h.y-t[c].y,y=Math.sqrt(v*v+m*m);h=t[c],u+=y/l}else u=c/(f-1);s[d]=u,s[d+1]=0,s[d+2]=u,s[d+3]=1}for(var x=0,c=0;c<f-1;c++){var d=c*2;a[x++]=d,a[x++]=d+1,a[x++]=d+2,a[x++]=d+2,a[x++]=d+1,a[x++]=d+3}n.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var r=t[0],n,o=0,s=0,a=this.buffers[0].data,u=t.length,h=0;h<u;h++){var l=t[h],f=h*4;h<t.length-1?n=t[h+1]:n=l,s=-(n.x-r.x),o=n.y-r.y;var c=Math.sqrt(o*o+s*s),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=c,s/=c,o*=d,s*=d,a[f]=l.x+o,a[f+1]=l.y+s,a[f+2]=l.x-o,a[f+3]=l.y-s,r=l}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e})(yi),_g=(function(i){Dr(e,i);function e(t,r,n){n===void 0&&(n=0);var o=this,s=new Qc(t.height,r,n),a=new vi(t);return n>0&&(t.baseTexture.wrapMode=se.REPEAT),o=i.call(this,s,a)||this,o.autoUpdate=!0,o}return e.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),i.prototype._render.call(this,t)},e})(Sr),td=(function(i){Dr(e,i);function e(t,r,n){var o=this,s=new Jc(t.width,t.height,r,n),a=new vi(ut.WHITE);return o=i.call(this,s,a)||this,o.texture=t,o}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),i.prototype.destroy.call(this,t)},e})(Sr),xg=(function(i){Dr(e,i);function e(t,r,n,o,s){t===void 0&&(t=ut.EMPTY);var a=this,u=new yi(r,n,o);u.getBuffer("aVertexPosition").static=!1;var h=new vi(t);return a=i.call(this,u,h,null,s)||this,a.autoUpdate=!0,a}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,t)},e})(Sr),Xi=10,bg=(function(i){Dr(e,i);function e(t,r,n,o,s){r===void 0&&(r=Xi),n===void 0&&(n=Xi),o===void 0&&(o=Xi),s===void 0&&(s=Xi);var a=i.call(this,ut.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=r,a._rightWidth=o,a._topHeight=n,a._bottomHeight=s,a.texture=t,a}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,o=this._height>n?1:this._height/n,s=Math.min(r,o);return s},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,o=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=o*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e})(td);/*!
 * @pixi/sprite-animated - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ta=function(i,e){return ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},ta(i,e)};function wg(i,e){ta(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Tg=(function(i){wg(e,i);function e(t,r){r===void 0&&(r=!0);var n=i.call(this,t[0]instanceof ut?t[0]:t[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=t,n}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ot.shared.add(this.update,this,he.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var r=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=r/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),i.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(ut.from(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(ut.from(t[n]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ut)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e})(or);/*!
 * pixi.js - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ea=function(i,e){return ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},ea(i,e)};function Il(i,e){ea(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var tt="5.0.0";function Eg(){var i=this;Object.defineProperties(i,{SVG_SIZE:{get:function(){return W(tt,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),i.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return W(tt,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),i.Transform}},TransformBase:{get:function(){return W(tt,"PIXI.TransformBase class has been removed, use PIXI.Transform"),i.Transform}},TRANSFORM_MODE:{get:function(){return W(tt,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return W(tt,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),i.Renderer}},CanvasRenderTarget:{get:function(){return W(tt,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),i.utils.CanvasRenderTarget}},loader:{get:function(){return W(tt,"PIXI.loader instance has moved to PIXI.Loader.shared"),i.Loader.shared}},FilterManager:{get:function(){return W(tt,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),i.systems.FilterSystem}},CanvasTinter:{get:function(){return W("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),i.canvasUtils}},GroupD8:{get:function(){return W("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),i.groupD8}}}),i.accessibility={},Object.defineProperties(i.accessibility,{AccessibilityManager:{get:function(){return W("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),i.AccessibilityManager}}}),i.interaction={},Object.defineProperties(i.interaction,{InteractionManager:{get:function(){return W("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),i.InteractionManager}},InteractionData:{get:function(){return W("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),i.InteractionData}},InteractionEvent:{get:function(){return W("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),i.InteractionEvent}}}),i.prepare={},Object.defineProperties(i.prepare,{BasePrepare:{get:function(){return W("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),i.BasePrepare}},Prepare:{get:function(){return W("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),i.Prepare}},CanvasPrepare:{get:function(){return W("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),i.CanvasPrepare}}}),i.extract={},Object.defineProperties(i.extract,{Extract:{get:function(){return W("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),i.Extract}},CanvasExtract:{get:function(){return W("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),i.CanvasExtract}}}),i.extras={},Object.defineProperties(i.extras,{TilingSprite:{get:function(){return W(tt,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),i.TilingSprite}},TilingSpriteRenderer:{get:function(){return W(tt,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),i.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return W(tt,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),i.AnimatedSprite}},BitmapText:{get:function(){return W(tt,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),i.BitmapText}}}),i.TilingSprite.fromFrame=function(c,d,v){return W("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),i.TilingSprite.from(c,{width:d,height:v})},i.TilingSprite.fromImage=function(c,d,v,m){return m===void 0&&(m={}),W("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),m&&typeof m!="object"&&(m={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),m.width=d,m.height=v,i.TilingSprite.from(c,m)},Object.defineProperties(i.utils,{getSvgSize:{get:function(){return W(tt,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),i.resources.SVGResource.getSize}}}),i.mesh={},Object.defineProperties(i.mesh,{Mesh:{get:function(){return W(tt,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),i.SimpleMesh}},NineSlicePlane:{get:function(){return W(tt,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),i.NineSlicePlane}},Plane:{get:function(){return W(tt,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),i.SimplePlane}},Rope:{get:function(){return W(tt,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),i.SimpleRope}},RawMesh:{get:function(){return W(tt,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),i.Mesh}},CanvasMeshRenderer:{get:function(){return W(tt,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),i.CanvasMeshRenderer}},MeshRenderer:{get:function(){return W(tt,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),i.MeshRenderer}}}),i.particles={},Object.defineProperties(i.particles,{ParticleContainer:{get:function(){return W(tt,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),i.ParticleContainer}},ParticleRenderer:{get:function(){return W(tt,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),i.ParticleRenderer}}}),i.ticker={},Object.defineProperties(i.ticker,{Ticker:{get:function(){return W(tt,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),i.Ticker}},shared:{get:function(){return W(tt,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),i.Ticker.shared}}}),i.loaders={},Object.defineProperties(i.loaders,{Loader:{get:function(){return W(tt,"PIXI.loaders.Loader class has moved to PIXI.Loader"),i.Loader}},Resource:{get:function(){return W(tt,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),i.LoaderResource}},bitmapFontParser:{get:function(){return W(tt,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),i.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){W(tt,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return W(tt,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),i.SpritesheetLoader.use}},getResourcePath:{get:function(){return W(tt,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),i.SpritesheetLoader.getResourcePath}}}),i.Loader.addPixiMiddleware=function(c){return W(tt,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),i.loaders.Loader.registerPlugin({use:c()})};var e=function(f){return"on"+f.charAt(0).toUpperCase()+f.slice(1)};Object.assign(i.Loader.prototype,{on:function(f){var c=e(f);W(tt,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+c+".add")},once:function(f){var c=e(f);W(tt,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+c+".once")},off:function(f){var c=e(f);W(tt,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+c+".detach")}}),Object.defineProperty(i.extract,"WebGLExtract",{get:function(){return W(tt,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),i.Extract}}),Object.defineProperty(i.prepare,"WebGLPrepare",{get:function(){return W(tt,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),i.Prepare}}),i.Container.prototype._renderWebGL=function(c){W(tt,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(c)},i.Container.prototype.renderWebGL=function(c){W(tt,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(c)},i.DisplayObject.prototype.renderWebGL=function(c){W(tt,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(c)},i.Container.prototype.renderAdvancedWebGL=function(c){W(tt,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(c)},Object.defineProperties(i.settings,{TRANSFORM_MODE:{get:function(){return W(tt,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){W(tt,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var t=i.BaseTexture;t.prototype.loadSource=function(c){W(tt,"PIXI.BaseTexture.loadSource method has been deprecated");var d=i.resources.autoDetectResource(c);d.internal=!0,this.setResource(d),this.update()};var r=!1;Object.defineProperties(t.prototype,{hasLoaded:{get:function(){return W(tt,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var f;return W(tt,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),(f=this.resource)===null||f===void 0?void 0:f.url},set:function(f){W(tt,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=f)}},source:{get:function(){return W(tt,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(f){W(tt,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=f)}},premultiplyAlpha:{get:function(){return W("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(f){W("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}},_id:{get:function(){return r||(W("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),r=!0),this._batchLocation},set:function(f){this._batchLocation=f}}}),t.fromImage=function(c,d,v,m){W(tt,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var y={scale:m,crossorigin:d};return t.from(c,{scaleMode:v,resourceOptions:y})},t.fromCanvas=function(c,d){return W(tt,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),t.from(c,{scaleMode:d})},t.fromSVG=function(c,d,v,m){W(tt,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var y={scale:m,crossorigin:d};return t.from(c,{scaleMode:v,resourceOptions:y})},Object.defineProperties(i.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return W("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(f){W("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}}}),i.Point.prototype.copy=function(c){return W(tt,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(c)},i.ObservablePoint.prototype.copy=function(c){return W(tt,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(c)},i.Rectangle.prototype.copy=function(c){return W(tt,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(c)},i.Matrix.prototype.copy=function(c){return W(tt,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(c)},i.systems.StateSystem.prototype.setState=function(c){return W("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(c)},Object.assign(i.systems.FilterSystem.prototype,{getRenderTarget:function(f,c){return W(tt,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,c)},returnRenderTarget:function(f){W(tt,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(f)},calculateScreenSpaceMatrix:function(f){W(tt,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var c=f.identity(),d=this.activeState,v=d.sourceFrame,m=d.destinationFrame;return c.translate(v.x/m.width,v.y/m.height),c.scale(m.width,m.height),c},calculateNormalizedScreenSpaceMatrix:function(f){W(tt,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var c=this.activeState,d=c.sourceFrame,v=c.destinationFrame,m=f.identity();m.translate(d.x/v.width,d.y/v.height);var y=v.width/d.width,x=v.height/d.height;return m.scale(y,x),m}}),Object.defineProperties(i.RenderTexture.prototype,{sourceFrame:{get:function(){return W(tt,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return W(tt,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var n=(function(f){Il(c,f);function c(d,v,m,y){var x=this;return W(tt,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),x=f.call(this,!0,d,v,m,y)||this,x}return c})(i.filters.BlurFilterPass),o=(function(f){Il(c,f);function c(d,v,m,y){var x=this;return W(tt,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),x=f.call(this,!1,d,v,m,y)||this,x}return c})(i.filters.BlurFilterPass);Object.assign(i.filters,{BlurXFilter:n,BlurYFilter:o});var s=i.Sprite,a=i.Texture,u=i.Graphics;u.prototype.generateCanvasTexture||(u.prototype.generateCanvasTexture=function(){W(tt,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(u.prototype,"graphicsData",{get:function(){return W(tt,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}});function h(f,c,d,v){return W(tt,"PIXI.Sprite."+f+" method is deprecated, use PIXI.Sprite.from"),s.from(c,{resourceOptions:{scale:v,crossorigin:d}})}s.fromImage=h.bind(null,"fromImage"),s.fromSVG=h.bind(null,"fromSVG"),s.fromCanvas=h.bind(null,"fromCanvas"),s.fromVideo=h.bind(null,"fromVideo"),s.fromFrame=h.bind(null,"fromFrame");function l(f,c,d,v){return W(tt,"PIXI.Texture."+f+" method is deprecated, use PIXI.Texture.from"),a.from(c,{resourceOptions:{scale:v,crossorigin:d}})}a.fromImage=l.bind(null,"fromImage"),a.fromSVG=l.bind(null,"fromSVG"),a.fromCanvas=l.bind(null,"fromCanvas"),a.fromVideo=l.bind(null,"fromVideo"),a.fromFrame=l.bind(null,"fromFrame"),Object.defineProperty(i.AbstractRenderer.prototype,"autoResize",{get:function(){return W(tt,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(f){W(tt,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=f}}),Object.defineProperty(i.Renderer.prototype,"textureManager",{get:function(){return W(tt,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),i.utils.mixins={mixin:function(){W(tt,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){W(tt,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){W(tt,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(i.BitmapText.prototype,"font",{get:function(){return W("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(f){if(W("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),!!f){var c={font:f};this._upgradeStyle(c),c.fontSize=c.fontSize||i.BitmapFont.available[c.fontName].size,this._fontName=c.fontName,this._fontSize=c.fontSize,this.dirty=!0}}})}fe.registerPlugin("accessibility",Rf);fe.registerPlugin("extract",Ec);fe.registerPlugin("interaction",Nf);fe.registerPlugin("particle",Oc);fe.registerPlugin("prepare",Gc);fe.registerPlugin("batch",Tc);fe.registerPlugin("tilingSprite",Yc);er.registerPlugin($c);er.registerPlugin(zc);pi.registerPlugin(Lf);pi.registerPlugin(Sc);var Ig="5.3.12",Pg={AlphaFilter:Jm,BlurFilter:ng,BlurFilterPass:qs,ColorMatrixFilter:$s,DisplacementFilter:lg,FXAAFilter:pg,NoiseFilter:mg};const Ag=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return be},AbstractBatchRenderer:xc,AbstractRenderer:yc,AccessibilityManager:Rf,AnimatedSprite:Tg,AppLoaderPlugin:Sc,Application:pi,Attribute:Cs,get BLEND_MODES(){return ot},get BUFFER_BITS(){return oi},BasePrepare:Xc,BaseRenderTexture:ti,BaseTexture:_t,BatchDrawCall:vn,BatchGeometry:Ha,BatchPluginFactory:wc,BatchRenderer:Tc,BatchShaderGenerator:bc,BatchTextureArray:yn,BitmapFont:Ce,BitmapFontData:hi,BitmapFontLoader:$c,BitmapText:$m,Bounds:ui,Buffer:Pt,get CLEAR_MODES(){return Qt},Circle:Pf,Container:Ut,CountLimiter:kc,DEG_TO_RAD:If,get DRAW_MODES(){return zt},DisplayObject:Ct,get ENV(){return ue},Ellipse:Af,Extract:Ec,get FORMATS(){return wr},FillStyle:Ga,Filter:Ie,FilterState:jf,Framebuffer:pn,get GC_MODES(){return cn},GLFramebuffer:$f,GLProgram:fc,GLTexture:Yi,GRAPHICS_CURVES:Pr,Geometry:nr,Graphics:Ln,GraphicsData:Ds,GraphicsGeometry:Dc,IGLUniformData:Xy,InteractionData:Ps,InteractionEvent:Mf,InteractionManager:Nf,InteractionTrackingData:zi,get LINE_CAP(){return me},get LINE_JOIN(){return ye},LineStyle:Uc,Loader:er,LoaderResource:ei,get MASK_TYPES(){return Bt},get MIPMAP_MODES(){return Tr},get MSAA_QUALITY(){return Ze},MaskData:Jf,Matrix:Et,Mesh:Sr,MeshBatchUvs:qc,MeshGeometry:yi,MeshMaterial:vi,NineSlicePlane:bg,ObjectRenderer:Nr,ObservablePoint:qe,PI_2:Er,get PRECISION(){return oe},ParticleContainer:dm,ParticleRenderer:Oc,PlaneGeometry:Jc,Point:Rt,Polygon:gr,Prepare:Gc,Program:Br,Quad:zf,QuadUv:ka,RAD_TO_DEG:Ef,get RENDERER_TYPE(){return br},Rectangle:dt,RenderTexture:tr,RenderTexturePool:Gf,Renderer:fe,RopeGeometry:Qc,RoundedRectangle:Sf,Runner:Mt,get SCALE_MODES(){return ne},get SHAPES(){return Tt},Shader:Te,SimpleMesh:xg,SimplePlane:td,SimpleRope:_g,Sprite:or,SpriteMaskFilter:nc,Spritesheet:Vc,SpritesheetLoader:zc,State:Fe,System:Ht,get TARGETS(){return Re},get TEXT_GRADIENT(){return Ar},get TYPES(){return At},TemporaryDisplayObject:Ma,Text:za,TextMetrics:Kt,TextStyle:rr,Texture:ut,TextureLoader:Ac,TextureMatrix:On,TextureUvs:Ua,Ticker:Ot,TickerPlugin:Lf,TilingSprite:Um,TilingSpriteRenderer:Yc,TimeLimiter:Dm,Transform:Ra,get UPDATE_PRIORITY(){return he},UniformGroup:Le,VERSION:Ig,ViewableBuffer:_c,get WRAP_MODES(){return se},accessibleTarget:Of,autoDetectRenderer:mc,checkMaxIfStatementsInShader:ic,defaultFilterVertex:Xa,defaultVertex:gc,filters:Pg,graphicsUtils:gm,groupD8:wt,interactiveTarget:Ff,isMobile:$t,resources:Hf,settings:nt,systems:Wy,uniformParsers:ji,useDeprecated:Eg,utils:ry},Symbol.toStringTag,{value:"Module"}));var pt;(function(i){var e=(function(){function t(r){this.tileAnim=[0,0],this.dontUseTransform=!1,this.renderer=r,this.tileAnim=[0,0]}return t})();i.CanvasTileRenderer=e})(pt||(pt={}));var _e=(function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pt;(function(i){var e=(function(t){_e(r,t);function r(n,o,s){var a=t.call(this)||this;return a.modificationMarker=0,a.shadowColor=new Float32Array([0,0,0,.5]),a._globalMat=null,a.initialize.apply(a,arguments),a}return r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},r.prototype.initialize=function(n,o,s){s===!0&&(s=0),this.z=this.zIndex=n,this.texPerChild=s||i.Constant.boundCountPerBuffer*i.Constant.maxTextures,o&&this.setBitmaps(o)},r.prototype.setBitmaps=function(n){var o=this.texPerChild,s=this.children.length,a=Math.ceil(n.length/o),u;for(u=0;u<s;u++)this.children[u].textures=n.slice(u*o,(u+1)*o);for(u=s;u<a;u++){var h=new i.RectTileLayer(this.zIndex,n.slice(u*o,(u+1)*o));h.compositeParent=!0,h.offsetX=i.Constant.boundSize,h.offsetY=i.Constant.boundSize,this.addChild(h)}},r.prototype.clear=function(){for(var n=0;n<this.children.length;n++)this.children[n].clear();this.modificationMarker=0},r.prototype.addRect=function(n,o,s,a,u,h,l){var f=n/this.texPerChild>>0,c=n%this.texPerChild;this.children[f]&&this.children[f].textures&&this.children[f].addRect(c,o,s,a,u,h,l)},r.prototype.addFrame=function(n,o,s,a,u){var h,l=null,f=0,c=this.children;if(typeof n=="number"){var d=n/this.texPerChild>>0;if(l=c[d],l)f=n%this.texPerChild;else{if(l=c[0],!l)return!1;f=0}h=l.textures[f]}else{typeof n=="string"?h=ut.from(n):h=n;for(var v=0;v<c.length;v++){for(var m=c[v],y=m.textures,x=0;x<y.length;x++)if(y[x].baseTexture===h.baseTexture){l=m,f=x;break}if(l)break}if(!l){for(var v=0;v<c.length;v++){var m=c[v];if(m.textures.length<this.texPerChild){l=m,f=m.textures.length,m.textures.push(h);break}}l||(l=new i.RectTileLayer(this.zIndex,h),l.compositeParent=!0,l.offsetX=i.Constant.boundSize,l.offsetY=i.Constant.boundSize,c.push(l),f=0)}}return l.addRect(f,h.frame.x,h.frame.y,o,s,h.frame.width,h.frame.height,a,u),!0},r.prototype.renderCanvas=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){var o=n.plugins.tilemap;if(!o.dontUseTransform){var s=this.worldTransform;n.context.setTransform(s.a,s.b,s.c,s.d,s.tx*n.resolution,s.ty*n.resolution)}for(var a=this.children,u=0;u<a.length;u++)a[u].renderCanvasCore(n)}},r.prototype.render=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){var o=n.plugins.tilemap,s=o.getShader();n.batch.setObjectRenderer(o),this._globalMat=s.uniforms.projTransMatrix,n.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),s.uniforms.shadowColor=this.shadowColor,s.uniforms.animationFrame=o.tileAnim,n.shader.bind(s,!1);for(var a=this.children,u=0;u<a.length;u++)a[u].renderWebGLCore(n,o)}},r.prototype.isModified=function(n){var o=this.children;if(this.modificationMarker!==o.length)return!0;for(var s=0;s<o.length;s++)if(o[s].isModified(n))return!0;return!1},r.prototype.clearModify=function(){var n=this.children;this.modificationMarker=n.length;for(var o=0;o<n.length;o++)n[o].clearModify()},r})(Ut);i.CompositeRectTileLayer=e})(pt||(pt={}));var pt;(function(i){i.Constant={maxTextures:4,bufferSize:2048,boundSize:1024,boundCountPerBuffer:4,use32bitIndex:!1,SCALE_MODE:ne.LINEAR,DO_CLEAR:!0}})(pt||(pt={}));var pt;(function(i){(function(e){_e(t,e);function t(r){var n=e.call(this)||this;return n.zIndex=r,n}return t.prototype.renderCanvas=function(r){var n=null;r.plugins.tilemap.dontUseTransform&&(n=this.transform.worldTransform,this.transform.worldTransform=Et.IDENTITY),r.plugins.graphics.render(this),r.plugins.tilemap.dontUseTransform&&(this.transform.worldTransform=n),r.context.globalAlpha=1},t.prototype.isModified=function(r){return!1},t.prototype.clearModify=function(){},t})(Ln)})(pt||(pt={}));var pt;(function(i){var e=(function(t){_e(r,t);function r(n){var o=t.call(this,n.bufferSize,n.bufferSize)||this;o.DO_CLEAR=!1,o.boundSize=0,o._clearBuffer=null,o.baseTex=null,o.boundSprites=[],o.dirties=[];var s=o.boundSprites,a=o.dirties;o.boundSize=n.boundSize;for(var u=0;u<n.boundCountPerBuffer;u++){var h=new or;h.position.x=n.boundSize*(u&1),h.position.y=n.boundSize*(u>>1),s.push(h),a.push(0)}return o.DO_CLEAR=!!n.DO_CLEAR,o}return r.prototype.bind=function(n){if(this.baseTex)throw new Error("Only one baseTexture is allowed for this resource!");this.baseTex=n,t.prototype.bind.call(this,n)},r.prototype.setTexture=function(n,o){var s=this.boundSprites[n];s.texture.baseTexture!==o.baseTexture&&(s.texture=o,this.baseTex.update(),this.dirties[n]=this.baseTex.dirtyId)},r.prototype.upload=function(n,o,s){var a=n.gl,u=this,h=u.width,l=u.height;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),s.dirtyId<0&&(s.width=h,s.height=l,a.texImage2D(o.target,0,o.format,h,l,0,o.format,o.type,null));var f=this.DO_CLEAR;f&&!this._clearBuffer&&(this._clearBuffer=new Uint8Array(i.Constant.boundSize*i.Constant.boundSize*4));for(var c=this.boundSprites,d=0;d<c.length;d++){var v=c[d],m=v.texture.baseTexture;if(!(s.dirtyId>=this.dirties[d])){var y=m.resource;!m.valid||!y||!y.source||(f&&(m.width<this.boundSize||m.height<this.boundSize)&&a.texSubImage2D(o.target,0,v.position.x,v.position.y,this.boundSize,this.boundSize,o.format,o.type,this._clearBuffer),a.texSubImage2D(o.target,0,v.position.x,v.position.y,o.format,o.type,y.source))}}return!0},r})(Hf.Resource);i.MultiTextureResource=e})(pt||(pt={}));var pt;(function(i){var e=(function(t){_e(r,t);function r(n,o){var s=t.call(this)||this;return s.zIndex=0,s.modificationMarker=0,s.shadowColor=new Float32Array([0,0,0,.5]),s._globalMat=null,s.pointsBuf=[],s.hasAnim=!1,s.offsetX=0,s.offsetY=0,s.compositeParent=!1,s.vbId=0,s.vb=null,s.vbBuffer=null,s.vbArray=null,s.vbInts=null,s.initialize(n,o),s}return r.prototype.initialize=function(n,o){o?!(o instanceof Array)&&o.baseTexture&&(o=[o]):o=[],this.textures=o,this.zIndex=n},r.prototype.clear=function(){this.pointsBuf.length=0,this.modificationMarker=0,this.hasAnim=!1},r.prototype.addFrame=function(n,o,s,a,u){var h,l=0;if(typeof n=="number")l=n,h=this.textures[l];else{typeof n=="string"?h=ut.from(n):h=n;for(var f=!1,c=this.textures,d=0;d<c.length;d++)if(c[d].baseTexture===h.baseTexture){l=d,f=!0;break}if(!f)return!1}return this.addRect(l,h.frame.x,h.frame.y,o,s,h.frame.width,h.frame.height,a,u),!0},r.prototype.addRect=function(n,o,s,a,u,h,l,f,c){f===void 0&&(f=0),c===void 0&&(c=0);var d=this.pointsBuf;if(this.hasAnim=this.hasAnim||f>0||c>0,h===l)d.push(o),d.push(s),d.push(a),d.push(u),d.push(h),d.push(l),d.push(f|0),d.push(c|0),d.push(n);else{var v=void 0;if(h%l===0)for(v=0;v<h/l;v++)d.push(o+v*l),d.push(s),d.push(a+v*l),d.push(u),d.push(l),d.push(l),d.push(f|0),d.push(c|0),d.push(n);else if(l%h===0)for(v=0;v<l/h;v++)d.push(o),d.push(s+v*h),d.push(a),d.push(u+v*h),d.push(h),d.push(h),d.push(f|0),d.push(c|0),d.push(n);else d.push(o),d.push(s),d.push(a),d.push(u),d.push(h),d.push(l),d.push(f|0),d.push(c|0),d.push(n)}},r.prototype.renderCanvas=function(n){var o=n.plugins.tilemap;if(!o.dontUseTransform){var s=this.worldTransform;n.context.setTransform(s.a,s.b,s.c,s.d,s.tx*n.resolution,s.ty*n.resolution)}this.renderCanvasCore(n)},r.prototype.renderCanvasCore=function(n){if(this.textures.length!==0){var o=this.pointsBuf;n.context.fillStyle="#000000";for(var s=0,a=o.length;s<a;s+=9){var u=o[s],h=o[s+1],l=o[s+2],f=o[s+3],c=o[s+4],d=o[s+5];u+=o[s+6]*n.plugins.tilemap.tileAnim[0],h+=o[s+7]*n.plugins.tilemap.tileAnim[1];var v=o[s+8];v>=0?n.context.drawImage(this.textures[v].baseTexture.source,u,h,c,d,l,f,c,d):(n.context.globalAlpha=.5,n.context.fillRect(l,f,c,d),n.context.globalAlpha=1)}}},r.prototype.destroyVb=function(){this.vb&&(this.vb.destroy(),this.vb=null)},r.prototype.render=function(n){var o=n.plugins.tilemap,s=o.getShader();n.batch.setObjectRenderer(o),this._globalMat=s.uniforms.projTransMatrix,n.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),s.uniforms.shadowColor=this.shadowColor,s.uniforms.animationFrame=o.tileAnim,n.shader.bind(s,!1),this.renderWebGLCore(n,o)},r.prototype.renderWebGLCore=function(n,o){var s=this.pointsBuf;if(s.length!==0){var a=s.length/9,u=o.getShader(),h=this.textures;if(h.length!==0){o.bindTextures(n,u,h);var l=this.vb;l||(l=o.createVb(),this.vb=l,this.vbId=l.id,this.vbBuffer=null,this.modificationMarker=0),o.checkIndexBuffer(a,l);var f=i.Constant.boundCountPerBuffer,c=l.getBuffer("aVertexPosition"),d=a*l.vertPerQuad;if(d!==0){if(this.modificationMarker!==d){this.modificationMarker=d;var v=l.stride*d;if(!this.vbBuffer||this.vbBuffer.byteLength<v){for(var m=l.stride;m<v;)m*=2;this.vbBuffer=new ArrayBuffer(m),this.vbArray=new Float32Array(this.vbBuffer),this.vbInts=new Uint32Array(this.vbBuffer),c.update(this.vbBuffer)}var y=this.vbArray;this.vbInts;for(var x=0,C=0,P=this.offsetX,F=this.offsetY,w=0;w<s.length;w+=9){var R=.5;this.compositeParent&&(f>1?(C=s[w+8]>>2,P=this.offsetX*(s[w+8]&1),F=this.offsetY*(s[w+8]>>1&1)):(C=s[w+8],P=0,F=0));var A=s[w+2],H=s[w+3],O=s[w+4],N=s[w+5],G=s[w]+P,B=s[w+1]+F,K=s[w+6],Q=s[w+7];y[x++]=A,y[x++]=H,y[x++]=G,y[x++]=B,y[x++]=G+R,y[x++]=B+R,y[x++]=G+O-R,y[x++]=B+N-R,y[x++]=K,y[x++]=Q,y[x++]=C,y[x++]=A+O,y[x++]=H,y[x++]=G+O,y[x++]=B,y[x++]=G+R,y[x++]=B+R,y[x++]=G+O-R,y[x++]=B+N-R,y[x++]=K,y[x++]=Q,y[x++]=C,y[x++]=A+O,y[x++]=H+N,y[x++]=G+O,y[x++]=B+N,y[x++]=G+R,y[x++]=B+R,y[x++]=G+O-R,y[x++]=B+N-R,y[x++]=K,y[x++]=Q,y[x++]=C,y[x++]=A,y[x++]=H+N,y[x++]=G,y[x++]=B+N,y[x++]=G+R,y[x++]=B+R,y[x++]=G+O-R,y[x++]=B+N-R,y[x++]=K,y[x++]=Q,y[x++]=C}c.update(y)}n.geometry.bind(l,u),n.geometry.draw(zt.TRIANGLES,a*6,0)}}}},r.prototype.isModified=function(n){return!!(this.modificationMarker!==this.pointsBuf.length||n&&this.hasAnim)},r.prototype.clearModify=function(){this.modificationMarker=this.pointsBuf.length},r.prototype.destroy=function(n){t.prototype.destroy.call(this,n),this.destroyVb()},r})(Ut);i.RectTileLayer=e})(pt||(pt={}));var pt;(function(i){var e=`
varying vec2 vTextureCoord;
varying vec4 vFrame;
varying float vTextureId;
uniform vec4 shadowColor;
uniform sampler2D uSamplers[%count%];
uniform vec2 uSamplerSize[%count%];

void main(void){
   vec2 textureCoord = clamp(vTextureCoord, vFrame.xy, vFrame.zw);
   float textureId = floor(vTextureId + 0.5);

   vec4 color;
   %forloop%
   gl_FragColor = color;
}
`,t=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aFrame;
attribute vec2 aAnim;
attribute float aTextureId;

uniform mat3 projTransMatrix;
uniform vec2 animationFrame;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vFrame;

void main(void){
   gl_Position = vec4((projTransMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vec2 anim = aAnim * animationFrame;
   vTextureCoord = aTextureCoord + anim;
   vFrame = aFrame + vec4(anim, anim);
   vTextureId = aTextureId;
}
`,r=(function(s){_e(a,s);function a(u,h,l){var f=s.call(this,new Br(h,l),{animationFrame:new Float32Array(2),uSamplers:[],uSamplerSize:[],projTransMatrix:new Et})||this;return f.maxTextures=0,f.maxTextures=u,i.shaderGenerator.fillSamplers(f,f.maxTextures),f}return a})(Te);i.TilemapShader=r;var n=(function(s){_e(a,s);function a(u){var h=s.call(this,u,t,i.shaderGenerator.generateFragmentSrc(u,e))||this;return i.shaderGenerator.fillSamplers(h,h.maxTextures),h}return a})(r);i.RectTileShader=n;var o=(function(s){_e(a,s);function a(){var u=s.call(this)||this;u.vertSize=11,u.vertPerQuad=4,u.stride=u.vertSize*4,u.lastTimeAccess=0;var h=u.buf=new Pt(new Float32Array(2),!0,!1);return u.addAttribute("aVertexPosition",h,0,!1,0,u.stride,0).addAttribute("aTextureCoord",h,0,!1,0,u.stride,8).addAttribute("aFrame",h,0,!1,0,u.stride,16).addAttribute("aAnim",h,0,!1,0,u.stride,32).addAttribute("aTextureId",h,0,!1,0,u.stride,40),u}return a})(nr);i.RectTileGeom=o})(pt||(pt={}));var pt;(function(i){var e=(function(t){_e(r,t);function r(n){var o=t.call(this,n)||this;return o.sn=-1,o.indexBuffer=null,o.ibLen=0,o.tileAnim=[0,0],o.texLoc=[],o.texResources=[],o.rectShader=new i.RectTileShader(i.Constant.maxTextures),o.indexBuffer=new Pt(void 0,!0,!0),o.checkIndexBuffer(2e3),o.initBounds(),o}return r.prototype.initBounds=function(){if(!(i.Constant.boundCountPerBuffer<=1))for(var n=i.Constant.maxTextures,o=0;o<n;o++){var s=new i.MultiTextureResource(i.Constant),a=new _t(s);a.scaleMode=i.Constant.SCALE_MODE,a.wrapMode=se.CLAMP,this.texResources.push(s)}},r.prototype.bindTexturesWithoutRT=function(n,o,s){var a=o.uniforms.uSamplerSize;this.texLoc.length=0;for(var u=0;u<s.length;u++){var h=s[u];if(!h||!h.valid)return;n.texture.bind(s[u],u),a[u*2]=1/s[u].baseTexture.width,a[u*2+1]=1/s[u].baseTexture.height}o.uniforms.uSamplerSize=a},r.prototype.bindTextures=function(n,o,s){var a=s.length,u=i.Constant.maxTextures;if(!(a>i.Constant.boundCountPerBuffer*u)){if(i.Constant.boundCountPerBuffer<=1){this.bindTexturesWithoutRT(n,o,s);return}for(var h=0;h<a;h++){var l=s[h];if(!(!l||!l.valid)){var f=this.texResources[h>>2];f.setTexture(h&3,l)}}var c=h+3>>2;for(h=0;h<c;h++)n.texture.bind(this.texResources[h].baseTex,h)}},r.prototype.start=function(){},r.prototype.createVb=function(){var n=new i.RectTileGeom;return n.addIndex(this.indexBuffer),n.lastTimeAccess=Date.now(),n},r.prototype.checkIndexBuffer=function(n,o){var s=n*6;s<=this.ibLen||(this.ibLen=s,this.indexBuffer.update(Oa(n,i.Constant.use32bitIndex)))},r.prototype.getShader=function(){return this.rectShader},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.rectShader=null},r})(Nr);i.TileRenderer=e,fe.registerPlugin("tilemap",e)})(pt||(pt={}));var pt;(function(i){var e=(function(t){_e(r,t);function r(n,o){var s=t.call(this)||this;return s._lastAnimationFrame=-1,s.tilemap=n,s.z=o,s}return r.prototype.clear=function(){for(var n=this.children,o=0;o<n.length;o++)n[o].clear();this._previousLayers=0},r.prototype.cacheIfDirty=function(){var n=this.tilemap,o=this.children,s=this._previousLayers!==o.length;this._previousLayers=o.length;var a=this.canvasBuffer,u=this._tempRender;a||(a=this.canvasBuffer=document.createElement("canvas"),u=this._tempRender=new(void 0)(100,100,{view:a}),u.context=u.rootContext,u.plugins.tilemap.dontUseTransform=!0),(a.width!==n._layerWidth||a.height!==n._layerHeight)&&(a.width=n._layerWidth,a.height=n._layerHeight,s=!0);var h;if(!s){for(h=0;h<o.length;h++)if(o[h].isModified(this._lastAnimationFrame!==n.animationFrame)){s=!0;break}}if(this._lastAnimationFrame=n.animationFrame,s)for(n._hackRenderer&&n._hackRenderer(u),u.context.clearRect(0,0,a.width,a.height),h=0;h<o.length;h++)o[h].clearModify(),o[h].renderCanvas(u);for(this.layerTransform=this.worldTransform,h=0;h<o.length;h++){this.layerTransform=o[h].worldTransform;break}},r.prototype.renderCanvas=function(n){this.cacheIfDirty();var o=this.layerTransform;n.context.setTransform(o.a,o.b,o.c,o.d,o.tx*n.resolution,o.ty*n.resolution),this.tilemap,n.context.drawImage(this.canvasBuffer,0,0)},r})(Ut);i.ZLayer=e})(pt||(pt={}));const Sg=i=>(i&&Object.isExtensible(i)&&!i.tilemap&&(i.tilemap=pt),pt);var pt;(function(i){(function(e){function t(o,s){for(var a=[],u=0;u<s;u++)a[u]=u;o.uniforms.uSamplers=a;for(var h=[],u=0;u<s;u++)h.push(1/i.Constant.bufferSize),h.push(1/i.Constant.bufferSize);o.uniforms.uSamplerSize=h}e.fillSamplers=t;function r(o,s){return s.replace(/%count%/gi,o+"").replace(/%forloop%/gi,this.generateSampleSrc(o))}e.generateFragmentSrc=r;function n(o){var s="";s+=`
`,s+=`
`,s+="if(vTextureId <= -1.0) {",s+=`
	color = shadowColor;`,s+=`
}`;for(var a=0;a<o;a++)s+=`
else `,a<o-1&&(s+="if(textureId == "+a+".0)"),s+=`
{`,s+=`
	color = texture2D(uSamplers[`+a+"], textureCoord * uSamplerSize["+a+"]);",s+=`
}`;return s+=`
`,s+=`
`,s}e.generateSampleSrc=n})(i.shaderGenerator||(i.shaderGenerator={}))})(pt||(pt={}));const J={...Ag};Sg(J);J.settings&&(J.settings.CREATE_IMAGE_BITMAP=!1,J.SCALE_MODES&&(J.settings.SCALE_MODE=J.SCALE_MODES.NEAREST));typeof window<"u"&&(window.PIXI=J);var Wi={exports:{}},Cg=Wi.exports,Pl;function Og(){return Pl||(Pl=1,(function(i,e){(function(t,r){i.exports=r()})(Cg,function(){var t=function(){function r(d){return s.appendChild(d.dom),d}function n(d){for(var v=0;v<s.children.length;v++)s.children[v].style.display=v===d?"block":"none";o=d}var o=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(d){d.preventDefault(),n(++o%s.children.length)},!1);var a=(performance||Date).now(),u=a,h=0,l=r(new t.Panel("FPS","#0ff","#002")),f=r(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=r(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:s,addPanel:r,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){h++;var d=(performance||Date).now();if(f.update(d-a,200),d>u+1e3&&(l.update(1e3*h/(d-u),100),u=d,h=0,c)){var v=performance.memory;c.update(v.usedJSHeapSize/1048576,v.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:s,setMode:n}};return t.Panel=function(r,n,o){var s=1/0,a=0,u=Math.round,h=u(window.devicePixelRatio||1),l=80*h,f=48*h,c=3*h,d=2*h,v=3*h,m=15*h,y=74*h,x=30*h,C=document.createElement("canvas");C.width=l,C.height=f,C.style.cssText="width:80px;height:48px";var P=C.getContext("2d");return P.font="bold "+9*h+"px Helvetica,Arial,sans-serif",P.textBaseline="top",P.fillStyle=o,P.fillRect(0,0,l,f),P.fillStyle=n,P.fillText(r,c,d),P.fillRect(v,m,y,x),P.fillStyle=o,P.globalAlpha=.9,P.fillRect(v,m,y,x),{dom:C,update:function(F,w){s=Math.min(s,F),a=Math.max(a,F),P.fillStyle=o,P.globalAlpha=1,P.fillRect(0,0,l,m),P.fillStyle=n,P.fillText(u(F)+" "+r+" ("+u(s)+"-"+u(a)+")",c,d),P.drawImage(C,v+h,m,y-h,x,v,m,y-h,x),P.fillRect(v+y-h,m,h,x),P.fillStyle=o,P.globalAlpha=.9,P.fillRect(v+y-h,m,h,u((1-F/w)*x))}}},t})})(Wi)),Wi.exports}var Rg=Og();const Lg=Lr(Rg),$i=1024,Ki=768,Al=.5,Sl=.8,Oe=2,ed=200,rd=201,id=202,nd=203,Mg=1,He=-1,Fg=650,Ng=5,od=40,ra=1,gn=2,mi=3,Ya=0,te=1,Bg=2,ia=3,pe=4,Dg=2,Ug=160,kg=80,Yt=0,Ke=1,Cl=2,_r=300,Zi=412,Ji=409,Qi=403,tn=402,en=404,na=405,oa=401,sd=112,ad=109,ud=103,hd=102,ld=104,fd=105,cd=105,Xg=1,Hg=2,Gg=3,Vg=4,zg=8,_n=9,Ol=10,Rl=11,jg=12,Yg=[{id:_r,parentid:0},{id:Zi,parentid:_r},{id:Ji,parentid:_r},{id:Qi,parentid:Zi},{id:tn,parentid:Ji},{id:en,parentid:Qi},{id:na,parentid:en},{id:oa,parentid:tn},{id:sd,parentid:Zi},{id:ad,parentid:Ji},{id:ud,parentid:Qi},{id:hd,parentid:tn},{id:ld,parentid:en},{id:fd,parentid:na},{id:cd,parentid:oa}],We={CAN_BUILD_HOUSE:{ICON:0,IMAGE:ia,TYPE:_r,LABEL:"Housing"},CAN_BUILD_LASER_RESEARCH:{ICON:1,TYPE:Zi,IMAGE:pe,LABEL:"Laser Research"},CAN_BUILD_TURRET_RESEARCH:{ICON:10,TYPE:Ji,IMAGE:pe,LABEL:"Turret Research"},CAN_BUILD_BOMB_RESEARCH:{ICON:4,TYPE:Qi,IMAGE:pe,LABEL:"Bomb Research"},CAN_BUILD_MEDKIT_RESEARCH:{ICON:3,TYPE:tn,IMAGE:pe,LABEL:"Medkit Research"},CAN_BUILD_MINE_RESEARCH:{ICON:5,TYPE:en,IMAGE:pe,LABEL:"Mine Research"},CAN_BUILD_ORB_RESEARCH:{ICON:6,TYPE:na,IMAGE:pe,LABEL:"Orb Research"},CAN_BUILD_COUGAR_RESEARCH:{ICON:2,TYPE:oa,IMAGE:pe,LABEL:"Cougar Research"},CAN_BUILD_LASER_FACTORY:{ICON:1,TYPE:sd,IMAGE:te,LABEL:"Laser Factory"},CAN_BUILD_TURRET_FACTORY:{ICON:10,TYPE:ad,IMAGE:te,LABEL:"Turret Factory"},CAN_BUILD_BOMB_FACTORY:{ICON:4,TYPE:ud,IMAGE:te,LABEL:"Bomb Factory"},CAN_BUILD_MEDKIT_FACTORY:{ICON:3,TYPE:hd,IMAGE:te,LABEL:"Medkit Factory"},CAN_BUILD_MINE_FACTORY:{ICON:3,TYPE:ld,IMAGE:te,LABEL:"Mine Factory"},CAN_BUILD_ORB_FACTORY:{ICON:6,TYPE:fd,IMAGE:te,LABEL:"Orb Factory"},CAN_BUILD_COUGAR_FACTORY:{ICON:2,TYPE:cd,IMAGE:te,LABEL:"Cougar Factory"}};function qg(i){for(var e=0;e<512;e++){i.map[e]=[];for(var t=0;t<512;t++)i.map[e][t]=0}}function Wg(i){for(var e=0;e<512;e++){i.tiles[e]=[];for(var t=0;t<512;t++)i.tiles[e][t]=0}}function $g(i,e){for(var t=new Uint8Array(e),r=0;r<=511;r++)for(var n=0;n<=511;n++)i.map[r][n]=t[r+n*512];for(var n=0;n<i.map.length;n++)for(var r=0;r<i.map.length;r++)if(i.map[r][n]==mi)i.buildingFactory.newBuilding(null,r,n,Ya,{notifyServer:!1,city:0,updateCity:!1,itemsLeft:0});else if(i.map[r][n]==ra||i.map[r][n]==gn){var o=i.map[r][n];if(o==ra||o==gn){var s=(r==0||i.map[r-1][n]!=o)|0,a=(r==511||i.map[r+1][n]!=o)|0,u=(r==0||i.map[r][n-1]!=o)|0,h=(n==511||i.map[r][n+1]!=o)|0;i.tiles[r][n]=(s+a*2+h*4+u*8)*48}}}const Kg=(i,e)=>{qg(i),Wg(i),$g(i,e)};var Zg={canBuild:{CAN_BUILD_HOUSE:Ke,CAN_BUILD_LASER_RESEARCH:Ke,CAN_BUILD_TURRET_RESEARCH:Ke,CAN_BUILD_BOMB_RESEARCH:Yt,CAN_BUILD_MEDKIT_RESEARCH:Yt,CAN_BUILD_MINE_RESEARCH:Yt,CAN_BUILD_ORB_RESEARCH:Yt,CAN_BUILD_COUGAR_RESEARCH:Yt,CAN_BUILD_LASER_FACTORY:Yt,CAN_BUILD_TURRET_FACTORY:Yt,CAN_BUILD_BOMB_FACTORY:Yt,CAN_BUILD_MEDKIT_FACTORY:Yt,CAN_BUILD_MINE_FACTORY:Yt,CAN_BUILD_ORB_FACTORY:Yt,CAN_BUILD_COUGAR_FACTORY:Yt}};function Jg(i){for(var e=0;e<i.map.length;e++)for(var t=0;t<i.map.length;t++)if(i.map[t][e]==mi){var r=Object.assign({},Zg);r.id=t,r.x=t*48,r.y=e*48,i.cities.push(r)}}const Qg=i=>{Jg(i)},Cr=(t,r)=>{var t=Object.assign({},t),r=Object.assign({},r);return t.w+=t.x,t.h+=t.y,r.w+=r.x,r.h+=r.y,!(t.w<=r.x||r.w<=t.x||t.h<=r.y||r.h<=t.y)},dd=i=>i.x<0?ed:i.x>510*48?rd:i.y<0?id:i.y>510*48?nd:!1,pd=(i,e)=>{for(var t=i.itemFactory.getHead();t;){console.log("Checking item collision");var r={x:t.x,y:t.y,w:48,h:48};if(console.log(r),Cr(e,r))return Oe;t=t.next}return!1},vd=(i,e)=>{var t=i.map,r=Math.floor(e.x/48),n=Math.floor((e.x+e.w)/48),o=Math.floor(e.y/48),s=Math.floor((e.y+e.h)/48);if(r&&n&&o&&s)try{if(t[r][o]!=0&&t[r][o]!=3||t[r][s]!=0&&t[r][s]!=3||t[n][o]!=0&&t[n][o]!=3||t[n][s]!=0&&t[n][s]!=3)return Oe}catch{console.error("Invalid map reference")}return!1},Or=i=>{var e=8;return{x:parseInt(i.offset.x+e),y:parseInt(i.offset.y+e),w:48-e-e,h:48-e-e}};var t_=(i,e)=>{for(var t=i.buildingFactory.getHead();t;){var r={x:t.x*48,y:t.y*48,w:144,h:144};if((t.type==0||parseInt(t.type/100)==1)&&(r.h=r.h-48),Cr(e,r))return Oe;t=t.next}return!1};const Ll=i=>{var e=Or(i.player),t=dd(e);return t||(t=vd(i,e)),t||(t=t_(i,e)),t||(t=pd(i,e)),t};var e_=i=>{i.tick>i.player.timeTurn&&(i.player.direction+=i.player.isTurning,i.player.direction<0&&(i.player.direction=31),i.player.direction>31&&(i.player.direction=0),i.player.timeTurn=i.tick+50)},r_=i=>{var e=-i.player.direction,t=Math.sin(e/16*3.14)*i.player.isMoving*(i.timePassed*Al);t>20&&(t=20),t<-20&&(t=-20);var r=i.player.offset.x;switch(i.player.offset.x+=t,Ll(i)){case ed:i.player.offset.x=0;break;case rd:i.player.offset.x=511*48;break;case Oe:console.log("blocking"),i.player.offset.x=r;break}t=Math.cos(e/16*3.14)*i.player.isMoving*(i.timePassed*Al),t>20&&(t=20),t<-20&&(t=-20);var r=i.player.offset.y;switch(i.player.offset.y+=t,Ll(i)){case id:i.player.offset.y=0;break;case nd:i.player.offset.y=511*48;break;case Oe:console.log("blocking y"),i.player.offset.y=r;break}},i_=i=>{i.player.offset.x=0,i.player.offset.y=0};const n_=i=>{i.player.isTurning&&e_(i),i.player.isMoving&&r_(i),i.player.health===0&&i_(i)};var Ml=0,de=i=>{var e={};return e.code=i,e.isDown=!1,e.isUp=!0,e.press=void 0,e.release=void 0,e.downHandler=function(t){t.keyCode===e.code&&(e.isUp&&e.press&&e.press(),e.isDown=!0,e.isUp=!1),t.preventDefault()},e.upHandler=function(t){t.keyCode===e.code&&(e.isDown&&e.release&&e.release(),e.isDown=!1,e.isUp=!0),t.preventDefault()},window.addEventListener("keydown",e.downHandler.bind(e),!1),window.addEventListener("keyup",e.upHandler.bind(e),!1),e};const o_=i=>{var e=de(37),t=de(38),r=de(39),n=de(40),o=de(16),s=de(85);de(79);var a=de(68),u=de(83);e.press=function(){i.player.isTurning=-1},e.release=function(){i.player.isTurning=0},r.press=function(){i.player.isTurning=1},r.release=function(){i.player.isTurning=0},t.press=function(){i.player.isMoving=-1},t.release=function(){i.player.isMoving=0},n.press=function(){i.player.isMoving=1},n.release=function(){i.player.isMoving=0},s.press=function(){i.iconFactory.pickupIcon()},u.press=function(){console.log("Generating building output"),i.buildingFactory.outputBuildings()},a.press=function(){var h=i.iconFactory.dropSelectedIcon(),l=-i.player.direction,f=Math.sin(l/16*3.14)*-1,c=Math.cos(l/16*3.14)*-1,d=i.player.offset.x+f*20,v=i.player.offset.y+20+c*20;if(h){var m=i.itemFactory.newItem(h,d,v,h.type);m&&(i.player.offset.x+=30,i.player.offset.x+=30),m||i.iconFactory.newIcon(null,parseInt(d),parseInt(v),h.type)}},o.press=function(){if(console.log("shift key pressed"),i.tick>Ml){Ml=i.tick+Fg;var h=i.player.direction,l=h/32*360,f=Math.sin(l*3.14/180),c=Math.cos(l*3.14/180)*-1,d=i.player.offset.x+24+f*30,v=i.player.offset.y+24+c*30;i.bulletFactory.newBullet(i.player.id,d,v,0,-h),i.socketListener.sendBulletShot({shooter:i.player.id,x:d,y:v,type:0,angle:-h})}}},s_=i=>{let e=new J.Container;e.hitArea=new J.Rectangle(0,0,i.maxMapX,i.maxMapY),e.interactive=!0,e.cursor="cursor",i.stage.addChild(e),i.interactionLayer=e,e.on("mousedown",t=>{if(console.log("Got mouse down event"),i.isBuilding&&i.isDragging){var r=Math.floor(i.player.offset.x%48),n=Math.floor(i.player.offset.y%48),o=Math.floor((i.player.offset.x-i.player.defaultOffset.x+r+t.data.global.x)/48),s=Math.floor((i.player.offset.y-i.player.defaultOffset.y+n+t.data.global.y)/48);i.buildingFactory.newBuilding(i.player.id,o,s,i.isBuilding)&&(i.map[o][s]=mi,i.tiles[o][s]=i.isBuilding,i.forceDraw=!0,i.clearGhostBuilding&&i.clearGhostBuilding());return}if(i.isDemolishing||(i.showBuildMenu=!i.showBuildMenu,i.forceDraw=!0,i.buildMenuOffset={x:t.data.global.x,y:t.data.global.y}),i.isDemolishing){console.log("Trying to demolish building");var a=Math.floor(i.player.offset.x%48),u=Math.floor(i.player.offset.y%48),h=Math.floor((i.player.offset.x-i.player.defaultOffset.x+a+t.data.global.x)/48),l=Math.floor((i.player.offset.y-i.player.defaultOffset.y+u+t.data.global.y)/48);i.buildingFactory.demolishBuilding(h,l),i.isDemolishing=!1,i.stage.cursor="cursor",i.interactionLayer.cursor="cursor"}}),e.on("rightdown",t=>{t.stopPropagation&&t.stopPropagation(),t.data&&t.data.originalEvent&&t.data.originalEvent.preventDefault&&t.data.originalEvent.preventDefault(),i.isBuilding&&i.clearGhostBuilding&&i.clearGhostBuilding(),i.isDemolishing&&(i.isDemolishing=!1,i.stage.cursor="cursor",i.interactionLayer.cursor="cursor")}),typeof window<"u"&&(window.__battlecityContextMenuHandler||(window.__battlecityContextMenuHandler=t=>{const r=document.getElementById("game");r&&r.contains(t.target)&&t.preventDefault()},window.addEventListener("contextmenu",window.__battlecityContextMenuHandler)))};var Fl=0,Nl=0,Bl=0,Dl=0;const yd=(i,e)=>{var t=i.player.offset.x%128,r=i.player.offset.y%128;if(i.player.offset.x/128>Nl||i.player.offset.x/128<Fl||i.player.offset.y/128>Dl||i.player.offset.y/128<Bl){Fl=i.player.offset.x/128-5,Nl=i.player.offset.x/128+5,Bl=i.player.offset.y/128-5,Dl=i.player.offset.y/128+5,e.clear();for(var n=-12;n<12;n++)for(var o=-12;o<12;o++)e.addFrame(i.textures.groundTexture,n*128,o*128);e.position.set(i.player.defaultOffset.x+i.player.offset.x-t,i.player.defaultOffset.y+i.player.offset.y-r)}e.pivot.set(i.player.offset.x,i.player.offset.y)};var md=0,gd=0,_d=0,xd=0,a_=(i,e,t,r,n,o)=>{var s=new J.Texture(i.textures.lavaTexture.baseTexture,new J.Rectangle(i.tiles[n][o],0,48,48));e.addFrame(s,t*48,r*48)},u_=(i,e,t,r,n,o)=>{var s=new J.Texture(i.textures.rockTexture.baseTexture,new J.Rectangle(i.tiles[n][o],0,48,48));e.addFrame(s,t*48,r*48)},h_=(i,e,t,r,n,o)=>{var s=i.tiles[n][o],a=s%100,u=parseInt(s/100);const h=i.buildingFactory.getBuildingByCoord(n,o);var l=new J.Texture(i.textures.buildings.baseTexture,new J.Rectangle(0,u*144,144,144,144));e.addFrame(l,t*48,r*48,1,0);let f=null;try{f=new J.Texture(i.textures.imageItems.baseTexture,new J.Rectangle(a*32,0,32,32))}catch{f=null}if(f)switch(u){case pe:e.addFrame(f,t*48+14,r*48+100);break;case te:e.addFrame(f,t*48+56,r*48+52);break}if(h&&h.population>0&&i.textures.population){const x=u===ia?Ug:kg;if(x>0){const C=Math.max(0,Math.min(x,h.population)),P=Math.min(13,Math.floor(C/x*13)),F=P%7,w=Math.floor(P/7),R=new J.Texture(i.textures.population.baseTexture,new J.Rectangle(F*48,w*48,48,48));let A=96,H=48;switch(u){case Ya:H=49;break;case te:H=48;break;case Bg:A=92,H=92;break;case ia:H=90;break;case pe:H=90;break;default:A=96,H=48}const O=t*48+A,N=r*48+H;e.addFrame(R,O,N)}}if(u===te&&h&&h.smokeActive&&i.textures.smoke){const c=Math.max(0,(h.smokeFrame||1)-1),d=new J.Texture(i.textures.smoke.baseTexture,new J.Rectangle(0,c*60,180,60)),v=t*48+6,m=r*48-15;e.addFrame(d,v,m)}if(u===te&&h&&typeof h.itemsLeft=="number"&&i.textures.blackNumbers){const c=Math.max(0,Math.min(99,Math.floor(h.itemsLeft))),d=Math.floor(c/10),v=c%10,m=(y,x)=>{const C=new J.Texture(i.textures.blackNumbers.baseTexture,new J.Rectangle(y*16,0,16,16));e.addFrame(C,t*48+x,r*48+84)};m(d,56),m(v,72)}},l_=i=>{md=i.player.offset.x/48-20,gd=i.player.offset.x/48+20,_d=i.player.offset.y/48-20,xd=i.player.offset.y/48+20},f_=i=>!!(i.forceDraw||i.player.offset.x/48>=gd||i.player.offset.x/48<=md||i.player.offset.y/48>=xd||i.player.offset.y/48<=_d);const bd=(i,e)=>{var t=Math.floor(i.player.offset.x%48),r=Math.floor(i.player.offset.y%48);if(f_(i)){l_(i),e.clear();for(var n=Math.floor(i.player.offset.x/48),o=Math.floor(i.player.offset.y/48),s=-40;s<40;s++)for(var a=-40;a<40;a++){var u=n+s,h=o+a;u>=0&&h>=0&&u<512&&h<512&&(i.map[u][h]==ra&&a_(i,e,s,a,u,h),i.map[u][h]==gn&&u_(i,e,s,a,u,h),i.map[u][h]>=mi&&h_(i,e,s,a,u,h))}e.position.set(i.player.defaultOffset.x+i.player.offset.x-t,i.player.defaultOffset.y+i.player.offset.y-r)}e.pivot.set(i.player.offset.x,i.player.offset.y)},wd=9,c_=()=>{const i=new J.Container,e=new J.Graphics;e.beginFill(15844367).lineStyle(2,10249216).drawCircle(0,0,wd).endFill(),i.addChild(e);const t=new J.Text("M",{fontFamily:"Arial",fontSize:12,fontWeight:"bold",fill:1779249});return t.anchor.set(.5),i.addChild(t),i},Td=(i,e)=>{if(!i||!i.isMayor)return;const t=c_();t.x=e.width/2,t.y=-wd-4,e.addChild(t)},d_=(i,e)=>{if(!i)return 0;const t=!!i.isMayor;return typeof i.tank=="number"?i.tank:e&&i.id===e.id||(e&&i.city!==void 0?i.city===e.city:!0)?t?1:0:t?3:2},Ed=(i,e,t)=>{const r=e?.direction||0,n=d_(e,t),o=new J.Texture(i.textures.tankTexture.baseTexture,new J.Rectangle(Math.floor(r/2)*48,n*48,48,48));return new J.Sprite(o)};var p_=(i,e)=>{var t=Ed(i,i.player,i.player);t.x=i.player.defaultOffset.x,t.y=i.player.defaultOffset.y,Td(i.player,t),e.addChild(t)},v_=(i,e)=>{Object.keys(i.otherPlayers).forEach(t=>{var r=i.otherPlayers[t],n=Ed(i,r,i.player);n.x=r.offset.x+(i.player.defaultOffset.x-i.player.offset.x/48*48),n.y=r.offset.y+(i.player.defaultOffset.y-i.player.offset.y/48*48),Td(r,n),e.addChild(n)})},y_=(i,e)=>{for(var t=i.bulletFactory.getHead();t;){var r=i.textures.bulletTexture.clone(),n=new J.Rectangle(t.animation*8,0,8,8);r.frame=n;var o=new J.Sprite(r);o.x=t.x+(i.player.defaultOffset.x-i.player.offset.x),o.y=t.y+(i.player.defaultOffset.y-i.player.offset.y),t.animation++,t.animation>3&&(t.animation=0),e.addChild(o),t=t.next}};const m_=i=>{i.objectContainer.removeChildren(),p_(i,i.objectContainer),v_(i,i.objectContainer),y_(i,i.objectContainer)};var g_=(i,e)=>Cr(e,Or(i.player))?!0:Object.keys(i.otherPlayers).some(t=>Cr(Or(i.otherPlayers[t]),e)),__=(i,e)=>{for(var t=i.buildingFactory.getHead();t;){var r={x:t.x*48,y:t.y*48,w:144,h:144};if(Cr(e,r))return!0;t=t.next}return!1};const x_=(i,e)=>{var t={x:e.x*48,y:e.y*48,w:140,h:140},r=dd(Or(i.player));return r?(console.log("Collided with edges"),r):(r=vd(i,t),r?(console.log("Collided with tiles"),r):(r=__(i,t),r||(r=g_(i,t),r)?(console.log("Collided with buildings"),r):(r=pd(i,t),r)))};var Id="1.13.7",Ul=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Mn=Array.prototype,qa=Object.prototype,kl=typeof Symbol<"u"?Symbol.prototype:null,b_=Mn.push,gi=Mn.slice,fi=qa.toString,w_=qa.hasOwnProperty,Pd=typeof ArrayBuffer<"u",T_=typeof DataView<"u",E_=Array.isArray,Xl=Object.keys,Hl=Object.create,Gl=Pd&&ArrayBuffer.isView,I_=isNaN,P_=isFinite,Ad=!{toString:null}.propertyIsEnumerable("toString"),Vl=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],A_=Math.pow(2,53)-1;function kt(i,e){return e=e==null?i.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),r=Array(t),n=0;n<t;n++)r[n]=arguments[n+e];switch(e){case 0:return i.call(this,r);case 1:return i.call(this,arguments[0],r);case 2:return i.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(n=0;n<e;n++)o[n]=arguments[n];return o[e]=r,i.apply(this,o)}}function sr(i){var e=typeof i;return e==="function"||e==="object"&&!!i}function S_(i){return i===null}function Sd(i){return i===void 0}function Cd(i){return i===!0||i===!1||fi.call(i)==="[object Boolean]"}function C_(i){return!!(i&&i.nodeType===1)}function Ft(i){var e="[object "+i+"]";return function(t){return fi.call(t)===e}}const Wa=Ft("String"),Od=Ft("Number"),O_=Ft("Date"),R_=Ft("RegExp"),L_=Ft("Error"),Rd=Ft("Symbol"),Ld=Ft("ArrayBuffer");var Md=Ft("Function"),M_=Ul.document&&Ul.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof M_!="function"&&(Md=function(i){return typeof i=="function"||!1});const Nt=Md,Fd=Ft("Object");var Nd=T_&&(!/\[native code\]/.test(String(DataView))||Fd(new DataView(new ArrayBuffer(8)))),$a=typeof Map<"u"&&Fd(new Map),F_=Ft("DataView");function N_(i){return i!=null&&Nt(i.getInt8)&&Ld(i.buffer)}const xn=Nd?N_:F_,ar=E_||Ft("Array");function Ne(i,e){return i!=null&&w_.call(i,e)}var sa=Ft("Arguments");(function(){sa(arguments)||(sa=function(i){return Ne(i,"callee")})})();const Ka=sa;function B_(i){return!Rd(i)&&P_(i)&&!isNaN(parseFloat(i))}function Bd(i){return Od(i)&&I_(i)}function Dd(i){return function(){return i}}function Ud(i){return function(e){var t=i(e);return typeof t=="number"&&t>=0&&t<=A_}}function kd(i){return function(e){return e?.[i]}}const bn=kd("byteLength"),D_=Ud(bn);var U_=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function k_(i){return Gl?Gl(i)&&!xn(i):D_(i)&&U_.test(fi.call(i))}const Xd=Pd?k_:Dd(!1),Xt=kd("length");function X_(i){for(var e={},t=i.length,r=0;r<t;++r)e[i[r]]=!0;return{contains:function(n){return e[n]===!0},push:function(n){return e[n]=!0,i.push(n)}}}function Hd(i,e){e=X_(e);var t=Vl.length,r=i.constructor,n=Nt(r)&&r.prototype||qa,o="constructor";for(Ne(i,o)&&!e.contains(o)&&e.push(o);t--;)o=Vl[t],o in i&&i[o]!==n[o]&&!e.contains(o)&&e.push(o)}function Lt(i){if(!sr(i))return[];if(Xl)return Xl(i);var e=[];for(var t in i)Ne(i,t)&&e.push(t);return Ad&&Hd(i,e),e}function H_(i){if(i==null)return!0;var e=Xt(i);return typeof e=="number"&&(ar(i)||Wa(i)||Ka(i))?e===0:Xt(Lt(i))===0}function Gd(i,e){var t=Lt(e),r=t.length;if(i==null)return!r;for(var n=Object(i),o=0;o<r;o++){var s=t[o];if(e[s]!==n[s]||!(s in n))return!1}return!0}function vt(i){if(i instanceof vt)return i;if(!(this instanceof vt))return new vt(i);this._wrapped=i}vt.VERSION=Id;vt.prototype.value=function(){return this._wrapped};vt.prototype.valueOf=vt.prototype.toJSON=vt.prototype.value;vt.prototype.toString=function(){return String(this._wrapped)};function zl(i){return new Uint8Array(i.buffer||i,i.byteOffset||0,bn(i))}var jl="[object DataView]";function aa(i,e,t,r){if(i===e)return i!==0||1/i===1/e;if(i==null||e==null)return!1;if(i!==i)return e!==e;var n=typeof i;return n!=="function"&&n!=="object"&&typeof e!="object"?!1:Vd(i,e,t,r)}function Vd(i,e,t,r){i instanceof vt&&(i=i._wrapped),e instanceof vt&&(e=e._wrapped);var n=fi.call(i);if(n!==fi.call(e))return!1;if(Nd&&n=="[object Object]"&&xn(i)){if(!xn(e))return!1;n=jl}switch(n){case"[object RegExp]":case"[object String]":return""+i==""+e;case"[object Number]":return+i!=+i?+e!=+e:+i==0?1/+i===1/e:+i==+e;case"[object Date]":case"[object Boolean]":return+i==+e;case"[object Symbol]":return kl.valueOf.call(i)===kl.valueOf.call(e);case"[object ArrayBuffer]":case jl:return Vd(zl(i),zl(e),t,r)}var o=n==="[object Array]";if(!o&&Xd(i)){var s=bn(i);if(s!==bn(e))return!1;if(i.buffer===e.buffer&&i.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if(typeof i!="object"||typeof e!="object")return!1;var a=i.constructor,u=e.constructor;if(a!==u&&!(Nt(a)&&a instanceof a&&Nt(u)&&u instanceof u)&&"constructor"in i&&"constructor"in e)return!1}t=t||[],r=r||[];for(var h=t.length;h--;)if(t[h]===i)return r[h]===e;if(t.push(i),r.push(e),o){if(h=i.length,h!==e.length)return!1;for(;h--;)if(!aa(i[h],e[h],t,r))return!1}else{var l=Lt(i),f;if(h=l.length,Lt(e).length!==h)return!1;for(;h--;)if(f=l[h],!(Ne(e,f)&&aa(i[f],e[f],t,r)))return!1}return t.pop(),r.pop(),!0}function G_(i,e){return aa(i,e)}function _i(i){if(!sr(i))return[];var e=[];for(var t in i)e.push(t);return Ad&&Hd(i,e),e}function Za(i){var e=Xt(i);return function(t){if(t==null)return!1;var r=_i(t);if(Xt(r))return!1;for(var n=0;n<e;n++)if(!Nt(t[i[n]]))return!1;return i!==Yd||!Nt(t[Ja])}}var Ja="forEach",zd="has",Qa=["clear","delete"],jd=["get",zd,"set"],V_=Qa.concat(Ja,jd),Yd=Qa.concat(jd),z_=["add"].concat(Qa,Ja,zd);const j_=$a?Za(V_):Ft("Map"),Y_=$a?Za(Yd):Ft("WeakMap"),q_=$a?Za(z_):Ft("Set"),W_=Ft("WeakSet");function Ur(i){for(var e=Lt(i),t=e.length,r=Array(t),n=0;n<t;n++)r[n]=i[e[n]];return r}function $_(i){for(var e=Lt(i),t=e.length,r=Array(t),n=0;n<t;n++)r[n]=[e[n],i[e[n]]];return r}function qd(i){for(var e={},t=Lt(i),r=0,n=t.length;r<n;r++)e[i[t[r]]]=t[r];return e}function ua(i){var e=[];for(var t in i)Nt(i[t])&&e.push(t);return e.sort()}function tu(i,e){return function(t){var r=arguments.length;if(e&&(t=Object(t)),r<2||t==null)return t;for(var n=1;n<r;n++)for(var o=arguments[n],s=i(o),a=s.length,u=0;u<a;u++){var h=s[u];(!e||t[h]===void 0)&&(t[h]=o[h])}return t}}const Wd=tu(_i),wn=tu(Lt),$d=tu(_i,!0);function K_(){return function(){}}function Kd(i){if(!sr(i))return{};if(Hl)return Hl(i);var e=K_();e.prototype=i;var t=new e;return e.prototype=null,t}function Z_(i,e){var t=Kd(i);return e&&wn(t,e),t}function J_(i){return sr(i)?ar(i)?i.slice():Wd({},i):i}function Q_(i,e){return e(i),i}function Zd(i){return ar(i)?i:[i]}vt.toPath=Zd;function xi(i){return vt.toPath(i)}function eu(i,e){for(var t=e.length,r=0;r<t;r++){if(i==null)return;i=i[e[r]]}return t?i:void 0}function Jd(i,e,t){var r=eu(i,xi(e));return Sd(r)?t:r}function t0(i,e){e=xi(e);for(var t=e.length,r=0;r<t;r++){var n=e[r];if(!Ne(i,n))return!1;i=i[n]}return!!t}function ru(i){return i}function ci(i){return i=wn({},i),function(e){return Gd(e,i)}}function iu(i){return i=xi(i),function(e){return eu(e,i)}}function bi(i,e,t){if(e===void 0)return i;switch(t??3){case 1:return function(r){return i.call(e,r)};case 3:return function(r,n,o){return i.call(e,r,n,o)};case 4:return function(r,n,o,s){return i.call(e,r,n,o,s)}}return function(){return i.apply(e,arguments)}}function Qd(i,e,t){return i==null?ru:Nt(i)?bi(i,e,t):sr(i)&&!ar(i)?ci(i):iu(i)}function nu(i,e){return Qd(i,e,1/0)}vt.iteratee=nu;function Gt(i,e,t){return vt.iteratee!==nu?vt.iteratee(i,e):Qd(i,e,t)}function e0(i,e,t){e=Gt(e,t);for(var r=Lt(i),n=r.length,o={},s=0;s<n;s++){var a=r[s];o[a]=e(i[a],a,i)}return o}function tp(){}function r0(i){return i==null?tp:function(e){return Jd(i,e)}}function i0(i,e,t){var r=Array(Math.max(0,i));e=bi(e,t,1);for(var n=0;n<i;n++)r[n]=e(n);return r}function ha(i,e){return e==null&&(e=i,i=0),i+Math.floor(Math.random()*(e-i+1))}const di=Date.now||function(){return new Date().getTime()};function ep(i){var e=function(o){return i[o]},t="(?:"+Lt(i).join("|")+")",r=RegExp(t),n=RegExp(t,"g");return function(o){return o=o==null?"":""+o,r.test(o)?o.replace(n,e):o}}const rp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n0=ep(rp),o0=qd(rp),s0=ep(o0),a0=vt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var cs=/(.)^/,u0={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},h0=/\\|'|\r|\n|\u2028|\u2029/g;function l0(i){return"\\"+u0[i]}var f0=/^\s*(\w|\$)+\s*$/;function c0(i,e,t){!e&&t&&(e=t),e=$d({},e,vt.templateSettings);var r=RegExp([(e.escape||cs).source,(e.interpolate||cs).source,(e.evaluate||cs).source].join("|")+"|$","g"),n=0,o="__p+='";i.replace(r,function(h,l,f,c,d){return o+=i.slice(n,d).replace(h0,l0),n=d+h.length,l?o+=`'+
((__t=(`+l+`))==null?'':_.escape(__t))+
'`:f?o+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:c&&(o+=`';
`+c+`
__p+='`),h}),o+=`';
`;var s=e.variable;if(s){if(!f0.test(s))throw new Error("variable is not a bare identifier: "+s)}else o=`with(obj||{}){
`+o+`}
`,s="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var a;try{a=new Function(s,"_",o)}catch(h){throw h.source=o,h}var u=function(h){return a.call(this,h,vt)};return u.source="function("+s+`){
`+o+"}",u}function d0(i,e,t){e=xi(e);var r=e.length;if(!r)return Nt(t)?t.call(i):t;for(var n=0;n<r;n++){var o=i?.[e[n]];o===void 0&&(o=t,n=r),i=Nt(o)?o.call(i):o}return i}var p0=0;function v0(i){var e=++p0+"";return i?i+e:e}function y0(i){var e=vt(i);return e._chain=!0,e}function ip(i,e,t,r,n){if(!(r instanceof e))return i.apply(t,n);var o=Kd(i.prototype),s=i.apply(o,n);return sr(s)?s:o}var kr=kt(function(i,e){var t=kr.placeholder,r=function(){for(var n=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===t?arguments[n++]:e[a];for(;n<arguments.length;)s.push(arguments[n++]);return ip(i,r,this,this,s)};return r});kr.placeholder=vt;const np=kt(function(i,e,t){if(!Nt(i))throw new TypeError("Bind must be called on a function");var r=kt(function(n){return ip(i,r,e,this,t.concat(n))});return r}),jt=Ud(Xt);function ur(i,e,t,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(i);for(var n=r.length,o=0,s=Xt(i);o<s;o++){var a=i[o];if(jt(a)&&(ar(a)||Ka(a)))if(e>1)ur(a,e-1,t,r),n=r.length;else for(var u=0,h=a.length;u<h;)r[n++]=a[u++];else t||(r[n++]=a)}return r}const m0=kt(function(i,e){e=ur(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var r=e[t];i[r]=np(i[r],i)}return i});function g0(i,e){var t=function(r){var n=t.cache,o=""+(e?e.apply(this,arguments):r);return Ne(n,o)||(n[o]=i.apply(this,arguments)),n[o]};return t.cache={},t}const op=kt(function(i,e,t){return setTimeout(function(){return i.apply(null,t)},e)}),_0=kr(op,vt,1);function x0(i,e,t){var r,n,o,s,a=0;t||(t={});var u=function(){a=t.leading===!1?0:di(),r=null,s=i.apply(n,o),r||(n=o=null)},h=function(){var l=di();!a&&t.leading===!1&&(a=l);var f=e-(l-a);return n=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),a=l,s=i.apply(n,o),r||(n=o=null)):!r&&t.trailing!==!1&&(r=setTimeout(u,f)),s};return h.cancel=function(){clearTimeout(r),a=0,r=n=o=null},h}function b0(i,e,t){var r,n,o,s,a,u=function(){var l=di()-n;e>l?r=setTimeout(u,e-l):(r=null,t||(s=i.apply(a,o)),r||(o=a=null))},h=kt(function(l){return a=this,o=l,n=di(),r||(r=setTimeout(u,e),t&&(s=i.apply(a,o))),s});return h.cancel=function(){clearTimeout(r),r=o=a=null},h}function w0(i,e){return kr(e,i)}function ou(i){return function(){return!i.apply(this,arguments)}}function T0(){var i=arguments,e=i.length-1;return function(){for(var t=e,r=i[e].apply(this,arguments);t--;)r=i[t].call(this,r);return r}}function E0(i,e){return function(){if(--i<1)return e.apply(this,arguments)}}function sp(i,e){var t;return function(){return--i>0&&(t=e.apply(this,arguments)),i<=1&&(e=null),t}}const I0=kr(sp,2);function ap(i,e,t){e=Gt(e,t);for(var r=Lt(i),n,o=0,s=r.length;o<s;o++)if(n=r[o],e(i[n],n,i))return n}function up(i){return function(e,t,r){t=Gt(t,r);for(var n=Xt(e),o=i>0?0:n-1;o>=0&&o<n;o+=i)if(t(e[o],o,e))return o;return-1}}const su=up(1),hp=up(-1);function lp(i,e,t,r){t=Gt(t,r,1);for(var n=t(e),o=0,s=Xt(i);o<s;){var a=Math.floor((o+s)/2);t(i[a])<n?o=a+1:s=a}return o}function fp(i,e,t){return function(r,n,o){var s=0,a=Xt(r);if(typeof o=="number")i>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(t&&o&&a)return o=t(r,n),r[o]===n?o:-1;if(n!==n)return o=e(gi.call(r,s,a),Bd),o>=0?o+s:-1;for(o=i>0?s:a-1;o>=0&&o<a;o+=i)if(r[o]===n)return o;return-1}}const cp=fp(1,su,lp),P0=fp(-1,hp);function la(i,e,t){var r=jt(i)?su:ap,n=r(i,e,t);if(n!==void 0&&n!==-1)return i[n]}function A0(i,e){return la(i,ci(e))}function Ee(i,e,t){e=bi(e,t);var r,n;if(jt(i))for(r=0,n=i.length;r<n;r++)e(i[r],r,i);else{var o=Lt(i);for(r=0,n=o.length;r<n;r++)e(i[o[r]],o[r],i)}return i}function ir(i,e,t){e=Gt(e,t);for(var r=!jt(i)&&Lt(i),n=(r||i).length,o=Array(n),s=0;s<n;s++){var a=r?r[s]:s;o[s]=e(i[a],a,i)}return o}function dp(i){var e=function(t,r,n,o){var s=!jt(t)&&Lt(t),a=(s||t).length,u=i>0?0:a-1;for(o||(n=t[s?s[u]:u],u+=i);u>=0&&u<a;u+=i){var h=s?s[u]:u;n=r(n,t[h],h,t)}return n};return function(t,r,n,o){var s=arguments.length>=3;return e(t,bi(r,o,4),n,s)}}const ds=dp(1),Yl=dp(-1);function Rr(i,e,t){var r=[];return e=Gt(e,t),Ee(i,function(n,o,s){e(n,o,s)&&r.push(n)}),r}function S0(i,e,t){return Rr(i,ou(Gt(e)),t)}function ql(i,e,t){e=Gt(e,t);for(var r=!jt(i)&&Lt(i),n=(r||i).length,o=0;o<n;o++){var s=r?r[o]:o;if(!e(i[s],s,i))return!1}return!0}function Wl(i,e,t){e=Gt(e,t);for(var r=!jt(i)&&Lt(i),n=(r||i).length,o=0;o<n;o++){var s=r?r[o]:o;if(e(i[s],s,i))return!0}return!1}function xe(i,e,t,r){return jt(i)||(i=Ur(i)),(typeof t!="number"||r)&&(t=0),cp(i,e,t)>=0}const C0=kt(function(i,e,t){var r,n;return Nt(e)?n=e:(e=xi(e),r=e.slice(0,-1),e=e[e.length-1]),ir(i,function(o){var s=n;if(!s){if(r&&r.length&&(o=eu(o,r)),o==null)return;s=o[e]}return s==null?s:s.apply(o,t)})});function au(i,e){return ir(i,iu(e))}function O0(i,e){return Rr(i,ci(e))}function pp(i,e,t){var r=-1/0,n=-1/0,o,s;if(e==null||typeof e=="number"&&typeof i[0]!="object"&&i!=null){i=jt(i)?i:Ur(i);for(var a=0,u=i.length;a<u;a++)o=i[a],o!=null&&o>r&&(r=o)}else e=Gt(e,t),Ee(i,function(h,l,f){s=e(h,l,f),(s>n||s===-1/0&&r===-1/0)&&(r=h,n=s)});return r}function R0(i,e,t){var r=1/0,n=1/0,o,s;if(e==null||typeof e=="number"&&typeof i[0]!="object"&&i!=null){i=jt(i)?i:Ur(i);for(var a=0,u=i.length;a<u;a++)o=i[a],o!=null&&o<r&&(r=o)}else e=Gt(e,t),Ee(i,function(h,l,f){s=e(h,l,f),(s<n||s===1/0&&r===1/0)&&(r=h,n=s)});return r}var L0=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function vp(i){return i?ar(i)?gi.call(i):Wa(i)?i.match(L0):jt(i)?ir(i,ru):Ur(i):[]}function yp(i,e,t){if(e==null||t)return jt(i)||(i=Ur(i)),i[ha(i.length-1)];var r=vp(i),n=Xt(r);e=Math.max(Math.min(e,n),0);for(var o=n-1,s=0;s<e;s++){var a=ha(s,o),u=r[s];r[s]=r[a],r[a]=u}return r.slice(0,e)}function M0(i){return yp(i,1/0)}function F0(i,e,t){var r=0;return e=Gt(e,t),au(ir(i,function(n,o,s){return{value:n,index:r++,criteria:e(n,o,s)}}).sort(function(n,o){var s=n.criteria,a=o.criteria;if(s!==a){if(s>a||s===void 0)return 1;if(s<a||a===void 0)return-1}return n.index-o.index}),"value")}function Fn(i,e){return function(t,r,n){var o=e?[[],[]]:{};return r=Gt(r,n),Ee(t,function(s,a){var u=r(s,a,t);i(o,s,u)}),o}}const N0=Fn(function(i,e,t){Ne(i,t)?i[t].push(e):i[t]=[e]}),B0=Fn(function(i,e,t){i[t]=e}),D0=Fn(function(i,e,t){Ne(i,t)?i[t]++:i[t]=1}),U0=Fn(function(i,e,t){i[t?0:1].push(e)},!0);function k0(i){return i==null?0:jt(i)?i.length:Lt(i).length}function X0(i,e,t){return e in t}const mp=kt(function(i,e){var t={},r=e[0];if(i==null)return t;Nt(r)?(e.length>1&&(r=bi(r,e[1])),e=_i(i)):(r=X0,e=ur(e,!1,!1),i=Object(i));for(var n=0,o=e.length;n<o;n++){var s=e[n],a=i[s];r(a,s,i)&&(t[s]=a)}return t}),H0=kt(function(i,e){var t=e[0],r;return Nt(t)?(t=ou(t),e.length>1&&(r=e[1])):(e=ir(ur(e,!1,!1),String),t=function(n,o){return!xe(e,o)}),mp(i,t,r)});function gp(i,e,t){return gi.call(i,0,Math.max(0,i.length-(e==null||t?1:e)))}function ps(i,e,t){return i==null||i.length<1?e==null||t?void 0:[]:e==null||t?i[0]:gp(i,i.length-e)}function rn(i,e,t){return gi.call(i,e==null||t?1:e)}function G0(i,e,t){return i==null||i.length<1?e==null||t?void 0:[]:e==null||t?i[i.length-1]:rn(i,Math.max(0,i.length-e))}function V0(i){return Rr(i,Boolean)}function z0(i,e){return ur(i,e,!1)}const _p=kt(function(i,e){return e=ur(e,!0,!0),Rr(i,function(t){return!xe(e,t)})}),j0=kt(function(i,e){return _p(i,e)});function fa(i,e,t,r){Cd(e)||(r=t,t=e,e=!1),t!=null&&(t=Gt(t,r));for(var n=[],o=[],s=0,a=Xt(i);s<a;s++){var u=i[s],h=t?t(u,s,i):u;e&&!t?((!s||o!==h)&&n.push(u),o=h):t?xe(o,h)||(o.push(h),n.push(u)):xe(n,u)||n.push(u)}return n}const Y0=kt(function(i){return fa(ur(i,!0,!0))});function q0(i){for(var e=[],t=arguments.length,r=0,n=Xt(i);r<n;r++){var o=i[r];if(!xe(e,o)){var s;for(s=1;s<t&&xe(arguments[s],o);s++);s===t&&e.push(o)}}return e}function ca(i){for(var e=i&&pp(i,Xt).length||0,t=Array(e),r=0;r<e;r++)t[r]=au(i,r);return t}const W0=kt(ca);function $0(i,e){for(var t={},r=0,n=Xt(i);r<n;r++)e?t[i[r]]=e[r]:t[i[r][0]]=i[r][1];return t}function K0(i,e,t){e==null&&(e=i||0,i=0),t||(t=e<i?-1:1);for(var r=Math.max(Math.ceil((e-i)/t),0),n=Array(r),o=0;o<r;o++,i+=t)n[o]=i;return n}function Z0(i,e){if(e==null||e<1)return[];for(var t=[],r=0,n=i.length;r<n;)t.push(gi.call(i,r,r+=e));return t}function uu(i,e){return i._chain?vt(e).chain():e}function xp(i){return Ee(ua(i),function(e){var t=vt[e]=i[e];vt.prototype[e]=function(){var r=[this._wrapped];return b_.apply(r,arguments),uu(this,t.apply(vt,r))}}),vt}Ee(["pop","push","reverse","shift","sort","splice","unshift"],function(i){var e=Mn[i];vt.prototype[i]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(i==="shift"||i==="splice")&&t.length===0&&delete t[0]),uu(this,t)}});Ee(["concat","join","slice"],function(i){var e=Mn[i];vt.prototype[i]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),uu(this,t)}});const J0=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Id,after:E0,all:ql,allKeys:_i,any:Wl,assign:wn,before:sp,bind:np,bindAll:m0,chain:y0,chunk:Z0,clone:J_,collect:ir,compact:V0,compose:T0,constant:Dd,contains:xe,countBy:D0,create:Z_,debounce:b0,default:vt,defaults:$d,defer:_0,delay:op,detect:la,difference:_p,drop:rn,each:Ee,escape:n0,every:ql,extend:Wd,extendOwn:wn,filter:Rr,find:la,findIndex:su,findKey:ap,findLastIndex:hp,findWhere:A0,first:ps,flatten:z0,foldl:ds,foldr:Yl,forEach:Ee,functions:ua,get:Jd,groupBy:N0,has:t0,head:ps,identity:ru,include:xe,includes:xe,indexBy:B0,indexOf:cp,initial:gp,inject:ds,intersection:q0,invert:qd,invoke:C0,isArguments:Ka,isArray:ar,isArrayBuffer:Ld,isBoolean:Cd,isDataView:xn,isDate:O_,isElement:C_,isEmpty:H_,isEqual:G_,isError:L_,isFinite:B_,isFunction:Nt,isMap:j_,isMatch:Gd,isNaN:Bd,isNull:S_,isNumber:Od,isObject:sr,isRegExp:R_,isSet:q_,isString:Wa,isSymbol:Rd,isTypedArray:Xd,isUndefined:Sd,isWeakMap:Y_,isWeakSet:W_,iteratee:nu,keys:Lt,last:G0,lastIndexOf:P0,map:ir,mapObject:e0,matcher:ci,matches:ci,max:pp,memoize:g0,methods:ua,min:R0,mixin:xp,negate:ou,noop:tp,now:di,object:$0,omit:H0,once:I0,pairs:$_,partial:kr,partition:U0,pick:mp,pluck:au,property:iu,propertyOf:r0,random:ha,range:K0,reduce:ds,reduceRight:Yl,reject:S0,rest:rn,restArguments:kt,result:d0,sample:yp,select:Rr,shuffle:M0,size:k0,some:Wl,sortBy:F0,sortedIndex:lp,tail:rn,take:ps,tap:Q_,template:c0,templateSettings:a0,throttle:x0,times:i0,toArray:vp,toPath:Zd,transpose:ca,unescape:s0,union:Y0,uniq:fa,unique:fa,uniqueId:v0,unzip:ca,values:Ur,where:O0,without:j0,wrap:w0,zip:W0},Symbol.toStringTag,{value:"Module"}));var ri=xp(J0);ri._=ri;var bp=function(i,e,t){t=typeof t<"u"?t:[],e=typeof e<"u"?e:{id:0};var r=ri.filter(i,function(n){return n.parentid==e.id});return ri.isEmpty(r)||(e.id==0?t=r:e.children=r,ri.each(r,function(n){bp(i,n)})),t},Q0=bp(Yg);class tx{constructor(e){this.game=e,this.buildingListHead=null,this.buildingsById={},this.buildingsByCoord={}}cycle(){}newBuilding(e,t,r,n,o={}){const{notifyServer:s=!0,id:a=`${t}_${r}`,population:u=0,attachedHouseId:h=null,updateCity:l,itemsLeft:f=0,city:c=this.game.player?.city??0}=o,d=`${t}_${r}`;var v={id:a,owner:e,x:t,y:r,items:1,type:n,population:u,attachedHouseId:h,next:null,previous:null,coordKey:d,city:c,itemsLeft:f};return x_(this.game,v)?(console.log("Collision"),!1):(this.game.tiles[t]||(this.game.tiles[t]=[]),this.game.tiles[t][r]=n,this.game.map&&this.game.map[t]&&(this.game.map[t][r]=mi),s&&this.game.socketListener&&this.game.socketListener.sendNewBuilding&&this.game.socketListener.sendNewBuilding(v),this.buildingListHead&&(this.buildingListHead.previous=v,v.next=this.buildingListHead),(l!==void 0?l:!e||e===this.game.player.id)&&this.adjustAllowedBuilds(v),console.log("Created building"),console.log(v),this.buildingListHead=v,this.buildingsById[v.id]=v,this.buildingsByCoord[d]=v,v)}outputBuildings(){console.log("here");for(var e=this.getHead();e;)e.type!==0&&console.log(e.type+","+e.x+","+e.y),e=e.next;return!1}demolishBuilding(e,t){console.log("Trying to demolish building at "+e+" "+t);for(var r=this.getHead();r;)r.type!==0&&(console.log(r.x+" "+r.y),e>=r.x&&e<=r.x+2&&t>=r.y&&t<=r.y+2&&(this.game.forceDraw=!0,this.deleteBuilding(r))),r=r.next}deleteBuilding(e,t=!0){this.game.map[e.x][e.y]=0,this.game.tiles[e.x][e.y]=0,(e.owner===null||e.owner===this.game.player.id)&&Object.keys(this.game.cities[this.game.player.city].canBuild).forEach(o=>{var s=We[o].TYPE;console.log(s+" "+this.game.isBuilding),parseInt(s)==e.type&&s!=_r&&(this.game.cities[this.game.player.city].canBuild[o]=Ke)}),t&&this.game.socketListener&&this.game.socketListener.sendDemolishBuilding&&this.game.socketListener.sendDemolishBuilding(e.id);var r=e.next;e.next&&(e.next.previous=e.previous),e.previous?e.previous.next=e.next:this.buildingListHead=e.next,delete this.buildingsById[e.id];const n=e.coordKey||`${e.x}_${e.y}`;return delete this.buildingsByCoord[n],r}removeBuildingById(e){let t=this.getHead();for(;t;){if(t.id===e){this.deleteBuilding(t,!1);break}t=t.next}}searchTree(e,t){if(e.id==t)return e;if(e.children!=null){var r,n=null;for(r=0;n==null&&r<e.children.length;r++)n=this.searchTree(e.children[r],t);return n}return null}adjustAllowedBuilds(e){e.type!=Ya&&Object.keys(this.game.cities[this.game.player.city].canBuild).forEach(t=>{var r=We[t].TYPE;if(console.log(r+" "+this.game.isBuilding),parseInt(r)==this.game.isBuilding){r!=_r&&(this.game.cities[this.game.player.city].canBuild[t]=Cl);var n=this.searchTree(Q0[0],r);n&&n.children&&n.children.forEach(o=>{Object.keys(this.game.cities[this.game.player.city].canBuild).forEach(s=>{if(this.game.cities[this.game.player.city].canBuild[s]!==Cl){var a=We[s].TYPE;console.log("finding children"+a+" "+o.id),parseInt(a)==o.id&&(this.game.cities[this.game.player.city].canBuild[s]=Ke)}})})}})}getHead(){return this.buildingListHead}getBuildingById(e){return this.buildingsById[e]}getBuildingByCoord(e,t){return this.buildingsByCoord[`${e}_${t}`]}applyPopulationUpdate(e){if(!e||!e.id)return;if(e.removed){this.removeBuildingById(e.id),this.game.forceDraw=!0;return}let t=this.getBuildingById(e.id);!t&&e.x!==void 0&&e.y!==void 0&&e.type!==void 0&&(t=this.newBuilding(e.ownerId||null,e.x,e.y,e.type,{notifyServer:!1,id:e.id,population:e.population||0,attachedHouseId:e.attachedHouseId||null,updateCity:!1,itemsLeft:e.itemsLeft||0,city:e.city??0})),t&&(t.coordKey=t.coordKey||`${t.x}_${t.y}`,typeof e.population=="number"&&(t.population=e.population),e.attachedHouseId!==void 0&&(t.attachedHouseId=e.attachedHouseId),e.city!==void 0&&(t.city=e.city),e.smokeActive!==void 0&&(t.smokeActive=e.smokeActive),e.smokeFrame!==void 0&&(t.smokeFrame=e.smokeFrame),e.itemsLeft!==void 0&&(t.itemsLeft=e.itemsLeft),this.game.forceDraw=!0)}}var Nn=(i,e)=>{var t={x:e.x,y:e.y,w:4,h:4};return Cr(i,t)};const ex=(i,e)=>{var t=Math.floor((e.x+40)/48),r=Math.floor((e.y+40)/48);return t>0&&r>0&&t<512&r<512?i.map[t][r]==gn:!1},rx=(i,e)=>Object.keys(i.otherPlayers).some(t=>Nn(Or(i.otherPlayers[t]),e)),ix=(i,e)=>Nn(Or(i.player),e),nx=(i,e)=>{for(var t=i.itemFactory.getHead();t;){var r={x:t.x,y:t.y,w:48,h:48};if(Nn(r,e))return!0;t=t.next}return!1},ox=(i,e)=>{for(var t=i.buildingFactory.getHead();t;){var r={x:t.x*48,y:t.y*48,w:144,h:96};if(t.type<Dg&&(r.h=r.h-48),Nn(r,e))return!0;t=t.next}return!1};class sx{constructor(e){this.game=e,this.bulletListHead=null}cycle(){for(var e=this.bulletListHead;e;){var t=e.angle,r=Math.sin(t/16*3.14)*-1*this.game.timePassed*Sl,n=Math.cos(t/16*3.14)*-1*this.game.timePassed*Sl;e.x+=r,e.y+=n,(e.x<0||e.x>24576||e.y<0||e.y>24576)&&(e.life=He),ex(this.game,e)&&(console.log("Bullet collided with rock"),e.life=He),nx(this.game,e)&&(console.log("Bullet collided with item"),e.life=He),ox(this.game,e)&&(e.life=He),rx(this.game,e)&&(console.log("Bullet collided with someone else"),e.life=He),ix(this.game,e)&&(e.life=He,e.shooter!==this.game.player.id&&this.game.player.health>0&&(this.game.player.health-=e.damage)),e.life==He?e=this.deleteBullet(e):e=e.next}}deleteBullet(e){var t=e.next;return e.next&&(e.next.previous=e.previous),e.previous?e.previous.next=e.next:this.bulletListHead=e.next,t}newBullet(e,t,r,n,o){var s={shooter:e,x:t,y:r,life:Mg,damage:Ng,animation:0,type:n,angle:o,next:null,previous:null};return this.bulletListHead&&(this.bulletListHead.previous=s,s.next=this.bulletListHead),this.bulletListHead=s,s}getHead(){return this.bulletListHead}}class ax{constructor(e){this.game=e,this.iconListHead=null}cycle(){}newIcon(e,t,r,n){var o={owner:e,x:t,y:r,type:n,next:null,previous:null};return console.log("creating icon"),console.log(o),this.game.forceDraw=!0,this.iconListHead&&(this.iconListHead.previous=o,o.next=this.iconListHead),this.iconListHead=o,o}pickupIcon(){var e=this.findIconByLocation();e&&(e.owner=this.game.player.id,this.game.forceDraw=!0)}dropSelectedIcon(){for(var e=this.getHead(),t=null;e;)e.owner==this.game.player.id&&e.selected&&(this.game.forceDraw=!0,t=e,this.deleteIcon(e)),e=e.next;return t}toggleSelected(e){e.selected=!e.selected;for(var t=this.getHead();t;)t.owner==e.owner&&t!=e&&(console.log("setting other icons selected to false"),t.selected=!1),t=t.next}findIconByLocation(){for(var e=this.getHead(),t=24;e;){if(e.x>=this.game.player.offset.x-t&&e.x<=this.game.player.offset.x+t&&e.y>=this.game.player.offset.y-t&&e.y<=this.game.player.offset.y+t)return e;e=e.next}return null}deleteIcon(e){var t=e.next;return e.next&&(e.next.previous=e.previous),e.previous?e.previous.next=e.next:this.iconListHead=e.next,t}getHead(){return this.iconListHead}}class ux{constructor(e){this.game=e,this.itemListHead=null,this.calculateTick=0,this.validIcons=[_n,Rl,Ol,zg],this.validShooters=[_n,Rl,Ol]}cycle(){if(this.game.tick>this.calculateTick){this.calculateTick=this.game.tick+200;for(var e=this.getHead();e;)this.targetNearestPlayer(e),this.fireBullet(e),e=e.next}}fireBullet(e){if(this.validShooters.includes(e.type)&&this.game.tick>e.lastFired&&e.target){e.lastFired=this.game.tick+250;var t=e.angle*3.14/180,r=-(32/6*t),n=Math.sin(e.angle*3.14/180),o=Math.cos(e.angle*3.14/180)*-1,s=e.x+20+n*23,a=e.y+24+o*23;this.game.bulletFactory.newBullet(this.game.player.id,s,a,0,r)}}targetNearestPlayer(e){var t=this.game.player.offset.x,r=this.game.player.offset.y,n=(t-e.x)*(t-e.x),o=(r-e.y)*(r-e.y),s=Math.sqrt(n+o);s<=400?(e.target=this.game.player.id,e.target!=null&&(e.angle=Math.atan2(t-e.x,r-e.y),e.angle=Math.ceil(e.angle*180/3.14),t>=e.x?e.angle=180-e.angle:t<=e.x&&(e.angle=e.angle*-1+170))):e.target=null}newItem(e,t,r,n){if(!this.validIcons.includes(n))return null;var o={owner:e,x:t,y:r,target:null,type:n,lastFired:0,next:null,previous:null};return this.itemListHead&&(this.itemListHead.previous=o,o.next=this.itemListHead),console.log("Created item"),console.log(o),this.game.forceDraw=!0,this.itemListHead=o,o}deleteItem(e){var t=e.next;return e.next&&(e.next.previous=e.previous),e.previous?e.previous.next=e.next:this.itemListHead=e.next,t}getHead(){return this.itemListHead}}const le=Object.create(null);le.open="0";le.close="1";le.ping="2";le.pong="3";le.message="4";le.upgrade="5";le.noop="6";const nn=Object.create(null);Object.keys(le).forEach(i=>{nn[le[i]]=i});const da={type:"error",data:"parser error"},wp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Tp=typeof ArrayBuffer=="function",Ep=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,hu=({type:i,data:e},t,r)=>wp&&e instanceof Blob?t?r(e):$l(e,r):Tp&&(e instanceof ArrayBuffer||Ep(e))?t?r(e):$l(new Blob([e]),r):r(le[i]+(e||"")),$l=(i,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(i)};function Kl(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}let vs;function hx(i,e){if(wp&&i.data instanceof Blob)return i.data.arrayBuffer().then(Kl).then(e);if(Tp&&(i.data instanceof ArrayBuffer||Ep(i.data)))return e(Kl(i.data));hu(i,!1,t=>{vs||(vs=new TextEncoder),e(vs.encode(t))})}const Zl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<Zl.length;i++)Qr[Zl.charCodeAt(i)]=i;const lx=i=>{let e=i.length*.75,t=i.length,r,n=0,o,s,a,u;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);const h=new ArrayBuffer(e),l=new Uint8Array(h);for(r=0;r<t;r+=4)o=Qr[i.charCodeAt(r)],s=Qr[i.charCodeAt(r+1)],a=Qr[i.charCodeAt(r+2)],u=Qr[i.charCodeAt(r+3)],l[n++]=o<<2|s>>4,l[n++]=(s&15)<<4|a>>2,l[n++]=(a&3)<<6|u&63;return h},fx=typeof ArrayBuffer=="function",lu=(i,e)=>{if(typeof i!="string")return{type:"message",data:Ip(i,e)};const t=i.charAt(0);return t==="b"?{type:"message",data:cx(i.substring(1),e)}:nn[t]?i.length>1?{type:nn[t],data:i.substring(1)}:{type:nn[t]}:da},cx=(i,e)=>{if(fx){const t=lx(i);return Ip(t,e)}else return{base64:!0,data:i}},Ip=(i,e)=>{switch(e){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}},Pp="",dx=(i,e)=>{const t=i.length,r=new Array(t);let n=0;i.forEach((o,s)=>{hu(o,!1,a=>{r[s]=a,++n===t&&e(r.join(Pp))})})},px=(i,e)=>{const t=i.split(Pp),r=[];for(let n=0;n<t.length;n++){const o=lu(t[n],e);if(r.push(o),o.type==="error")break}return r};function vx(){return new TransformStream({transform(i,e){hx(i,t=>{const r=t.length;let n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);const o=new DataView(n.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{n=new Uint8Array(9);const o=new DataView(n.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}i.data&&typeof i.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(t)})}})}let ys;function Hi(i){return i.reduce((e,t)=>e+t.length,0)}function Gi(i,e){if(i[0].length===e)return i.shift();const t=new Uint8Array(e);let r=0;for(let n=0;n<e;n++)t[n]=i[0][r++],r===i[0].length&&(i.shift(),r=0);return i.length&&r<i[0].length&&(i[0]=i[0].slice(r)),t}function yx(i,e){ys||(ys=new TextDecoder);const t=[];let r=0,n=-1,o=!1;return new TransformStream({transform(s,a){for(t.push(s);;){if(r===0){if(Hi(t)<1)break;const u=Gi(t,1);o=(u[0]&128)===128,n=u[0]&127,n<126?r=3:n===126?r=1:r=2}else if(r===1){if(Hi(t)<2)break;const u=Gi(t,2);n=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(Hi(t)<8)break;const u=Gi(t,8),h=new DataView(u.buffer,u.byteOffset,u.length),l=h.getUint32(0);if(l>Math.pow(2,21)-1){a.enqueue(da);break}n=l*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Hi(t)<n)break;const u=Gi(t,n);a.enqueue(lu(o?u:ys.decode(u),e)),r=0}if(n===0||n>i){a.enqueue(da);break}}}})}const Ap=4;function St(i){if(i)return mx(i)}function mx(i){for(var e in St.prototype)i[e]=St.prototype[e];return i}St.prototype.on=St.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};St.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};St.prototype.off=St.prototype.removeListener=St.prototype.removeAllListeners=St.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var r,n=0;n<t.length;n++)if(r=t[n],r===e||r.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+i],this};St.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,n=t.length;r<n;++r)t[r].apply(this,e)}return this};St.prototype.emitReserved=St.prototype.emit;St.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};St.prototype.hasListeners=function(i){return!!this.listeners(i).length};const Bn=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Wt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),gx="arraybuffer";function Sp(i,...e){return e.reduce((t,r)=>(i.hasOwnProperty(r)&&(t[r]=i[r]),t),{})}const _x=Wt.setTimeout,xx=Wt.clearTimeout;function Dn(i,e){e.useNativeTimers?(i.setTimeoutFn=_x.bind(Wt),i.clearTimeoutFn=xx.bind(Wt)):(i.setTimeoutFn=Wt.setTimeout.bind(Wt),i.clearTimeoutFn=Wt.clearTimeout.bind(Wt))}const bx=1.33;function wx(i){return typeof i=="string"?Tx(i):Math.ceil((i.byteLength||i.size)*bx)}function Tx(i){let e=0,t=0;for(let r=0,n=i.length;r<n;r++)e=i.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function Cp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ex(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function Ix(i){let e={},t=i.split("&");for(let r=0,n=t.length;r<n;r++){let o=t[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class Px extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class fu extends St{constructor(e){super(),this.writable=!1,Dn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new Px(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=lu(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Ex(e);return t.length?"?"+t:""}}class Ax extends fu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};px(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,dx(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Cp()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Op=!1;try{Op=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Sx=Op;function Cx(){}class Ox extends Ax{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(n,o)=>{this.onError("xhr post error",n,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}class ae extends St{constructor(e,t,r){super(),this.createRequest=e,Dn(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=Sp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var n;r.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=ae.requestsCount++,ae.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Cx,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ae.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ae.requestsCount=0;ae.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Jl);else if(typeof addEventListener=="function"){const i="onpagehide"in Wt?"pagehide":"unload";addEventListener(i,Jl,!1)}}function Jl(){for(let i in ae.requests)ae.requests.hasOwnProperty(i)&&ae.requests[i].abort()}const Rx=(function(){const i=Rp({xdomain:!1});return i&&i.responseType!==null})();class Lx extends Ox{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Rx&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ae(Rp,this.uri(),e)}}function Rp(i){const e=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Sx))return new XMLHttpRequest}catch{}if(!e)try{return new Wt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Lp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Mx extends fu{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=Lp?{}:Sp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;hu(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}n&&Bn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Cp()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ms=Wt.WebSocket||Wt.MozWebSocket;class Fx extends Mx{createSocket(e,t,r){return Lp?new ms(e,t,r):t?new ms(e,t):new ms(e)}doWrite(e,t){this.ws.send(t)}}class Nx extends fu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=yx(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),n=vx();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const o=()=>{r.read().then(({done:a,value:u})=>{a||(this.onPacket(u),o())}).catch(a=>{})};o();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;this._writer.write(r).then(()=>{n&&Bn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Bx={websocket:Fx,webtransport:Nx,polling:Lx},Dx=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ux=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pa(i){if(i.length>8e3)throw"URI too long";const e=i,t=i.indexOf("["),r=i.indexOf("]");t!=-1&&r!=-1&&(i=i.substring(0,t)+i.substring(t,r).replace(/:/g,";")+i.substring(r,i.length));let n=Dx.exec(i||""),o={},s=14;for(;s--;)o[Ux[s]]=n[s]||"";return t!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=kx(o,o.path),o.queryKey=Xx(o,o.query),o}function kx(i,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Xx(i,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,o){n&&(t[n]=o)}),t}const va=typeof addEventListener=="function"&&typeof removeEventListener=="function",on=[];va&&addEventListener("offline",()=>{on.forEach(i=>i())},!1);class Me extends St{constructor(e,t){if(super(),this.binaryType=gx,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=pa(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=pa(t.host).host);Dn(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const n=r.prototype.name;this.transports.push(n),this._transportsByName[n]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ix(this.opts.query)),va&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},on.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Ap,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Me.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Me.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(t+=wx(n)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Bn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,n){if(typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:t,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Me.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),va&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=on.indexOf(this._offlineEventListener);r!==-1&&on.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Me.protocol=Ap;class Hx extends Me{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;Me.priorWebsocketSuccess=!1;const n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Me.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const c=new Error("probe error");c.transport=t.name,this.emitReserved("upgradeError",c)}}))};function o(){r||(r=!0,l(),t.close(),t=null)}const s=f=>{const c=new Error("probe error: "+f);c.transport=t.name,o(),this.emitReserved("upgradeError",c)};function a(){s("transport closed")}function u(){s("socket closed")}function h(f){t&&f.name!==t.name&&o()}const l=()=>{t.removeListener("open",n),t.removeListener("error",s),t.removeListener("close",a),this.off("close",u),this.off("upgrading",h)};t.once("open",n),t.once("error",s),t.once("close",a),this.once("close",u),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let Gx=class extends Hx{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(n=>Bx[n]).filter(n=>!!n)),super(e,r)}};function Vx(i,e="",t){let r=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),r=pa(i)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}const zx=typeof ArrayBuffer=="function",jx=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Mp=Object.prototype.toString,Yx=typeof Blob=="function"||typeof Blob<"u"&&Mp.call(Blob)==="[object BlobConstructor]",qx=typeof File=="function"||typeof File<"u"&&Mp.call(File)==="[object FileConstructor]";function cu(i){return zx&&(i instanceof ArrayBuffer||jx(i))||Yx&&i instanceof Blob||qx&&i instanceof File}function sn(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,r=i.length;t<r;t++)if(sn(i[t]))return!0;return!1}if(cu(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return sn(i.toJSON(),!0);for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&sn(i[t]))return!0;return!1}function Wx(i){const e=[],t=i.data,r=i;return r.data=ya(t,e),r.attachments=e.length,{packet:r,buffers:e}}function ya(i,e){if(!i)return i;if(cu(i)){const t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){const t=new Array(i.length);for(let r=0;r<i.length;r++)t[r]=ya(i[r],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){const t={};for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=ya(i[r],e));return t}return i}function $x(i,e){return i.data=ma(i.data,e),delete i.attachments,i}function ma(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=ma(i[t],e);else if(typeof i=="object")for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=ma(i[t],e));return i}const Kx=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Zx=5;var ft;(function(i){i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK"})(ft||(ft={}));class Jx{constructor(e){this.replacer=e}encode(e){return(e.type===ft.EVENT||e.type===ft.ACK)&&sn(e)?this.encodeAsBinary({type:e.type===ft.EVENT?ft.BINARY_EVENT:ft.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===ft.BINARY_EVENT||e.type===ft.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Wx(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}function Ql(i){return Object.prototype.toString.call(i)==="[object Object]"}class du extends St{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===ft.BINARY_EVENT;r||t.type===ft.BINARY_ACK?(t.type=r?ft.EVENT:ft.ACK,this.reconstructor=new Qx(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(cu(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(ft[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ft.BINARY_EVENT||r.type===ft.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const s=e.substring(o,t);if(s!=Number(s)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(o,t)}else r.nsp="/";const n=e.charAt(t+1);if(n!==""&&Number(n)==n){const o=t+1;for(;++t;){const s=e.charAt(t);if(s==null||Number(s)!=s){--t;break}if(t===e.length)break}r.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(du.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case ft.CONNECT:return Ql(t);case ft.DISCONNECT:return t===void 0;case ft.CONNECT_ERROR:return typeof t=="string"||Ql(t);case ft.EVENT:case ft.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Kx.indexOf(t[0])===-1);case ft.ACK:case ft.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Qx{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=$x(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const tb=Object.freeze(Object.defineProperty({__proto__:null,Decoder:du,Encoder:Jx,get PacketType(){return ft},protocol:Zx},Symbol.toStringTag,{value:"Module"}));function ee(i,e,t){return i.on(e,t),function(){i.off(e,t)}}const eb=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Fp extends St{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ee(e,"open",this.onopen.bind(this)),ee(e,"packet",this.onpacket.bind(this)),ee(e,"error",this.onerror.bind(this)),ee(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,n,o;if(eb.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const s={type:ft.EVENT,data:t};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const l=this.ids++,f=t.pop();this._registerAckCallback(l,f),s.id=l}const a=(n=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||n===void 0?void 0:n.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(u?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var r;const n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},n),s=(...a)=>{this.io.clearTimeoutFn(o),t.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...t){return new Promise((r,n)=>{const o=(s,a)=>s?n(s):r(a);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...o)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ft.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ft.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ft.EVENT:case ft.BINARY_EVENT:this.onevent(e);break;case ft.ACK:case ft.BINARY_ACK:this.onack(e);break;case ft.DISCONNECT:this.ondisconnect();break;case ft.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...n){r||(r=!0,t.packet({type:ft.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ft.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Xr(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}Xr.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=(Math.floor(e*10)&1)==0?i-t:i+t}return Math.min(i,this.max)|0};Xr.prototype.reset=function(){this.attempts=0};Xr.prototype.setMin=function(i){this.ms=i};Xr.prototype.setMax=function(i){this.max=i};Xr.prototype.setJitter=function(i){this.jitter=i};class ga extends St{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Dn(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Xr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||tb;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Gx(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=ee(t,"open",function(){r.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=ee(t,"error",o);if(this._timeout!==!1){const a=this._timeout,u=this.setTimeoutFn(()=>{n(),o(new Error("timeout")),t.close()},a);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(n),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ee(e,"ping",this.onping.bind(this)),ee(e,"data",this.ondata.bind(this)),ee(e,"error",this.onerror.bind(this)),ee(e,"close",this.onclose.bind(this)),ee(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Bn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Fp(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const $r={};function an(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};const t=Vx(i,e.path||"/socket.io"),r=t.source,n=t.id,o=t.path,s=$r[n]&&o in $r[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let u;return a?u=new ga(r,e):($r[n]||($r[n]=new ga(r,e)),u=$r[n]),t.query&&!e.query&&(e.query=t.queryKey),u.socket(t.path,e)}Object.assign(an,{Manager:ga,Socket:Fp,io:an,connect:an});var gs={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */var tf;function rb(){return tf||(tf=1,(function(i,e){(function(t){var r=Object.hasOwnProperty,n=Array.isArray?Array.isArray:function(g){return Object.prototype.toString.call(g)==="[object Array]"},o=10,s=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",u=typeof Reflect=="object",h=typeof setImmediate=="function",l=h?setImmediate:setTimeout,f=a?u&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(p){var g=Object.getOwnPropertyNames(p);return g.push.apply(g,Object.getOwnPropertySymbols(p)),g}:Object.keys;function c(){this._events={},this._conf&&d.call(this,this._conf)}function d(p){p&&(this._conf=p,p.delimiter&&(this.delimiter=p.delimiter),p.maxListeners!==t&&(this._maxListeners=p.maxListeners),p.wildcard&&(this.wildcard=p.wildcard),p.newListener&&(this._newListener=p.newListener),p.removeListener&&(this._removeListener=p.removeListener),p.verboseMemoryLeak&&(this.verboseMemoryLeak=p.verboseMemoryLeak),p.ignoreErrors&&(this.ignoreErrors=p.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function v(p,g){var _="(node) warning: possible EventEmitter memory leak detected. "+p+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(_+=" Event name: "+g+"."),typeof process<"u"&&process.emitWarning){var b=new Error(_);b.name="MaxListenersExceededWarning",b.emitter=this,b.count=p,process.emitWarning(b)}else console.error(_),console.trace&&console.trace()}var m=function(p,g,_){var b=arguments.length;switch(b){case 0:return[];case 1:return[p];case 2:return[p,g];case 3:return[p,g,_];default:for(var T=new Array(b);b--;)T[b]=arguments[b];return T}};function y(p,g){for(var _={},b,T=p.length,I=0,L=0;L<T;L++)b=p[L],_[b]=L<I?g[L]:t;return _}function x(p,g,_){this._emitter=p,this._target=g,this._listeners={},this._listenersCount=0;var b,T;if((_.on||_.off)&&(b=_.on,T=_.off),g.addEventListener?(b=g.addEventListener,T=g.removeEventListener):g.addListener?(b=g.addListener,T=g.removeListener):g.on&&(b=g.on,T=g.off),!b&&!T)throw Error("target does not implement any known event API");if(typeof b!="function")throw TypeError("on method must be a function");if(typeof T!="function")throw TypeError("off method must be a function");this._on=b,this._off=T;var I=p._observers;I?I.push(this):p._observers=[this]}Object.assign(x.prototype,{subscribe:function(p,g,_){var b=this,T=this._target,I=this._emitter,L=this._listeners,M=function(){var D=m.apply(null,arguments),U={data:D,name:g,original:p};if(_){var j=_.call(T,U);j!==!1&&I.emit.apply(I,[U.name].concat(D));return}I.emit.apply(I,[g].concat(D))};if(L[p])throw Error("Event '"+p+"' is already listening");this._listenersCount++,I._newListener&&I._removeListener&&!b._onNewListener?(this._onNewListener=function(D){D===g&&L[p]===null&&(L[p]=M,b._on.call(T,p,M))},I.on("newListener",this._onNewListener),this._onRemoveListener=function(D){D===g&&!I.hasListeners(D)&&L[p]&&(L[p]=null,b._off.call(T,p,M))},L[p]=null,I.on("removeListener",this._onRemoveListener)):(L[p]=M,b._on.call(T,p,M))},unsubscribe:function(p){var g=this,_=this._listeners,b=this._emitter,T,I,L=this._off,M=this._target,D;if(p&&typeof p!="string")throw TypeError("event must be a string");function U(){g._onNewListener&&(b.off("newListener",g._onNewListener),b.off("removeListener",g._onRemoveListener),g._onNewListener=null,g._onRemoveListener=null);var j=H.call(b,g);b._observers.splice(j,1)}if(p){if(T=_[p],!T)return;L.call(M,p,T),delete _[p],--this._listenersCount||U()}else{for(I=f(_),D=I.length;D-- >0;)p=I[D],L.call(M,p,_[p]);this._listeners={},this._listenersCount=0,U()}}});function C(p,g,_,b){var T=Object.assign({},g);if(!p)return T;if(typeof p!="object")throw TypeError("options must be an object");var I=Object.keys(p),L=I.length,M,D,U;function j(V){throw Error('Invalid "'+M+'" option value'+(V?". Reason: "+V:""))}for(var q=0;q<L;q++){if(M=I[q],!r.call(g,M))throw Error('Unknown "'+M+'" option');D=p[M],D!==t&&(U=_[M],T[M]=U?U(D,j):D)}return T}function P(p,g){return(typeof p!="function"||!p.hasOwnProperty("prototype"))&&g("value must be a constructor"),p}function F(p){var g="value must be type of "+p.join("|"),_=p.length,b=p[0],T=p[1];return _===1?function(I,L){if(typeof I===b)return I;L(g)}:_===2?function(I,L){var M=typeof I;if(M===b||M===T)return I;L(g)}:function(I,L){for(var M=typeof I,D=_;D-- >0;)if(M===p[D])return I;L(g)}}var w=F(["function"]),R=F(["object","function"]);function A(p,g,_){var b,T,I=0,L,M=new p(function(D,U,j){_=C(_,{timeout:0,overload:!1},{timeout:function(Y,it){return Y*=1,(typeof Y!="number"||Y<0||!Number.isFinite(Y))&&it("timeout must be a positive number"),Y}}),b=!_.overload&&typeof p.prototype.cancel=="function"&&typeof j=="function";function q(){T&&(T=null),I&&(clearTimeout(I),I=0)}var V=function(Y){q(),D(Y)},$=function(Y){q(),U(Y)};b?g(V,$,j):(T=[function(Y){$(Y||Error("canceled"))}],g(V,$,function(Y){if(L)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Y!="function")throw TypeError("onCancel callback must be a function");T.push(Y)}),L=!0),_.timeout>0&&(I=setTimeout(function(){var Y=Error("timeout");Y.code="ETIMEDOUT",I=0,M.cancel(Y),U(Y)},_.timeout))});return b||(M.cancel=function(D){if(T){for(var U=T.length,j=1;j<U;j++)T[j](D);T[0](D),T=null}}),M}function H(p){var g=this._observers;if(!g)return-1;for(var _=g.length,b=0;b<_;b++)if(g[b]._target===p)return b;return-1}function O(p,g,_,b,T){if(!_)return null;if(b===0){var I=typeof g;if(I==="string"){var L,M,D=0,U=0,j=this.delimiter,q=j.length;if((M=g.indexOf(j))!==-1){L=new Array(5);do L[D++]=g.slice(U,M),U=M+q;while((M=g.indexOf(j,U))!==-1);L[D++]=g.slice(U),g=L,T=D}else g=[g],T=1}else I==="object"?T=g.length:(g=[g],T=1)}var V=null,$,Y,it,at,et,rt=g[b],mt=g[b+1],yt,bt;if(b===T)_._listeners&&(typeof _._listeners=="function"?(p&&p.push(_._listeners),V=[_]):(p&&p.push.apply(p,_._listeners),V=[_]));else if(rt==="*"){for(yt=f(_),M=yt.length;M-- >0;)$=yt[M],$!=="_listeners"&&(bt=O(p,g,_[$],b+1,T),bt&&(V?V.push.apply(V,bt):V=bt));return V}else if(rt==="**"){for(et=b+1===T||b+2===T&&mt==="*",et&&_._listeners&&(V=O(p,g,_,T,T)),yt=f(_),M=yt.length;M-- >0;)$=yt[M],$!=="_listeners"&&($==="*"||$==="**"?(_[$]._listeners&&!et&&(bt=O(p,g,_[$],T,T),bt&&(V?V.push.apply(V,bt):V=bt)),bt=O(p,g,_[$],b,T)):$===mt?bt=O(p,g,_[$],b+2,T):bt=O(p,g,_[$],b,T),bt&&(V?V.push.apply(V,bt):V=bt));return V}else _[rt]&&(V=O(p,g,_[rt],b+1,T));if(Y=_["*"],Y&&O(p,g,Y,b+1,T),it=_["**"],it)if(b<T)for(it._listeners&&O(p,g,it,T,T),yt=f(it),M=yt.length;M-- >0;)$=yt[M],$!=="_listeners"&&($===mt?O(p,g,it[$],b+2,T):$===rt?O(p,g,it[$],b+1,T):(at={},at[$]=it[$],O(p,g,{"**":at},b+1,T)));else it._listeners?O(p,g,it,T,T):it["*"]&&it["*"]._listeners&&O(p,g,it["*"],T,T);return V}function N(p,g,_){var b=0,T=0,I,L=this.delimiter,M=L.length,D;if(typeof p=="string")if((I=p.indexOf(L))!==-1){D=new Array(5);do D[b++]=p.slice(T,I),T=I+M;while((I=p.indexOf(L,T))!==-1);D[b++]=p.slice(T)}else D=[p],b=1;else D=p,b=p.length;if(b>1){for(I=0;I+1<b;I++)if(D[I]==="**"&&D[I+1]==="**")return}var U=this.listenerTree,j;for(I=0;I<b;I++)if(j=D[I],U=U[j]||(U[j]={}),I===b-1)return U._listeners?(typeof U._listeners=="function"&&(U._listeners=[U._listeners]),_?U._listeners.unshift(g):U._listeners.push(g),!U._listeners.warned&&this._maxListeners>0&&U._listeners.length>this._maxListeners&&(U._listeners.warned=!0,v.call(this,U._listeners.length,j))):U._listeners=g,!0;return!0}function G(p,g,_,b){for(var T=f(p),I=T.length,L,M,D,U=p._listeners,j;I-- >0;)M=T[I],L=p[M],M==="_listeners"?D=_:D=_?_.concat(M):[M],j=b||typeof M=="symbol",U&&g.push(j?D:D.join(this.delimiter)),typeof L=="object"&&G.call(this,L,g,D,j);return g}function B(p){for(var g=f(p),_=g.length,b,T,I;_-- >0;)T=g[_],b=p[T],b&&(I=!0,T!=="_listeners"&&!B(b)&&delete p[T]);return I}function K(p,g,_){this.emitter=p,this.event=g,this.listener=_}K.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function Q(p,g,_){if(_===!0)T=!0;else if(_===!1)b=!0;else{if(!_||typeof _!="object")throw TypeError("options should be an object or true");var b=_.async,T=_.promisify,I=_.nextTick,L=_.objectify}if(b||I||T){var M=g,D=g._origin||g;if(I&&!s)throw Error("process.nextTick is not supported");T===t&&(T=g.constructor.name==="AsyncFunction"),g=function(){var U=arguments,j=this,q=this.event;return T?I?Promise.resolve():new Promise(function(V){l(V)}).then(function(){return j.event=q,M.apply(j,U)}):(I?process.nextTick:l)(function(){j.event=q,M.apply(j,U)})},g._async=!0,g._origin=D}return[g,L?new K(this,p,g):this]}function z(p){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,p)}z.EventEmitter2=z,z.prototype.listenTo=function(p,g,_){if(typeof p!="object")throw TypeError("target musts be an object");var b=this;_=C(_,{on:t,off:t,reducers:t},{on:w,off:w,reducers:R});function T(I){if(typeof I!="object")throw TypeError("events must be an object");var L=_.reducers,M=H.call(b,p),D;M===-1?D=new x(b,p,_):D=b._observers[M];for(var U=f(I),j=U.length,q,V=typeof L=="function",$=0;$<j;$++)q=U[$],D.subscribe(q,I[q]||q,V?L:L&&L[q])}return n(g)?T(y(g)):T(typeof g=="string"?y(g.split(/\s+/)):g),this},z.prototype.stopListeningTo=function(p,g){var _=this._observers;if(!_)return!1;var b=_.length,T,I=!1;if(p&&typeof p!="object")throw TypeError("target should be an object");for(;b-- >0;)T=_[b],(!p||T._target===p)&&(T.unsubscribe(g),I=!0);return I},z.prototype.delimiter=".",z.prototype.setMaxListeners=function(p){p!==t&&(this._maxListeners=p,this._conf||(this._conf={}),this._conf.maxListeners=p)},z.prototype.getMaxListeners=function(){return this._maxListeners},z.prototype.event="",z.prototype.once=function(p,g,_){return this._once(p,g,!1,_)},z.prototype.prependOnceListener=function(p,g,_){return this._once(p,g,!0,_)},z.prototype._once=function(p,g,_,b){return this._many(p,1,g,_,b)},z.prototype.many=function(p,g,_,b){return this._many(p,g,_,!1,b)},z.prototype.prependMany=function(p,g,_,b){return this._many(p,g,_,!0,b)},z.prototype._many=function(p,g,_,b,T){var I=this;if(typeof _!="function")throw new Error("many only accepts instances of Function");function L(){return--g===0&&I.off(p,L),_.apply(this,arguments)}return L._origin=_,this._on(p,L,b,T)},z.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var p=arguments[0],g,_=this.wildcard,b,T,I,L,M;if(p==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(_&&(g=p,p!=="newListener"&&p!=="removeListener"&&typeof p=="object")){if(T=p.length,a){for(I=0;I<T;I++)if(typeof p[I]=="symbol"){M=!0;break}}M||(p=p.join(this.delimiter))}var D=arguments.length,U;if(this._all&&this._all.length)for(U=this._all.slice(),I=0,T=U.length;I<T;I++)switch(this.event=p,D){case 1:U[I].call(this,p);break;case 2:U[I].call(this,p,arguments[1]);break;case 3:U[I].call(this,p,arguments[1],arguments[2]);break;default:U[I].apply(this,arguments)}if(_)U=[],O.call(this,U,g,this.listenerTree,0,T);else if(U=this._events[p],typeof U=="function"){switch(this.event=p,D){case 1:U.call(this);break;case 2:U.call(this,arguments[1]);break;case 3:U.call(this,arguments[1],arguments[2]);break;default:for(b=new Array(D-1),L=1;L<D;L++)b[L-1]=arguments[L];U.apply(this,b)}return!0}else U&&(U=U.slice());if(U&&U.length){if(D>3)for(b=new Array(D-1),L=1;L<D;L++)b[L-1]=arguments[L];for(I=0,T=U.length;I<T;I++)switch(this.event=p,D){case 1:U[I].call(this);break;case 2:U[I].call(this,arguments[1]);break;case 3:U[I].call(this,arguments[1],arguments[2]);break;default:U[I].apply(this,b)}return!0}else if(!this.ignoreErrors&&!this._all&&p==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},z.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var p=arguments[0],g=this.wildcard,_,b,T,I,L,M;if(p==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(g&&(_=p,p!=="newListener"&&p!=="removeListener"&&typeof p=="object")){if(I=p.length,a){for(L=0;L<I;L++)if(typeof p[L]=="symbol"){b=!0;break}}b||(p=p.join(this.delimiter))}var D=[],U=arguments.length,j;if(this._all)for(L=0,I=this._all.length;L<I;L++)switch(this.event=p,U){case 1:D.push(this._all[L].call(this,p));break;case 2:D.push(this._all[L].call(this,p,arguments[1]));break;case 3:D.push(this._all[L].call(this,p,arguments[1],arguments[2]));break;default:D.push(this._all[L].apply(this,arguments))}if(g?(j=[],O.call(this,j,_,this.listenerTree,0)):j=this._events[p],typeof j=="function")switch(this.event=p,U){case 1:D.push(j.call(this));break;case 2:D.push(j.call(this,arguments[1]));break;case 3:D.push(j.call(this,arguments[1],arguments[2]));break;default:for(T=new Array(U-1),M=1;M<U;M++)T[M-1]=arguments[M];D.push(j.apply(this,T))}else if(j&&j.length){if(j=j.slice(),U>3)for(T=new Array(U-1),M=1;M<U;M++)T[M-1]=arguments[M];for(L=0,I=j.length;L<I;L++)switch(this.event=p,U){case 1:D.push(j[L].call(this));break;case 2:D.push(j[L].call(this,arguments[1]));break;case 3:D.push(j[L].call(this,arguments[1],arguments[2]));break;default:D.push(j[L].apply(this,T))}}else if(!this.ignoreErrors&&!this._all&&p==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(D)},z.prototype.on=function(p,g,_){return this._on(p,g,!1,_)},z.prototype.prependListener=function(p,g,_){return this._on(p,g,!0,_)},z.prototype.onAny=function(p){return this._onAny(p,!1)},z.prototype.prependAny=function(p){return this._onAny(p,!0)},z.prototype.addListener=z.prototype.on,z.prototype._onAny=function(p,g){if(typeof p!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),g?this._all.unshift(p):this._all.push(p),this},z.prototype._on=function(p,g,_,b){if(typeof p=="function")return this._onAny(p,g),this;if(typeof g!="function")throw new Error("on only accepts instances of Function");this._events||c.call(this);var T=this,I;return b!==t&&(I=Q.call(this,p,g,b),g=I[0],T=I[1]),this._newListener&&this.emit("newListener",p,g),this.wildcard?(N.call(this,p,g,_),T):(this._events[p]?(typeof this._events[p]=="function"&&(this._events[p]=[this._events[p]]),_?this._events[p].unshift(g):this._events[p].push(g),!this._events[p].warned&&this._maxListeners>0&&this._events[p].length>this._maxListeners&&(this._events[p].warned=!0,v.call(this,this._events[p].length,p))):this._events[p]=g,T)},z.prototype.off=function(p,g){if(typeof g!="function")throw new Error("removeListener only takes instances of Function");var _,b=[];if(this.wildcard){var T=typeof p=="string"?p.split(this.delimiter):p.slice();if(b=O.call(this,null,T,this.listenerTree,0),!b)return this}else{if(!this._events[p])return this;_=this._events[p],b.push({_listeners:_})}for(var I=0;I<b.length;I++){var L=b[I];if(_=L._listeners,n(_)){for(var M=-1,D=0,U=_.length;D<U;D++)if(_[D]===g||_[D].listener&&_[D].listener===g||_[D]._origin&&_[D]._origin===g){M=D;break}if(M<0)continue;return this.wildcard?L._listeners.splice(M,1):this._events[p].splice(M,1),_.length===0&&(this.wildcard?delete L._listeners:delete this._events[p]),this._removeListener&&this.emit("removeListener",p,g),this}else(_===g||_.listener&&_.listener===g||_._origin&&_._origin===g)&&(this.wildcard?delete L._listeners:delete this._events[p],this._removeListener&&this.emit("removeListener",p,g))}return this.listenerTree&&B(this.listenerTree),this},z.prototype.offAny=function(p){var g=0,_=0,b;if(p&&this._all&&this._all.length>0){for(b=this._all,g=0,_=b.length;g<_;g++)if(p===b[g])return b.splice(g,1),this._removeListener&&this.emit("removeListenerAny",p),this}else{if(b=this._all,this._removeListener)for(g=0,_=b.length;g<_;g++)this.emit("removeListenerAny",b[g]);this._all=[]}return this},z.prototype.removeListener=z.prototype.off,z.prototype.removeAllListeners=function(p){if(p===t)return!this._events||c.call(this),this;if(this.wildcard){var g=O.call(this,null,p,this.listenerTree,0),_,b;if(!g)return this;for(b=0;b<g.length;b++)_=g[b],_._listeners=null;this.listenerTree&&B(this.listenerTree)}else this._events&&(this._events[p]=null);return this},z.prototype.listeners=function(p){var g=this._events,_,b,T,I,L;if(p===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!g)return[];for(_=f(g),I=_.length,T=[];I-- >0;)b=g[_[I]],typeof b=="function"?T.push(b):T.push.apply(T,b);return T}else{if(this.wildcard){if(L=this.listenerTree,!L)return[];var M=[],D=typeof p=="string"?p.split(this.delimiter):p.slice();return O.call(this,M,D,L,0),M}return g?(b=g[p],b?typeof b=="function"?[b]:b:[]):[]}},z.prototype.eventNames=function(p){var g=this._events;return this.wildcard?G.call(this,this.listenerTree,[],null,p):g?f(g):[]},z.prototype.listenerCount=function(p){return this.listeners(p).length},z.prototype.hasListeners=function(p){if(this.wildcard){var g=[],_=typeof p=="string"?p.split(this.delimiter):p.slice();return O.call(this,g,_,this.listenerTree,0),g.length>0}var b=this._events,T=this._all;return!!(T&&T.length||b&&(p===t?f(b).length:b[p]))},z.prototype.listenersAny=function(){return this._all?this._all:[]},z.prototype.waitFor=function(p,g){var _=this,b=typeof g;return b==="number"?g={timeout:g}:b==="function"&&(g={filter:g}),g=C(g,{timeout:0,filter:t,handleError:!1,Promise,overload:!1},{filter:w,Promise:P}),A(g.Promise,function(T,I,L){function M(){var D=g.filter;if(!(D&&!D.apply(_,arguments)))if(_.off(p,M),g.handleError){var U=arguments[0];U?I(U):T(m.apply(null,arguments).slice(1))}else T(m.apply(null,arguments))}L(function(){_.off(p,M)}),_._on(p,M,!1)},{timeout:g.timeout,overload:g.overload})};function E(p,g,_){_=C(_,{Promise,timeout:0,overload:!1},{Promise:P});var b=_.Promise;return A(b,function(T,I,L){var M;if(typeof p.addEventListener=="function"){M=function(){T(m.apply(null,arguments))},L(function(){p.removeEventListener(g,M)}),p.addEventListener(g,M,{once:!0});return}var D=function(){U&&p.removeListener("error",U),T(m.apply(null,arguments))},U;g!=="error"&&(U=function(j){p.removeListener(g,D),I(j)},p.once("error",U)),L(function(){U&&p.removeListener("error",U),p.removeListener(g,D)}),p.once(g,D)},{timeout:_.timeout,overload:_.overload})}var S=z.prototype;Object.defineProperties(z,{defaultMaxListeners:{get:function(){return S._maxListeners},set:function(p){if(typeof p!="number"||p<0||Number.isNaN(p))throw TypeError("n must be a non-negative number");S._maxListeners=p},enumerable:!0},once:{value:E,writable:!0,configurable:!0}}),Object.defineProperties(S,{_maxListeners:{value:o,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),i.exports=z})()})(gs)),gs.exports}var ib=rb();class nb extends ib.EventEmitter2{constructor(e){super(),this.game=e}listen(){this.io=an("http://localhost:8021",{transports:["websocket"]}),this.io.on("connect",()=>{console.log("connected"),this.emit("connected")}),this.io.on("connect_error",e=>{console.error("socket connect_error",e?.message??e)}),this.io.on("disconnect",e=>{console.warn("socket disconnected",e)}),this.io.on("enter_game",t=>{var t=JSON.parse(t);t.city=t.city??0,t.isMayor=!!t.isMayor,console.log("Player entered game"),console.log(t),this.game.otherPlayers[t.id]=t}),this.io.on("player",t=>{var t=JSON.parse(t);t.city=t.city??0,t.isMayor=!!t.isMayor,this.game.otherPlayers[t.id]=t}),this.io.on("bullet_shot",t=>{var t=JSON.parse(t);this.game.bulletFactory.newBullet(t.shooter,t.x,t.y,t.type,t.angle)}),this.io.on("new_icon",t=>{var t=JSON.parse(t);this.game.iconFactory.newIcon(null,t.x,t.y,t.type)}),this.io.on("new_building",e=>{try{const t=typeof e=="string"?JSON.parse(e):e;t&&(t.type=Number(t.type),t.population=t.population||0,t.ownerId=t.ownerId||t.owner||null,t.attachedHouseId=t.attachedHouseId??null),this.emit("building:new",t)}catch(t){console.warn("Failed to parse new_building payload",t)}}),this.io.on("population:update",e=>{try{const t=typeof e=="string"?JSON.parse(e):e;t&&(t.type=Number(t.type),t.population=t.population||0,t.attachedHouseId=t.attachedHouseId??null,t.city=t.city??0,t.smokeActive=!!t.smokeActive,t.smokeFrame=t.smokeFrame||0),this.emit("population:update",t)}catch(t){console.warn("Failed to parse population update",t)}}),this.io.on("demolish_building",e=>{try{const t=typeof e=="string"?JSON.parse(e):e;t&&t.id&&this.game.buildingFactory?.removeBuildingById&&this.game.buildingFactory.removeBuildingById(t.id)}catch(t){console.warn("Failed to handle demolish payload",t)}})}sendNewBuilding(e){this.io&&this.io.emit("new_building",JSON.stringify(e))}sendDemolishBuilding(e){!this.io||!e||this.io.emit("demolish_building",JSON.stringify({id:e}))}sendBulletShot(e){this.io.emit("bullet_shot",JSON.stringify(e))}enterGame(){return console.log("Telling server we've entered the game"),this.io.emit("enter_game",JSON.stringify(this.game.player)),this.io.id}cycle(){this.io.emit("player",JSON.stringify(this.game.player))}}var re=new J.Container;let ii=null,ni=null;const ef=new J.Point;function ob(i){var e=o=>{o.stopPropagation(),console.log("Setting is demolishing to true"),i.isDemolishing=!0,i.stage.cursor="demolish",i.interactionLayer&&(i.interactionLayer.cursor="demolish")},t=new J.Texture(i.textures.buildingIcons.baseTexture,new J.Rectangle(208,0,16,16)),r=new J.Sprite(t);r.x=i.buildMenuOffset.x-16,r.y=i.buildMenuOffset.y,r.interactive=!0,r.iconType=13,r.on("mousedown",e);var n=new J.Text("Demolish building",{fontSize:12,fill:16777215});n.x=i.buildMenuOffset.x,n.y=i.buildMenuOffset.y,n.interactive=!0,n.on("mousedown",e),re.addChild(r),re.addChild(n)}const Np=i=>{ni&&i.interactionLayer&&(i.interactionLayer.off("pointermove",ni),ni=null),ii&&(ii.destroy(),ii=null),i.isBuilding=!1,i.isDragging=!1,i.showBuildMenu=!1,re.visible=!1,i.interactionLayer&&(i.interactionLayer.cursor="cursor")},_a=(i,e,t)=>{Np(i),i.isBuilding=e,i.isDragging=!0,i.showBuildMenu=!1,re.visible=!1;const r=new J.Texture(i.textures.buildings.baseTexture,new J.Rectangle(0,parseInt(i.isBuilding/100)*144,144,144)),n=new J.Sprite(r);n.alpha=.5,n.interactive=!1,n.buttonMode=!1,i.stage.addChild(n),ii=n;const o=s=>{let a;if(s&&s.global)a=s.global;else if(i.app&&i.app.renderer&&i.app.renderer.plugins&&i.app.renderer.plugins.interaction){const h=i.app.renderer.plugins.interaction,l=h.pointer||h.mouse;l&&l.global&&(a=l.global)}if(!a)return;ef.copyFrom(a);const u=n.parent.toLocal(ef);n.position.copyFrom(u)};i.interactionLayer&&(ni=s=>o(s.data),i.interactionLayer.on("pointermove",ni),i.interactionLayer.cursor="pointer"),o(t)},Bp=i=>{if(i.forceDraw){re.removeChildren();var e=i.cities[i.player.city].canBuild,t=Object.keys(e),r=1;t.forEach(o=>{e[o]==Ke&&r++});var n=new J.Graphics;n.lineStyle(2,0,0),n.beginFill(0,1),n.drawRect(i.buildMenuOffset.x,i.buildMenuOffset.y,180,r*16),n.endFill(),re.addChild(n),ob(i),r=1,t.forEach((o,s)=>{if(e[o]==Ke){var a=We[o].TYPE,u=c=>{c.stopPropagation(),_a(i,a,c.data)},h=new J.Texture(i.textures.buildingIcons.baseTexture,new J.Rectangle(We[o].ICON*16,0,16,16)),l=new J.Sprite(h);l.x=i.buildMenuOffset.x-16,l.y=i.buildMenuOffset.y+r*16,l.interactive=!0,l.iconType=We[o].IMAGE,l.on("mousedown",u);var f=new J.Text(We[o].LABEL,{fontSize:12,fill:16777215});f.x=i.buildMenuOffset.x,f.y=i.buildMenuOffset.y+r*16,f.interactive=!0,f.on("mousedown",u),re.addChild(l),re.addChild(f),r++}}),re.visible=!1}i.stage.addChild(re),i.clearGhostBuilding=()=>Np(i),i.startGhostBuilding=(o,s)=>_a(i,o,s)};function sb(i){i.isBuilding&&!ii&&_a(i,i.isBuilding,null)}const ab=i=>{!i.isDragging&&!i.isDemolishing&&(re.visible=i.showBuildMenu),sb(i)};var rf=0,ub=function(i,e){for(var t=i.getHead(),r=1920,n=[];t;)t.x>e.offset.x-r&&t.x<e.offset.x+r&&t.y>e.offset.y-r&&t.y<e.offset.y+r&&n.push(t),t=t.next;return n},hb=(i,e,t,r,n)=>{var s=new J.Texture(i.textures.imageTurretBase.baseTexture,new J.Rectangle((t.type-9)*48,0,48,48));e.addFrame(s,t.x-i.player.offset.x+r,t.y-i.player.offset.y+n);var o=parseInt(t.angle/22.5+1);o==16&&(o=0);var s=new J.Texture(i.textures.imageTurretHead.baseTexture,new J.Rectangle(o*48,(t.type-9)*48,48,48));e.addFrame(s,t.x-i.player.offset.x+r,t.y-i.player.offset.y+n)};const Dp=(i,e)=>{var t=Math.floor(i.player.offset.x%48),r=Math.floor(i.player.offset.y%48);if(i.tick>rf){rf=i.tick+200,e.clear();var n=ub(i.itemFactory,i.player);n.forEach((o,s)=>{switch(o.type){case _n:hb(i,e,o,t,r);break}}),e.position.set(i.player.defaultOffset.x+i.player.offset.x-t,i.player.defaultOffset.y+i.player.offset.y-r)}e.pivot.set(i.player.offset.x,i.player.offset.y)};var lb=function(i,e){for(var t=i.getHead(),r=1920,n=[];t;)t.owner==null&&t.x>e.offset.x-r&&t.x<e.offset.x+r&&t.y>e.offset.y-r&&t.y<e.offset.y+r&&n.push(t),t=t.next;return console.log(n),n};const Up=(i,e)=>{var t=Math.floor(i.player.offset.x%32),r=Math.floor(i.player.offset.y%32);if(i.forceDraw){e.clear();var n=lb(i.iconFactory,i.player);n.forEach((o,s)=>{console.log(i.player.offset.x-o.x);var a=new J.Texture(i.textures.imageItems.baseTexture,new J.Rectangle(o.type*32,0,32,32));e.addFrame(a,o.x-i.player.offset.x+t,o.y-i.player.offset.y+r)}),e.position.set(i.player.defaultOffset.x+i.player.offset.x-t,i.player.defaultOffset.y+i.player.offset.y-r)}e.pivot.set(i.player.offset.x,i.player.offset.y)};var fb=(i,e)=>{var t=new J.Sprite(i.textures.interfaceTop);t.x=i.maxMapX,t.y=0,e.addChild(t);var r=new J.Sprite(i.textures.interfaceBottom);r.x=i.maxMapX,r.y=430,e.addChild(r)},cb=(i,e)=>{for(var t=i.iconFactory.getHead(),r=0,n=0;t;){if(t.owner==i.player.id){var o=new J.Texture(i.textures.imageItems.baseTexture,new J.Rectangle(t.type*32,0,32,32)),s=new J.Sprite(o);switch(t.type){case _n:r=i.maxMapX+7,n=372;break;case jg:r=i.maxMapX+7,n=267;break;case Xg:r=i.maxMapX+42,n=267;break;case Hg:r=i.maxMapX+77,n=267;break;case Gg:r=i.maxMapX+7,n=302;break;case Vg:r=i.maxMapX+42,n=302;break}if(t.selected){var a=new J.Sprite(i.textures.imageInventorySelection);a.x=r,a.y=n,e.addChild(a)}s.x=r,s.y=n,s.interactive=!0,s.buttonMode=!0;const u=t;s.on("mousedown",h=>{console.log("selecting item"),h.stopPropagation(),console.log("selecting item"),i.iconFactory.toggleSelected(u),i.forceDraw=!0}),e.addChild(s)}t=t.next}},db=(i,e)=>{if(!i.player.isMayor)return;const t=new J.Container,r=new J.Graphics;r.beginFill(15844367).lineStyle(2,10249216).drawCircle(0,0,18).endFill(),t.addChild(r);const n=new J.Text("M",{fontFamily:"Arial",fontWeight:"bold",fontSize:18,fill:1779249});n.anchor.set(.5),t.addChild(n),t.x=i.maxMapX+155,t.y=80,e.addChild(t);const o=new J.Text("Mayor",{fontFamily:"Arial",fontSize:12,fill:16645886,fontWeight:"bold"});o.anchor.set(.5,0),o.x=t.x,o.y=t.y+20,e.addChild(o)},pb=(i,e)=>{var t=i.player.health/od,r=new J.Texture(i.textures.health.baseTexture,new J.Rectangle(0,0,38,t*87)),n=new J.Sprite(r);n.anchor={x:1,y:1},n.x=i.maxMapX+175,n.y=247,e.addChild(n)};const kp=(i,e)=>{i.forceDraw&&(e.removeChildren(),fb(i,e),pb(i,e),cb(i,e),db(i,e))},It=i=>`/${i}`,Tn=J.LoaderResource||J.loaders&&J.loaders.Resource,Vi=Tn?Tn.LOAD_TYPE:{},nf=Tn?Tn.XHR_RESPONSE_TYPE:{},vb={r:255,g:0,b:255},yb=(i,e=vb)=>{if(!i||!i.data||!i.texture)return;const t=i.data,r=t.width,n=t.height,o=document.createElement("canvas");o.width=r,o.height=n;const s=o.getContext("2d");if(!s)return;s.drawImage(t,0,0);const a=s.getImageData(0,0,r,n),u=a.data;for(let l=0;l<u.length;l+=4)u[l]===e.r&&u[l+1]===e.g&&u[l+2]===e.b&&(u[l+3]=0);s.putImageData(a,0,0),i.texture&&i.texture.destroy(!0);const h=J.BaseTexture.from(o);h.alphaMode=J.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,h.scaleMode=J.SCALE_MODES.NEAREST,i.data=o,i.texture=new J.Texture(h),i.baseTexture=h};J.utils.isWebGLSupported();var ie=new J.Application({width:$i,height:Ki});ie.renderer.plugins.interaction.cursorStyles={demolish:`url(${It("imgDemolish.png")}), auto`,cursor:`url(${It("imgCursor.png")}), auto`};document.getElementById("game").appendChild(ie.view);var En=new Lg;En.showPanel(0);document.getElementById("game").appendChild(En.dom);var Xp=new J.Container,xa=new J.Container,un=null,hn=null,ln=null,fn=null;const Un=J.Loader.shared,Z={map:[],tiles:[],tick:0,lastTick:0,timePassed:0,staticTick:0,textures:[],maxMapX:$i-200,maxMapY:Ki,maxCities:0,otherPlayers:{},showBuildMenu:!1,buildMenuOffset:{x:($i-200)/2,y:Ki/2},buildings:{},cities:[],player:{id:-1,city:0,isMayor:!0,health:od,isTurning:0,timeTurn:0,direction:0,defaultOffset:{x:($i-200)/2,y:Ki/2},offset:{x:0,y:0,vx:0,vy:0}},app:ie,stage:ie.stage,objectContainer:Xp};Z.bulletFactory=new sx(Z);Z.buildingFactory=new tx(Z);Z.socketListener=new nb(Z);Z.iconFactory=new ax(Z);Z.itemFactory=new ux(Z);const mb=[{name:"imgTanks",url:It("imgTanks.png")},{name:"imgGround",url:It("skins/BattleCityDX/imgGround.png")},{name:"imgLava",url:It("skins/BattleCityDX/imgLava.png")},{name:"imgRocks",url:It("skins/BattleCityDX/imgRocks.png")},{name:"imgBullets",url:It("skins/BattleCityDX/imgBullets.png")},{name:"imgInterfaceTop",url:It("skins/BattleCityDX/imgInterface.png")},{name:"imgInterfaceBottom",url:It("skins/BattleCityDX/imgInterfaceBottom.png")},{name:"imgHealth",url:It("skins/BattleCityDX/imgHealth.png")},{name:"imgBuildings",url:It("skins/BattleCityDX/imgBuildings.png")},{name:"imgBuildIcons",url:It("imgBuildIcons.png")},{name:"imgItems",url:It("imgItems.png")},{name:"imgInventorySelection",url:It("imgInventorySelection.png")},{name:"imgPopulation",url:It("imgPopulation.png")},{name:"imgBlackNumbers",url:It("imgBlackNumbers.png")},{name:"imgTurretBase",url:It("skins/BattleCityDX/imgTurretBase.png")},{name:"imgTurretHead",url:It("skins/BattleCityDX/imgTurretHead.png")},{name:"imgSmoke",url:It("imgSmoke.png")},{name:"mapData",url:It("map.dat"),loadType:Vi.XHR!==void 0?Vi.XHR:1,xhrType:nf.BUFFER||"arraybuffer"},{name:"cityDemo",url:It("cities/Balkh/demo.city"),loadType:Vi.XHR!==void 0?Vi.XHR:1,xhrType:nf.TEXT||"text"}];Un.add(mb);Un.onProgress.add(gb);Un.load(_b);function gb(i,e){e&&console.log("loading: "+e.url),console.log("progress: "+i.progress+"%")}function _b(){console.log("loaded");const i=Un.resources;var e=i.mapData.data;Kg(Z,e),Qg(Z),Z.player.offset.x=Z.cities[Z.player.city].x+48,Z.player.offset.y=Z.cities[Z.player.city].y+100,[i.imgGround,i.imgLava,i.imgRocks,i.imgBuildings,i.imgBuildIcons,i.imgItems,i.imgInventorySelection,i.imgInterfaceTop,i.imgInterfaceBottom,i.imgTurretBase,i.imgTurretHead,i.imgPopulation,i.imgBlackNumbers,i.imgSmoke].forEach(r=>yb(r)),Z.textures.groundTexture=i.imgGround.texture,Z.textures.tankTexture=i.imgTanks.texture,Z.textures.rockTexture=i.imgRocks.texture,Z.textures.lavaTexture=i.imgLava.texture,Z.textures.bulletTexture=i.imgBullets.texture,Z.textures.interfaceTop=i.imgInterfaceTop.texture,Z.textures.interfaceBottom=i.imgInterfaceBottom.texture,Z.textures.health=i.imgHealth.texture,Z.textures.buildings=i.imgBuildings.texture,Z.textures.buildingIcons=i.imgBuildIcons.texture,Z.textures.imageIcons=i.imgItems.texture,Z.textures.imageItems=i.imgItems.texture,Z.textures.imageInventorySelection=i.imgInventorySelection.texture,Z.textures.imageTurretBase=i.imgTurretBase.texture,Z.textures.imageTurretHead=i.imgTurretHead.texture,Z.textures.population=i.imgPopulation.texture,Z.textures.blackNumbers=i.imgBlackNumbers.texture,Z.textures.smoke=i.imgSmoke.texture,o_(Z),s_(Z),Z.socketListener.listen(),Z.socketListener.on("connected",()=>{Z.player.id=Z.socketListener.enterGame(),console.log("Connected starting game")}),Z.socketListener.on("population:update",r=>{Z.buildingFactory.applyPopulationUpdate(r)}),Z.socketListener.on("building:new",r=>{r&&(Z.buildingFactory.newBuilding(r.ownerId||null,r.x,r.y,r.type,{notifyServer:!1,id:r.id,population:r.population||0,attachedHouseId:r.attachedHouseId||null,city:r.city??0,itemsLeft:r.itemsLeft||0,updateCity:!1}),Z.forceDraw=!0)}),un=new J.tilemap.CompositeRectTileLayer(0,Z.textures.groundTexture,!0),hn=new J.tilemap.CompositeRectTileLayer(0,null,!0),ln=new J.tilemap.CompositeRectTileLayer(0,Z.textures.imageItems,!0),fn=new J.tilemap.CompositeRectTileLayer(0,null,!0),ie.stage.addChild(un),ie.stage.addChild(hn),ie.stage.addChild(fn),ie.stage.addChild(ln),ie.stage.addChild(Xp),ie.stage.addChild(xa),Z.iconFactory.newIcon(null,1304,1540,12),Z.itemFactory.newItem(null,1500,1800,12),Bp(Z),Z.forceDraw=!0,yd(Z,un),bd(Z,hn),Up(Z,ln),Dp(Z,fn),kp(Z,xa),Z.forceDraw=!1,Hp()}var Kr=0,of=0;function Hp(){En.begin(),Z.lastTick=Z.tick,Z.tick=new Date().getTime(),Z.timePassed=Z.tick-Z.lastTick,Z.bulletFactory.cycle(),Z.socketListener.cycle(),Z.itemFactory.cycle(),Bp(Z),yd(Z,un),bd(Z,hn),Dp(Z,fn),m_(Z),ab(Z),Up(Z,ln),kp(Z,xa),n_(Z),ie.renderer.plugins.tilemap.tileAnim[0]=Kr*144,Z.forceDraw=!1,En.end(),requestAnimationFrame(Hp),Z.tick>of&&(of=Z.tick+300,Kr=Kr+1,Kr>=3&&(Kr=0))}
